;-------------------------------------------------
;小槌を使う
;日常系コマンド、レベル1
;-------------------------------------------------
@COM428
SIF FLAG:扮演 != 71
	PRINTL 針妙丸「请合理使用哦」
PRINTL 要许什么愿呢？
SIF TALENT:71:体型 != 0
	PRINTL [2] - 把針妙丸変成普通的大小
IF GETBIT(TALENT:MASTER:性別,1)
	PRINTL [3] - 要驚人的大屌！
	PRINTL [4] - 让我拥有与众不同的小兄弟！
ENDIF
SIF TALENT:MASTER:体型 >= -4
	PRINTL [5] - 变成小人！
SIF TALENT:MASTER:体型 < -4 && CFLAG:MASTER:小槌 == 6
	PRINTL [6] - 变回原来的大小……
PRINTL [7] - 变成巨人！
PRINTL 
PRINTL [100] - 返回
$LOOP
INPUT
IF RESULT == 2
	PRINTFORMW 许完愿后一挥动万宝槌
	PRINTFORMW 針妙丸的身体变成了普通的少女的大小。
	CFLAG:MASTER:小槌 = 8
	TALENT:71:体型 = 0
ELSEIF RESULT ==  3
	PRINTW 许完愿后一挥动万宝槌
	PRINTW 就拥有了大的藏不住的鸡鸡
	CFLAG:MASTER:小槌 = 4
	CFLAG:MASTER:382 = TALENT:MASTER:形状
	TALENT:MASTER:形状 = 10
	CFLAG:MASTER:魔力回収 = 6
ELSEIF RESULT == 4
	PRINTW 许完愿后一挥动万宝槌
	PRINTW 自己的小兄弟就真的多出一个了
	CFLAG:MASTER:382 = TALENT:MASTER:形状
	CFLAG:MASTER:小槌 = 5
	TALENT:MASTER:183 = 1
	CFLAG:MASTER:魔力回収 = 6
ELSEIF RESULT == 5 && TALENT:MASTER:100 >= -4
	PRINTFORMW 许完愿后一挥动万宝槌
	PRINTFORMW %CALLNAME:MASTER%的身体眼看着就缩小了
	CFLAG:MASTER:魔力回収 = 3
	CFLAG:MASTER:小槌 = 6
	FLAG:原本体格 = TALENT:MASTER:100
	TALENT:MASTER:体型 = -5
ELSEIF RESULT == 6 && TALENT:MASTER:体型 < -4 && CFLAG:MASTER:現在位置 == 54
	PRINTFORMW 「可不能在这里这様做啊！」
	RETURN -1
ELSEIF RESULT == 6 && (TALENT:MASTER:体型 < -4 || TALENT:MASTER:100 > 4)
	PRINTFORMW 许完愿后一挥动万宝槌
	PRINTFORMW %CALLNAME:MASTER%的身体变回了原様
	TALENT:MASTER:体型 = FLAG:原本体格
	CFLAG:MASTER:魔力回収 = 3
	CFLAG:MASTER:小槌 = 7
ELSEIF RESULT == 7 && TALENT:MASTER:体型 <= 4
	PRINTFORMW 许完愿后一挥动万宝槌
	PRINTFORMW %CALLNAME:MASTER%的身体变大了
	CFLAG:MASTER:魔力回収 = 3
	CFLAG:MASTER:小槌 = 6
	FLAG:原本体格 = TALENT:MASTER:体型
	TALENT:MASTER:100 = 5
ELSEIF RESULT == 100
SIF FLAG:扮演 != 71
	PRINTL 針妙丸「真是明智的选择呢」
	RETURN -1
ELSE
	GOTO LOOP
ENDIF
TIME += 5

RETURN 1

;小槌を使う
@COM_ABLE428
;停止中は不可
SIF FLAG:70 == 1
	RETURN 0
;移動実行判定
SIF !TFLAG:100
	RETURN 0
;一括管理
SIF GLOBAL_COMABLE(428)
	RETURN RESULT
;針妙丸が寝ていたらダメ
SIF CFLAG:71:睡眠
	RETURN 0
;針妙丸の居る所。針妙丸が虫かごにいる時は居間か縁側にいればセーフ
IF CFLAG:MASTER:現在位置 != CFLAG:71:現在位置 && FLAG:扮演 != 71
	IF CFLAG:71:現在位置 == 54 && (CFLAG:MASTER:現在位置 == 9 || CFLAG:MASTER:現在位置 == 10) && AT_HOME(MASTER)
	ELSE
	RETURN 0
	ENDIF
ENDIF
;SIF CFLAG:MASTER:現在位置 != CFLAG:71:現在位置
;	RETURN 0
SIF CFLAG:诶嘿嘿 == 2
	RETURN 0
;魔力回収中および針妙丸巨大化中は使用できない
SIF CFLAG:MASTER:魔力回収 > 0 || CFLAG:MASTER:小槌 == 8
	RETURN 0
RETURN 1