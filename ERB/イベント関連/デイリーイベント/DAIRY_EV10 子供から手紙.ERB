@DAIRY_CONDITION_EV10
#DIM YOME
#DIM CHILDNUM
SIF RAND:20 > 0
	RETURN -1
CALL PickRandGrownChild
YOME = RESULT
CHILDNUM = RESULT:1
VARSET RESULT

SIF YOME <= 0
	RETURN -1

CALL DAIRY_EV10(YOME, CHILDNUM)
RETURN 1

@DAIRY_EV10(ARG, ARG:1)
;PRINTFORMW %CALLNAME:ARG%との子供の%CHILDNAME:ARG:(ARG:1)%から手紙が来た
PRINTFORMW 从%CHILDNAME:ARG:(ARG:1)%来信
LOCAL:1 = 0
FOR LOCAL,1,CHARANUM
	SIF CFLAG:LOCAL:好感度 > CFLAG:ARG:好感度
		LOCAL:1 ++
NEXT

TARGET = ARG
;口上専用の手紙イベント分岐（なければ通常イベント）
IF !RAND:2
	TRYCCALLFORM M_KOJO_EVENT_K{ARG}_CHILD_DAIRY_口上手紙(ARG:1)
	CATCH
		GOTO TEGAMI
	ENDCATCH
ELSE
	$TEGAMI
	IF LOCAL:1 >= 3
		TRYCCALLFORM M_KOJO_EVENT_K{ARG}_CHILD_DAIRY_共通手紙(ARG:1, "すけこまし")
		CATCH
			PRINTFORMW 上面寫著腰好好愛護%CALLNAME:ARG%……
		ENDCATCH
	ELSEIF !RAND:5
		TRYCCALLFORM M_KOJO_EVENT_K{ARG}_CHILD_DAIRY_共通手紙(ARG:1, "金の無心")
		CATCH
			PRINTFORMW 又來要錢了……
		ENDCATCH
		PRINTFORMW %CALLNAME:MASTER%決定送去\@ MONEY > 30000? ￥30000# 所有的錢\@
		MONEY = MAX(MONEY - 30000,0)
	ELSE
		TRYCCALLFORM M_KOJO_EVENT_K{ARG}_CHILD_DAIRY_共通手紙(ARG:1, "仕送り")
		CATCH
			PRINTFORMW %CALLNAME:MASTER%收到了%CALLNAME:ARG%擔心的話和寄來的\\10000金
		ENDCATCH
		MONEY += 10000
	ENDIF
ENDIF
TARGET = TARGET:1
RETURN 1