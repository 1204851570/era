;*************************************************************************************
;	アリス・マーガトロイド　口上
;
;	「メモという名の私的落書き」
;	好き勝手やってるのでソースめっちゃ汚い　そのうちきっちりするって私の中のサグメさんが言ってた
;	テンプレートさんには【崩壊】がついてる
;	可読性さんなら放してやった
;	他人が見ても理解不能な部分多いと思うので、仕様・実装口上一覧.txtを見ることをオススメします
;
;
;・わたしのかんがえたさいきょうありすちゃん！の設定？
;	関係が進むと素直になっちゃう感じか
;	妄想エロ乙女（百合用語だったか
;	処女だけど耳年増
;	自主トレ(おなにー)の研究は欠かさない　つまり自分磨き！
;	外国人風なので海外との文化差などあればつけたい（イメージ的にイギリス人的な
;	上海の扱いに困る（お助けキャラとして使ってみる）
;	絶対鏡見る回数多いわー自分が一番可愛く映る角度知ってるわー……一般女子なら普通か
;	なんでもさせてくれる普通の子と、なにもさせてくれない美人どっｔ……なんでもさせてくれるアリス←それな
;	母性は高め、甘やかしたがりのくせに　"寂したがり"
;	恋慕になると男を駄目にする典型こわい
;
;・シチュエーションプレイ、自主トレを7種類用意したい
;	オナバレイベント、くっそ頭悪そうなこと言わせたい
;	アリスの受け攻め妄想は7種 合計14種
;	自主トレメニュー
;	1姫受け　2わんこ受け　3襲い受　4強気受け　5健気受け　6小悪魔受け　7誘い受け
;	1年上攻め　2強気攻め　3鬼畜攻め　4わんこ攻め　5ヘタレ攻め　6女王様(俺様)攻め　7言葉攻め？
;	七色の妄想を使いこなすアリス
;	調教コマンド(エロ系のやつ)をタイプ分けにして、あとでごっこ遊び(口上だけ変える)に使えるようにしたい
;	恋人同士で無理矢理えっちごっごとかいいじゃない！　とりあえずランダム喘ぎで攻め4、攻め3パターン作りました
;	基本2パターンをテキスト分けで装飾を変えるだけなので労力は少なくて済む設計になってるはず……
;
;	眠姦は寝たふりとかいいんじゃないかな（くっ……どこ触ってんのよ///）←起きるに起きられないみたいなの
;	眠姦まだ仕様よくわかってないので後で考える
;
;・貞操観念は普通で他の女に手出ししてても構わない
;	最後に戻ってくればいいと思ってる
;	実は1番じゃなきゃヤダっていう面倒くさい感じ
;	病まない程度に嫉妬させると可愛いんじゃないかな
;	マスターに他に恋人がいるとヘタれる。側室希望
;
;・誘い受けを装った小悪魔受け
;	こわいわー魔女こわい
;
;
;*************************************************************************************
;	□口上書く上での落書きメモ
;
;	素人考えのぷろぐらむ的なこと
;	なるべく後で手出ししやすいように
;	英語が不自由でも気にしない、そもそも日本語すら危うい
;	KISSの原則を忘れるな→忘れてないけど無理でした！
;	関数作るときは頭にK17つける　コマンド系は末尾に追加
;	SELECTCASEとswitchは違う（戒め
;	テキスト主体位置はできるだけインデント左寄せ優先で処理を考える　でかいIFとか作るならRETURNで返しちゃう
;	関数内の変数はstatic？外部参照できないけど保持はされるらしいので初期化に気をつける
;	グローバルいじるときもなるべく17つけて、キャラ番号が変わっても対応できる設計に。念のため他所様に迷惑かけないこと
;	こっち側でできるだけ自己修正機能持たせる
;	変数名の頭に数値iか文字列cとかsをなるべくつける　引数も名前変更するかぁ……
;
;	口上的なこと
;	あなた(プレイヤー)の呼び方
;	台詞中	%K17_CNAME()%	そのうち呼び方も入力で変えられるようにしようか迷う　現在の仕様は関係でちょっと変わるくらい
;	地の文	%CALLNAME:MASTER% %CALLNAME:TARGET%
;	イベント、特に一度しか通らないところはランダム要素控えめに　パラメーターの差異はあり
;	逆に何度も通るとこはRAND_SPLITで多いように見せかける
;	「おなにー」「えっち」ひらがなで言わせてみる
;	勃つ、挿れる漢字使い分ける
;	長くなる場合なるべく3～4行のブロック分けする
;
;******************************************************************************
;		[更新履歴]
;-2016-
;08/30	Ver0.00				夏休み最終日になんか思い立ってEmueraの勉強開始　一ヶ月後にリリース目指す
;09/30	α版				初リリース予定日 進捗だめです　ぐぬぬ、日曜日までバグ取り気になる箇所デバッグ
;10/03	α版 Ver0.01		初リリース
;10/08	α版 Ver0.02		主にコマンドの修正　関係性最高値時のヒント表示でエラー落ちする不具合修正
;10/14	α版 Ver0.02修正	イベント.ERBのみ修正パッチ　スレでのエラー報告を修正
;10/28	α版 Ver0.03		主にコマンド追加
;11/15	α版 Ver0.03修正	パッチ対応
;11/25	β版 Ver0.10		主にうふふ系のコマンドを追加
;11/27	β版 Ver0.10修正	K17_ROUNDの0除算修正
;11/28	β版 Ver0.11		主に修正　少し追加
;12/15	β版 Ver0.12		パンツ輸送の新仕様に対応　コマンド少し追加
;12/25	β版 Ver0.13		ライセンスを整理　copyrightを削除
;
;**** FlagManagement **********************************************************
;本口上にて変更しているCFLAG・TCVAR等　メモ
;本口上内だけで使用しているCFLAG・TCVAR等 念のため17を入れておく
;タグ　M_KOJO_K17_追加ライブラリ.ERH　参照　単純にその要素番号がなんのフラグか忘れちゃわないように名前つけてるだけ
;
;
;	[TALENT]	[タグ]						[説明]						[備考]
;TALENT:17:11	K17C_TALENT_態度			態度						刻印、イベントで変動
;TALENT:17:13	K17C_TALENT_プライド		プライド					刻印、イベントで変動
;
;	[TFLAG]
;TFLAG:120		キスマーク					キスマークのフラグ			本体で使っているもの、口上内で追加あり
;
;	[TCVAR]		[タグ]						[説明]						[備考]
;TCVAR:17:183	キスキャンセル
;TCVAR:17:350	K17C_TC_デートイベ完走		デートイベント再入フラグ	一日一回
;TCVAR:17:351	K17C_TC_デートイベ判定		デートイベント再入フラグ	判定だけなら何度でも
;TCVAR:17:352	K17C_TC_お風呂イベント		一日一回					追い出されたら判定もおしまい連打禁止
;TCVAR:17:353	K17C_TC_上海				一日一回
;TCVAR:17:354	K17C_TC_朝フェラ			一日一回					マスターが先に起きている場合も飛ばしちゃう
;TCVAR:17:355	K17C_TC_スキンシップ		ランダムの設定				毎回ランダムを一日一回設定して朝起きたら戻るはず
;TCVAR:17:356	K17C_TC_うふふ主導権		うふふ開始時の主導権		アリスからならキャラID MASTERからなら-1 終了時0で初期化
;TCVAR:17:357	K17C_TC_溜まってる度		溜まってる度の一時保存		押し倒し時、アリスの溜まってる度　押し倒されらMASTERの精力
;TCVAR:17:358	K17C_TC_人形劇フラグ		人形劇を見たかのフラグ		全部見ると立つ
;TCVAR:17:359	K17C_TC_タイプ一時保存		喘ぎタイプの一時保存		喘ぎタイプを切り替えする時の一時保存　主に拘束系
;TCVAR:17:360	K17C_TC_中出しカウント		MASTERの射精カウント		1回の中出し回数のカウント
;
;	[CFLAG]		[タグ]						[説明]						[備考]
;CFLAG:17:11	弱み握られ					口上内で追加点灯			オナバレ手を出しても点灯 同居自慰でも同等のイベント発生させてみている
;CFLAG:17:11	弱み握り					口上内で追加上下			スキンシップでお仕置きキスマークと同動作あり
;CFLAG:17:13	デート後イベントフラグ		DATE_EVENT再利用に伴う		UPDATEでバグ修正勝手にします（アリスのみ
;CFLAG:17:324	情事目撃					問い詰め用					アリスが恋人　もしくはマスターに恋人がいない場合の知り合いのみ

;CFLAG:17:1001	K17C_CF_素質変化フラグ		素質変化させるかのフラグ	0で未設定(変化あり) 1で変化あり　-1で変化なし
;CFLAG:17:1002	K17C_CF_FKマスター			キス用フラグ				0でまだ　1でした　MASTER用　ついでにカウントしてく
;CFLAG:17:1003	K17C_CF_FKアリス			キス用フラグ				0でまだ　1でした　アリス用　ついでにカウントしてく
;CFLAG:17:1004	K17C_CF_FK					ファーストキスのフラグ		お互いの初きっす　どっちがしたか 1でアリス　-1でMASTERでいいかな
;CFLAG:17:1005	K17C_CF_デートイベント		デートイベントフラグ		0でまだ　1でした
;CFLAG:17:1006	K17C_CF_告白イベント		告白イベントフラグ			0でまだ　1でした　ついでにカウント
;CFLAG:17:1007	K17C_CF_性癖取得			性癖取得フラグ				0でまだ　1でした
;																		性技廃止　快楽刻印で対応　使ってないので平気
;CFLAG:17:1009	K17C_CF_上海イベント		上海イベント				発生設定フラグ　0で未発生-1で発生抑制　やる場合はついでにカウント
;CFLAG:17:1010	K17C_CF_上海好感度			上海好感度					ちょっとしたおまけ　カウント方式
;CFLAG:17:1011	K17C_CF_人形台詞表示設定	人形台詞表示設定			口上中に人形の台詞を表示させるかの設定　イベントとは無関係　0で未設定　1表示　-1非表示
;CFLAG:17:1012	K17C_CF_オナバレ追加イベ	オナバレ追加イベ完走フラグ	0bitが鑑賞　1bitがオナバレックス
;CFLAG:17:1013	K17C_CF_オナニーフラグ		夜オナニーのフラグ			アリスちゃんゆうべはおたのしみでしたね　のフラグ　オナニーから遭遇したら消灯
;CFLAG:17:1014	K17C_CF_お友達イベント		お友達のフラグ				新設した関係性のフラグ そのうちイベント作る　イベントに関わらず関係あげる　保存はイベント後orUPDATE
;CFLAG:17:1015	K17C_CF_喘ぎRT				喘ぎRELATION_TYPE			グローバル保存しておく喘ぎで使うRT
;CFLAG:17:1016	K17C_CF_喘ぎタイプ			喘ぎタイプ					グローバル保存しておく喘ぎタイプ　絶頂とかまたぐやつもこれでなんとか
;CFLAG:17:1017	K17C_CF_喘ぎ部位			喘ぎ部位					グローバル保存しておく喘ぎ部位　ABL基準
;CFLAG:17:1018	K17C_CF_疑い			パンツ没収or時間停止の疑い値	パンツ没収or時間停止解除時の疑い　カウント式で貯まると時間停止バレになる 100まで
;CFLAG:17:1019	K17C_CF_パンツ没収			アリスのパンツ没収			アリスが自身のパンツを没収したことがあるかを保存する
;
;CFLAG:17:1100	K17C_CF_RTF					取得フラグ保存				RTF初回判定用保存用　UPDATEで再設定するときとか使う
;CFLAG:17:1101	K17C_CF_VER					バージョン番号				口上のバージョンを保存　更新するの忘れない……忘れそう
;CFLAG:17:1110	K17C_CF_受け既読			妄想の既読フラグ			受け妄想	既読フラグ読まれていないものから優先的に　妄想種類の必ず連番で使うこと
;CFLAG:17:1111	K17C_CF_攻め既読			妄想の既読フラグ			攻め妄想	全取得で完全ランダム
;CFLAG:17:1120	K17C_CF_喘ぎタイプ選択回数	経験タイプの保存			1120番代+タイプ番号　喘ぎタイプ選択回数を保存　10kまで
;
;
;	[CSTR] FIRSTTIMEで独自にぶっこんでる文字列　基本初回判定で読み飛ばしのためなんかに使う
;デートイベント
;告白イベント
;パンツ没収
;オナバレ
;オナバレ鑑賞初回
;オナバレックス初回
;修羅場					神綺様、夢子限定でプチ修羅場
;押し倒され				アリスがマスターを押し倒した初回
;押し倒し喘ぎタイプ選択
;脱衣
;上海イベント
;スキンシップ各番号0～8
;コマンド通常処理初回口上　SELECTCOM+口上（選択時ではなく通常口上に入ったかを見る　初回失敗などで弾かれた場合を考慮するため）
;
;******************************************************************************
;### 口上存在判定 ###################################
@M_KOJO_K17(ARG)
;ここでRESULTSを設定すると他の同キャラ口上を突っ込まれても正常動作する
;RESULTS = _TEST_
;と設定すると、"EVENT"系イベントだと
;M_KOJO_TEST_EVENT_K17_1() とかで呼ばれる……はず。（未テスト機能）
;ここでCFLAGやTALENTを利用する場合、キャラ番号が必須です
;眠姦口上有に1を入れると、眠姦時にコマンド口上が読み込まれるように

CFLAG:K17C_ID:眠姦口上有 = 1
RETURN 1
;### 口上色判定 ###################################
@M_KOJO_COLOR_K17
SETCOLOR K17C_愛麗絲COLOR
;ここでSETCOLORすることで口上に色を付けられます
;例：SETCOLOR 0xC07070
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"UPDATE判定"
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@M_KOJO_UPDATE_K17
;口上独自のUPDATE用
;ENCOUNTER専用に独自分岐フラグを仕込んだ場合等にどうぞ
;UPDATE判定でCFLAGを使う場合、キャラ番号の指定が必要になります
#DIM DYNAMIC TEMP=0
CALL COLORMESSAGE("妄想エロ乙女愛麗絲　設定・UPDATE開始",K17C_愛麗絲COLOR,1)
;******************************************************
;素質変更設定
;******************************************************
IF CFLAG:K17C_ID:K17C_CF_素質変化フラグ == 0
	PRINTL
	CALL CHOICE ("本口上による愛麗絲の素質変化をさせますか？","変化させる","変化させない")
	PRINTL
	SELECTCASE RESULT
		CASE 0
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = 1
			PRINTFORMDL 根据以后的行动素质会有所改变
		CASE 1
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = -1
			PRINTFORMDL 以后，本口上的素质变化不会进行
	ENDSELECT
ENDIF

;******************************************************
;人形について　キャラがいたら停止する
;******************************************************
TEMP = K17_GET_DOLL(0)
SIF !TEMP
	CFLAG:K17C_ID:K17C_CF_人形台詞表示設定 = -1
SIF !(TEMP & K17C_上海)
	CFLAG:K17C_ID:K17C_CF_上海イベント = -1

IF CFLAG:K17C_ID:K17C_CF_人形台詞表示設定 == 0
	PRINTL
	PRINTFORMDL 这个爱丽丝口上的稀有人形（\@K17_GET_DOLL(K17C_上海) ? 上海# \@　\@K17_GET_DOLL(K17C_蓬莱) ?蓬莱#\@）也会说话
	PRINTFORMD 这样的感觉→
	TRYCALL K17_人形台詞(K17C_上海,0)
	TRYCALL K17_人形台詞(K17C_蓬莱,1)
	RESETCOLOR
	PRINTFORMDL 現在的設定[保留中-喋ります]
	PRINTL
	CALL CHOICE("人形の台詞を表示しますか？","とりあえず保留","喋っていてもいいよ","黙らせる")
	SELECTCASE RESULT
		CASE 0
			PRINTFORMDW 保留设置。UPDATE的话又会有选择项
			SIF !FLAG:口上色
				PRINTFORMW 另外，口上色の設定是OFF的话可能会很难区分
		CASE 1
			PRINTFORMDW 设定为会说话
			CFLAG:K17C_ID:K17C_CF_人形台詞表示設定 = 1
			SIF !FLAG:口上色
				PRINTFORMW 另外，口上色の設定是OFF的话可能会很难区分
		CASE 2
			PRINTFORMDW 设定为沉默
			CFLAG:K17C_ID:K17C_CF_人形台詞表示設定 = -1
	ENDSELECT
ENDIF

;******************************************************
;この口上を使うためのだけのバグを勝手に修正
;******************************************************
;eraTW4.43修正前のセーブデータ
;デート後イベントフラグバグ修正 報告修正済み
;風呂の値が代入されていたため、コマンド選択する度に時間が入っていた模様
;フラグでは3までしかならないはずなので、とりあえず4以上なら修正
IF CFLAG:K17C_ID:约会後イベントフラグ > 3
	PRINTFORM 「约会后事件标志bug检查...
	CFLAG:K17C_ID:约会後イベントフラグ = 0
	PRINTFORM 初始化...
	
	IF CFLAG:K17C_ID:K17C_CF_约会イベント && (CFLAG:K17C_ID:既成事実 & 合意_接吻)
		SETBIT CFLAG:K17C_ID:约会後イベントフラグ , 0
		PRINTFORM 1更新...
	ENDIF
	IF CFLAG:K17C_ID:K17C_CF_告白イベント && (CFLAG:K17C_ID:既成事実 & 合意_恋人)
		SETBIT CFLAG:K17C_ID:约会後イベントフラグ , 1
		PRINTFORM 2更新...
	ENDIF
	
	PRINTFORMW 修改好了」
ENDIF

;見つけちゃった稀なやつ
;年齢バグの修正
;IF TALENT:MASTER:年齢 == -2
;	PRINTFORM 「年齢数値バグを検知...
;	TALENT:MASTER:年齢 = 0
;	PRINTFORMW 修正しました」
;ENDIF
;
;;体型バグの修正
;IF TALENT:MASTER:体型 == -3
;	PRINTFORM 「体型数値バグを検知...
;	TALENT:MASTER:体型 = 0
;	PRINTFORMW 修正しました」
;ENDIF

;******************************************************
;口上入れてからのロード時の対応
;とりあえず関係性を増減した場合は対応できるように
;******************************************************
;保存フラグの更新
IF K17_RT_FG(K17C_ID) != CFLAG:K17C_ID:K17C_CF_RTF
	
	;イベントフラグ再設定なんか巧いやり方考える
	;セーブデータからキスコマンド選択したか無理矢理探す
	IF !(FIRSTTIME(312,1,K17C_ID) || !FIRSTTIME(20,1,K17C_ID)) && !CFLAG:K17C_ID:K17C_CF_FKマ斯塔
		PRINTFORM 「检测特定SELECTCOM FIRSTIME...
		CFLAG:K17C_ID:K17C_CF_FKマ斯塔 = 1
		PRINTFORMW 更新了标记」
	ENDIF
	
	PRINTFORM 检测保存标志的差异...
	CFLAG:K17C_ID:K17C_CF_RTF = K17_RT_FG(K17C_ID)
	PRINTFORMW 更新了标记」
	PRINTFORML 显示下次提示
	PRINTL
	TRYCALL K17_HINT()
	PRINTW
ENDIF
;******************************************************
;口上のバージョン管理
;INTなんで小数点第2を1桁目とするかな
;こんな脆弱なものでいいのか……？（怯え
;******************************************************
IF CFLAG:K17C_ID:K17C_CF_VER < K17C_VER
	
	PRINTFORM 检测口上版本差异，UPDATE，开始自我诊断...
	
	;------------
	;Ver 0.02
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 002
		;スカートめくりで与えた既読を取り消し修正 動作テストおｋ
		;CSTRから指定文字列を検索して削除　/切り詰め
		TEMP = K17_AUTO_SPLIT_NUM(CSTR:K17C_ID:0,"/","330口上")
		
		;既読＆現条件式を見る
		IF CFLAG:K17C_ID:好感度 <= 5000 && TEMP != -1
			;既読を取り消し
			CSTR:K17C_ID:0 = %K17_CHANGE_SPLIT(CSTR:K17C_ID:0,"/",TEMP)%/
			;修正アナウンス
			CALL COLORMESSAGE("\n指令：掀起裙子。の既読を未読に再設定しました...",K17C_蓬莱COLOR,1)
			CALL COLORMESSAGE("判定基準が前Verから変わりました、再度選択挑戦してみてください...",K17C_蓬莱COLOR,1)
		ENDIF
	ENDIF
	;------------
	;Ver 0.03
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 003
		;新フラグの初期設定　しなくてもいいけど一応
		IF !CFLAG:K17C_ID:K17C_CF_喘ぎRT
			PRINTFORM \n正在初始设置新添加的标志...
			CALL K17_SET_AUTO_PVOICE(-1,-1,K17C_受け_おねだり系)
			PRINTFORMW 已配置
		ENDIF
	ENDIF
	;------------
	;Ver 0.10
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 010
		;新フラグの初期設定　喘ぎタイプの保存
		PRINTFORML \\nVer0.10更新...
		IF CFLAG:K17C_ID:既成事実 & 合意_诶嘿嘿
			PRINTFORM 嘿嘿合意検知...
			PRINTFORM \n正在初始设置新添加的标志...
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_おねだり系)
			PRINTFORMW 已配置
		ENDIF
		;セクハラ
		IF !FIRSTTIME("(313|315|316)口上",1,K17C_ID)
			PRINTFORM 检测性骚扰扰指令的经验...
			PRINTFORM \n正在初始设置新添加的标志...
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_合意襲い系)
			PRINTFORMW 已配置
		ENDIF
		;オナバレックス経験してれば無理矢理系保存
		IF !FIRSTTIME("オナバレックス初回",1,K17C_ID)
			PRINTFORM 检测手淫的经验...
			PRINTFORM \n正在初始设置新添加的标志...
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_强行系)
			PRINTFORMW 已配置
		ENDIF
		;押し倒されたことあれば基本を保存
		IF !FIRSTTIME("被逆推",1,K17C_ID)
			PRINTFORM 检测被反推经验...
			PRINTFORM \n正在初始设置新添加的标志...
			CALL K17_SET_AUTO_PVOICE(,,K17C_攻め_お手伝い系)
			PRINTFORMW 已配置
		ENDIF
		
	ENDIF
	;------------
	;Ver 0.13
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 013
		;MIN内でインクリメントしていたバグがあったため
		;経験していても、フラグ値が加算されていないデータ用
		IF CFLAG:K17C_ID:K17C_CF_上海イベント == 0 && FIRSTTIME("上海イベント",1,K17C_ID)
			PRINTFORM 上海活动经验检测...
			CFLAG:K17C_ID:K17C_CF_上海イベント++
			PRINTFORM \n加一些了标志值，很长时间没有发现错误，非常抱歉\n
		ENDIF
		
		IF CFLAG:K17C_ID:K17C_CF_告白イベント == 0 && FIRSTTIME("告白イベント",1,K17C_ID)
			PRINTFORM 检测告白活动经验...
			CFLAG:K17C_ID:K17C_CF_告白イベント++
			PRINTFORM \n加一些了标志值，很长时间没有发现错误，非常抱歉\n

			IF K17_RT_FG(K17C_ID) != CFLAG:K17C_ID:K17C_CF_RTF
				PRINTFORM 检测保存标志的差异...
				CFLAG:K17C_ID:K17C_CF_RTF = K17_RT_FG(K17C_ID)
				PRINTFORMW 更新了标记」
				PRINTFORML 显示下次提示
				PRINTL
				TRYCALL K17_HINT()
				PRINTW
			ENDIF
		ENDIF

	ENDIF
	;------------
	;口上バージョンの更新
	;------------
	CFLAG:K17C_ID:K17C_CF_VER = K17C_VER
	PRINTFORMW ...版本已更新
	
ELSEIF CFLAG:K17C_ID:K17C_CF_VER  == K17C_VER
	PRINTFORML 现在是最新版本
ELSE
	PRINTFORML 保存数据和口头版本不一致
	PRINTFORML 存档数据Ver. {CFLAG:K17C_ID:K17C_CF_VER/100}.{CFLAG:K17C_ID:K17C_CF_VER%100/10}{CFLAG:K17C_ID:K17C_CF_VER%10}
	PRINTFORML 目前的口上Ver. {K17C_VER/100}.{K17C_VER%100/10}{K17C_VER%10}
ENDIF

CALL COLORMESSAGE(@"妄想エロ乙女愛麗絲　設定・UPDATE終了",K17C_愛麗絲COLOR,1)
;なんだこの計算は（驚愕 あっれーなんかこういう命令なかったっけ
PRINTFORMW Ver. {K17C_VER/100}.{K17C_VER%100/10}{K17C_VER%10}
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"ENCOUNTER"系イベント（エクストラ構文）
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@M_KOJO_ENCOUNTER_K17
#DIM DYNAMIC iDoll,2	;人形フラグ

;初対面、挨拶のタイミング
;TALENTの変更はここでどうぞ
;******************************************************
;人形について　キャラがいたら停止する
;******************************************************
SIF !K17_GET_DOLL(K17C_上海)
	CFLAG:K17C_ID:K17C_CF_上海イベント = -1
SIF !K17_GET_DOLL(0)
	CFLAG:K17C_ID:K17C_CF_人形台詞表示設定 = -1
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:時間停止

	PRINTL
	
	;知り合いのなりきり　ドッペルギャンガー未対応
	IF FLAG:扮演 && K17_GET_FRIENDS(FLAG:扮演)
		PRINTFORML 「%K17_GT()%、%K17_CNAME()%」
		PRINTFORML 「……%K17_CNAME()%，对吧？」
		PRINTFORMDL %CALLNAME:TARGET%不知道为什么歪着头
		RETURN 1
	ENDIF
	
	
	;地域セレクト　地域で特別な会話などここで書く
	;魔法の森～人形の洋館まで　拠点できたら追記する
	;魔法の森非自宅時で魔法の森で会った時
	IF MAIN_MAP != 5 && CFLAG:現在位置 >= 森林的入口 && CFLAG:現在位置 <= 人偶的洋館
	
		;人かどうかの判定
		IF !(TALENT:MASTER:狐 || TALENT:MASTER:妖狐 || TALENT:MASTER:吸血鬼 ||TALENT:MASTER:動物耳)
			PRINTFORML 「哎呀？……来到这种地方的人类真是少见啊」
		ELSE
			PRINTFORML 「哎呀？……到这样的地方来的人……还是是妖怪？真少见啊」
		ENDIF
		PRINTFORMDL 出现的是在幻想乡少有的西洋风貌的女性
		PRINTFORMDL 清澈透明的白色肌肤，伸细直的手指触摸着金发。
		PRINTFORMDL 像顺着脸颊流动的头发\@ TIME:2 < 5 ?在阳光的照耀下#在月光下\@闪耀着
		PRINTFORML 「我住在这个森林里……难道是迷路的孩子吗？」
		PRINTFORML 「一个人在这种地方摇摇晃晃地走路很危险」
		PRINTFORMDL 像是担心似的，温柔地微笑着
		PRINTFORMDL 即使在危险的森林中，如果能遇到这样的美少女的话，那也不坏。
		PRINTFORML 「…………」
		PRINTW
		PRINTFORML 「……对初次见面的人相当轻薄」
		PRINTFORMDL 那样说着移开视线的她，看起来有点害羞。
		PRINTFORML 「至少不要被恶魔使欺骗啊」
		PRINTFORMDL 是作为魔法使而存在吗？
		PRINTFORML 「呵呵，那可怎么办呢」
		PRINTW
	
	;魔法の森が自宅の場合で拠点で会った　とりあえず仮置き
	ELSEIF MAIN_MAP == 5 && INRANGE(CFLAG:MASTER:現在位置,500,599)
			
		PRINTFORML 「%K17_CNAME()%，或许是最近才来的人吧……」
		PRINTFORMDL 出现的是在幻想乡少有的西洋风貌的女性
		PRINTFORMDL 清澈透明的白色肌肤，伸细直的手指触摸着金发。
		PRINTFORMDL 像顺着脸颊流动的头发\@ TIME:2 < 5 ?在阳光的照耀下#在月光下\@闪耀着
		PRINTFORMDL 认为她简直就像个玩偶,这想法有些失礼
		PRINTFORMDL 即使事实就是那样，也做得太精致了
		PRINTW
		PRINTFORML 「有什么为难的事吗？」
		PRINTFORML 「有什么事就马上说。不好的情况放任不管也不会好转的」
		PRINTFORMDL 像是担心似的，温柔地微笑着
		;自室
		IF CFLAG:K17C_ID:現在位置 == CFLAG:K17C_ID:初始位置
			PRINTFORML 「这个地方对外行人放着危险的东西，没有许可就不要进入了。」
		ELSE
			PRINTFORML 「特别是这附近有危险的地方，请小心。」
		ENDIF
		PRINTFORMDL 即使在有些危险的地方，如果能遇到这么漂亮的少女的话，那也不坏。
		PRINTFORML 「…………」
		PRINTW
		PRINTFORML 「……对初次见面的人相当轻薄」
		PRINTFORMDL 那样说着移开视线的她，看起来有点害羞。
		PRINTFORML 「至少不要被恶魔使欺骗啊」
		PRINTFORMDL 是作为魔法使而存在吗？
		PRINTFORML 「呵呵，那可怎么办呢」
	
	;人里広場
	ELSEIF CFLAG:MASTER:現在位置 == CFLAG:K17C_ID:職場 && CFLAG:K17C_ID:職種 == K17C_職種_人偶劇
		;人形劇中
		IF !CHARA_HOLIDAY(K17C_ID) && BASE:17:工作量 && TCVAR:K17C_ID:工作開始 <= TIME && TCVAR:K17C_ID:工作结束 >= TIME
			PRINTFORMDL 往人群里一看,正在演小人偶剧
			PRINTFORMDL 操纵者是长着西洋风面庞的女性，操纵的人偶也像舶来品一样。
			PRINTFORMDL 白皙透明的肌肤纤细的手指复杂地移动着，
			PRINTFORMDL 闪闪发光的光线在闪烁，小小的人偶不停地跳舞。
			PRINTFORMDL 过了一会儿，人偶滴滴答答地走到眼前，
			PRINTFORMDL 向着%CALLNAME:MASTER%伸出手
			TRYCALL K17_人形台詞(K17C_上海,0)
			TRYCALL K17_人形台詞(K17C_蓬莱,1)
			CFLAG:K17C_ID:K17C_CF_上海好感度+=20
			PRINTFORMDL %CALLNAME:MASTER%用手指摸着人偶的手做了自我介绍
			PRINTW
			PRINTFORMDL 是个做得很好的人偶，看上去像是夸张地挥动手臂大笑了一下。
			PRINTFORMDL 而且操纵人偶的女性的手臂非常棒
			PRINTFORMDL %CALLNAME:MASTER%看了一会儿人偶剧
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW …………
			PRINTL
			PRINTFORMDL 人群暂时散去，操纵人偶的少女突然笑了起来
			PRINTFORMDL 然后轻轻地举起裙子的一端恭敬地鞠躬
			PRINTFORMDL 看到如此惹人怜爱的姿态，%CALLNAME:MASTER%为之鼓掌
			PRINTW
		ENDIF
		
	;大図書館
	;自宅が紅魔館の時は場所が違うのでそれぞれ判定して
	ELSEIF (CFLAG:現在位置 == 大図書館 && GET_MAPID(CFLAG:現在位置) == 3 && MAIN_MAP != 3) || (MAIN_MAP == 3 && CFLAG:現在位置 == 310)
		
		PRINTFORML 「来这样发霉的地方的人，是小偷呢还是智力探求者……？」
		PRINTFORML 「不管怎样，盗取知识是一样的。」
		PRINTFORMDL 呃……？总之不是小偷
		PRINTFORMDL 但知识是值得学习的吧
		PRINTFORML 「没有这种学习，倒是经常有人来抢劫。」
		PRINTFORMDL 警备也好学习也好都要趁早
		PRINTFORML 「嘛，是这样啊。学习睡眠的话，是没有用的」
		PRINTW
		;ぱっちぇさんかこあがいる場合
		IF CFLAG:MASTER:現在位置 == CFLAG:54:現在位置 || CFLAG:MASTER:現在位置 == CFLAG:59:現在位置
			PRINTFORMDL 咳咳，咳咳，像是故意的咳嗽声在回响。
			PRINTFORML 「对不起，我本来不打算打扰你的……」
			PRINTFORML 「这里的管理者有很多麻烦。」
		ENDIF
		PRINTFORML 「算了……嘿，这边请」
		PRINTFORMDL 她招手到不给别人添麻烦的地方
		PRINTFORML 「看到这里有个不常见的脸，不知不觉就打了招呼，但是没有别的意思。」
		PRINTW
	ENDIF
	
	;～汎用～
	;以下に繋がるように↑を書く　条件に合わない時ここだけ表示
	
	PRINTFORMDL 人偶在眼前轻轻地飞着
	PRINTFORMDL %CALLNAME:MASTER%被那个景象一时夺去了视线
	PRINTFORML 「哎呀，人偶真的那么稀奇吗？」
	SIF MAIN_MAP!=5
		PRINTFORML 「……不过听说最近新面孔又增加了……」
	PRINTFORMDL 不知为什么看起来象是被估价似的
	PRINTFORMDL %CALLNAME:MASTER%一边紧张一边做了自我介绍
	PRINTW
	PRINTFORML 「介绍得晚了呢。初次见面，我是%NAME:TARGET%」
	PRINTFORML 「都市派魔法使哟」
	PRINTFORMDL 都市派……姑且不论，是魔法使吗
	PRINTFORM 「我也是使用木偶的」
	
	;一応キャラ名チェックしとく　謎のこだわり
	TRYCALL K17_人形台詞(K17C_上海,0)
	iDoll:0 = RESULT
	TRYCALL K17_人形台詞(K17C_蓬莱,1)
	iDoll:1 = RESULT
	IF iDoll:0 && iDoll:1
		PRINTFORML 「这个孩子是上海，这边是蓬莱。请多关照」
	ELSEIF iDoll:0
		PRINTFORML 「这个孩子是上海。请多关照」
	ELSEIF iDoll:1
		PRINTFORML 「这个孩子是蓬莱。请多关照」
	ELSE
		PRINTFORMDL 这样说着，人偶就来到了%CALLNAME:MASTER%的面前
	ENDIF
	PRINTFORMDL 都是做得很好的人偶，让人觉得是活着的。
	PRINTFORML 「承蒙夸奖，我感到很荣幸。都是自家制的」
	PRINTFORMDL 从那手指伸出的光之线？在黑暗中操纵着吗？
	PRINTFORML 「嘛，作为魔法使那是秘密。」
	PRINTFORMDL 以那样凛然的表情介绍的%CALLNAME:TARGET%，
	PRINTFORMDL 由此可见，她对作为魔法使的能力、亲手制作的人偶有着自豪感。
	PRINTFORMDL 乍一看觉得是叛逆的态度
	PRINTL	
	PRINTFORMDL 对于那样的%CALLNAME:TARGET%，%CALLNAME:MASTER%说
	PRINTL
	PRINTFORMDL [0]很期待今后会变成怎样
	PRINTFORMDL [1]我想看看率直的%CALLNAME:TARGET%
	PRINTFORMDL [2]希望%CALLNAME:TARGET%能继续这样骄傲下去
	PRINTFORMDL [3]我想说明这个选项
	$OPENING_INPUT_LOOP1
	INPUT
	PRINTL
	SELECTCASE RESULT
		CASE 0
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = 0
			PRINTFORMDL 很期待今后能成为好朋友。
			PRINTW
		CASE 1
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = 1
			PRINTFORMDL 我想今后成为好朋友，看看坦率的%CALLNAME:TARGET%
			PRINTW
		CASE 2
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = -1
			PRINTFORMDL 就算今后成为好朋友，%CALLNAME:TARGET%也一定很自豪吧
			PRINTW
		CASE 3
			PRINTFORMDL 选择[0]保留原有素质变化，UPDATE时可以变更一次
			PRINTFORMDL [1]根据之后的行动素质会发生变化，不固定
			PRINTFORMDL [2]选择素质不变，会固定
			PRINTFORMDL 对口上而言选择哪一个都不会有区别
			PRINTFORMDL 但是进展难易度会发生变化
			;PRINTFORMDL どっちにしろ恋慕がつけばデレる
			GOTO OPENING_INPUT_LOOP1
		CASEELSE
			GOTO OPENING_INPUT_LOOP1
	ENDSELECT
ENDIF
RETURN 1



;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"SP_EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;デート帰りにファーストKISS（合意も付く）
;基本キャンセルされる、ファーストキスを終えると
;二度と見られなくなりますが
;本口上では救済される……はず
;テスト成功　多分行けます
;告白イベントと連動開始
;1度キスキャンセルしたら選択肢はパスする形に
;==================================================
@M_KOJO_SPEVENT_K17_1(ARG,ARG:1)
#DIM DYNAMIC 人気 = 0
#DIM DYNAMIC スキップカウント = 0
#DIM DYNAMIC MAX好感度 = 0
#DIM DYNAMIC 恋人ID = -1
#DIM DYNAMIC MAX好感度ID = -1
#DIM DYNAMIC 順位 = 1
#DIM DYNAMIC iID_Count = 0

;口上主はTARGET
;CALL SPEVENT_MESSAGE_1(ARG,ARG:1)
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:時間停止

PRINTL
	IF FIRSTTIME("约会イベント")
		;初回限定
		PRINTFORMW 「喂，等等……」
		PRINTFORMDL 什么呀？回头一看
		PRINTFORMDL %CALLNAME:TARGET%稍微脸红了，一直低着头
		PRINTFORML 「嗯……嗯，微不足道的事情」
		PRINTFORML 「今天这一天%K17_CNAME()%交往了呢」
		PRINTFORML 「所以请和我交往吧」
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW …………
		PRINTFORML 「这个嘛，就是俗话说的约会吧」
		PRINTFORML 「和我做这种事开心吗？」
		IF TCVAR:TARGET:中止接吻 == 1
			PRINTFORML 「%K17_CNAME()%是怎样的想法，我想好好地问问。」
			PRINTFORMDL 当然，很开心
			RESULT =0
		ELSE
			{
			CALL K17_CHOICE("「"+K17_CNAME()+"はどうだったか、ちゃんと訊いておきたかったのよ」",
							"もちろん、楽しかった","正直あんまり……","そんなことより胖次ください")
			}
		ENDIF
	ELSE
		IF TCVAR:TARGET:中止接吻 == 1
			PRINTFORMW 「喂，今天过得怎么样……？」
			PRINTFORMDL 当然，很开心
			RESULT =0
		ELSE
			$DATE_INPUT_LOOP1
			CALL K17_CHOICE("「ねえ、今日はどうだった……？」","もちろん、楽しかった","正直あんまり……","そんなことより胖次ください")
		ENDIF
	ENDIF
	
	
	SELECTCASE RESULT
		CASE 0
			PRINTFORML 「是啊，谢谢。我也很开心」
		CASE 1
			PRINTFORML 「这样啊，那就算了……」
			PRINTFORML 「……果然会感觉迷茫吗？」
			PRINTFORMDL %CALLNAME:TARGET%小声地自言自语着又马上回到了凛然的脸上
			PRINTFORML 「对不起，没什么。」
			PRINTW
			TCVAR:TARGET:中止接吻 = 1
			TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
			RETURN 1
		CASEELSE
			スキップカウント++
			IF スキップカウント >= 3
				PRINTFORML 「算了……」
				PRINTW
				TCVAR:TARGET:中止接吻 = 1
				TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
				RETURN 1
			ENDIF
			PRINTFORML 「%K17_RS("请认真地回答/好好听我说话")%」
			GOTO DATE_INPUT_LOOP1
	ENDSELECT
	
	PRINTFORMDL 这个约会感觉成功了。
	PRINTW
	PRINTFORML 「我……并不是和谁都可以约会的」
	PRINTFORML 「我想在那片森林里一个人，一直和玩偶一起度过……」
	PRINTFORML 「但是呢，也有想要和美好的人恋爱的愿望哦……」
	PRINTFORMDL %CALLNAME:TARGET%凝视着我
	
	;人気チェック ついでに恋人が誰か探す　アリスちゃんまじこわい
	MAX好感度 = CFLAG:K17C_ID:好感度
	MAX好感度ID = K17C_ID
	FOR iID_Count,1,CHARANUM
		;出禁　アリス以外を見る
		SIF CFLAG:iID_Count:出禁 || iID_Count == K17C_ID
			CONTINUE
		IF MAX好感度 <= CFLAG:iID_Count:好感度
			MAX好感度 = CFLAG:iID_Count:好感度
			MAX好感度ID = iID_Count
		ENDIF
		SIF CFLAG:K17C_ID:好感度 <= CFLAG:iID_Count:好感度
			順位++
		SIF TALENT:iID_Count:恋慕
			人気 += 3
		SIF TALENT:iID_Count:思慕
			人気 += 1
		IF TALENT:iID_Count:恋人
			恋人ID = iID_Count
			人気 += 10
		ENDIF
	NEXT
	
	;MASTERに恋人がいてアリスではないとき
	IF !(CFLAG:TARGET:既成事実 & 合意_恋人) && TALENT:MASTER:恋人
		;誰が恋人か見る
		IF K17_GET_FRIENDS(恋人ID)
			;ｈ参照
			PRINTFORML 「比起这个，你居然是%K17_CNAME(恋人ID)%的恋人……」
			PRINTFORML 「这到底是怎么回事啊……」
		;その他の人
		ELSE
			PRINTFORML 「但是%K17_CNAME()%里还有其他恋人吧」
			PRINTFORML 「难道是在耍我吗？」
		ENDIF
		
	;それ以外
	ELSE
		;最大好感度か、すでに恋人ならここ
		IF MAX好感度ID == K17C_ID || TALENT:MASTER:恋人 == K17C_ID
			PRINTFORML 「但是不知道今后是不是%K17_CNAME()%的第一位，很不安。」
		ELSE
			;あわわわ……
			IF 順位 <= 5
				PRINTFORML 「我是%K17_CNAME()%的第{順位}位啊……」
			ELSE
				PRINTFORML 「我算是%K17_CNAME()%后宫的一员吧……」
			ENDIF
		ENDIF
		
		;人気を見る
		SELECTCASE 人気
			CASE IS >= 10
				PRINTFORML 「因为%K17_CNAME()%，貌似很受欢迎啊。」
			CASE IS >= 4
				PRINTFORML 「因为%K17_CNAME()%，好像对各种各样的孩子出手了。」
			CASE IS >= 1
				PRINTFORML 「因为%K17_CNAME()%，还有其他很在意的女儿吧」
			CASE 0
				PRINTFORML 「%K17_CNAME()%为什么那么拘泥于我？」
		ENDSELECT
	ENDIF
	
	IF 人気 != 0
		PRINTFORMDL 确实，可能是对%CALLNAME:TARGET%不诚实的缘故吧。
		;うそだ！
		PRINTFORML 「对不起，我不打算责备你。」
		PRINTFORML 「我是这么麻烦的家伙……」
		
		
		
		IF TCVAR:TARGET:中止接吻==0
			$DATE_INPUT_LOOP2
			CALL K17_CHOICE("「それでもまた、誘ってくれるかしら？」","もちろん誘う","さすがに、めんどくさい","そんなことより胖次ほしい")
		ELSE
			PRINTFORML 「即便如此，你还会再邀请我吗？」
			PRINTFORMDL 当然要邀请
			RESULT = 0
		ENDIF
		
		SELECTCASE RESULT
			CASE 0
				PRINTFORML 「嗯，谢谢。对温柔的%K17_CNAME()%撒娇了呢」
			CASE 1
				PRINTFORML 「……果然很麻烦啊」
				PRINTFORMDL %CALLNAME:TARGET%小声地自言自语着又马上回到了凛然的脸上
				PRINTFORML 「对不起，不用再邀请我了。」
				PRINTW
				TCVAR:TARGET:中止接吻 = 1
				TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
				RETURN 1
				
			CASEELSE
				スキップカウント++
				IF スキップカウント >= 3
					PRINTFORML 「算了……」
					PRINTW
					TCVAR:TARGET:中止接吻 = 1
					TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
					RETURN 1
				ENDIF
				PRINTFORML 「我本打算认真地说话。」
				GOTO DATE_INPUT_LOOP2
		ENDSELECT
		PRINTFORML 「那就好好说了吧……」
	ELSE
		PRINTFORMDL %CALLNAME:TARGET%认为这是理所当然的
		PRINTFORML 「啊……不，谢谢。%K17_CNAME()%还是一心一意吧」
		PRINTFORML 「那么，再见，那个，就作为对%K17_CNAME()%心情的回应吧。」
	ENDIF
	
	PRINTW
	
	;アリスからキス
	CALL K17_FIRSTKISS_ALICE(TARGET)
	IF RESULT == 0
		;もうアリスからのファーストキスをしてもらっていた場合
		SELECTCASE K17_GRT(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「我爱你……」
			CASE IS >= K17C_思慕
				PRINTFORML 「喜欢……」
		ENDSELECT
		PRINTFORML 「嗯……%K17_HEART()%」
		PRINTFORML 「这是我的第{CFLAG:K17C_ID:K17C_CF_FK愛麗絲}次接吻」
		PRINTW
	ENDIF
	
	IF TALENT:MASTER:無接吻経験 && TALENT:TARGET:無接吻経験
		PRINTFORML 「%K17_CNAME()%的第一次，是我拿到的吧」
		PRINTFORML 「我也是第一次%K17_CNAME()%真是太好了……」
		PRINTFORMDL 感觉彼此的心意相通了……
		PRINTW
	ELSEIF TALENT:TARGET:無接吻経験
		PRINTFORML 「这是我的第一次」
		PRINTFORMDL %CALLNAME:TARGET%与外表相反，是第一次接吻
		PRINTW
	ELSEIF TALENT:MASTER:無接吻経験
		PRINTFORML 「夺走了%K17_CNAME()%的第一次呢」
		PRINTFORMDL %CALLNAME:TARGET%的接吻很温柔
		PRINTW
	ENDIF
	
	PRINTFORML 「我想要好好传达我的心情哦……传达到了吗？」
	PRINTFORMDL 这份思念从嘴唇向%CALLNAME:MASTER%充分传达了……
	PRINTW
	
	IF CFLAG:TARGET:被掌握把柄
		PRINTFORML 「这个也是那个，那个封口费」
		PRINTFORMDL 那么说来似乎是被握住了把柄
		PRINTW
	ELSE
		;つまり誘い
		SIF TALENT:TARGET:恋慕
			PRINTFORML 「我随时都在等你……来见我吧「
		SIF TALENT:TARGET:思慕
			PRINTFORML 「我随时都在等你……来见我吧」
	ENDIF
	
	IF 人気 == 0 && 恋人ID == -1
		PRINTFORML 「……嗯，挺不错的」
	ELSEIF 人気 >= 1 && 恋人ID != -1
		PRINTFORML 「……不会输给任何人的」
	ELSEIF 人気 >= 1
		PRINTFORML 「……恩，无论如何先开始吧」
	ENDIF
	
	;恋人がすでにいる場合
	IF !(CFLAG:TARGET:既成事実 & 合意_恋人) && TALENT:MASTER:恋人
		IF K17_GET_FRIENDS(恋人ID)
			PRINTFORML 「……%K17_CNAME(恋人ID)%也在」
		;その他の人
		ELSEIF !(恋人ID == -1)
			PRINTFORML 「……听说是恋人」
		ENDIF
	ENDIF
	PRINTFORMDL %CALLNAME:TARGET%在耳边轻声呢喃
	
	;完走マジおつかれ　口上側から呼ぶのも考えて終了処理
	TCVAR:TARGET:中止接吻 = 0
	CFLAG:K17C_ID:K17C_CF_约会イベント =1
	SETBIT CFLAG:TARGET:约会後イベントフラグ,0
	TCVAR:K17C_ID:K17C_TC_约会イベ完走 = 1
	CALL K17_RELATION_EV(K17C_RTF_逢引)
	SIF !RESULT
		PRINTW
ENDIF
RETURN 1


;==================================================
;デート帰りに告白（恋人が付く）
;==================================================
@M_KOJO_SPEVENT_K17_2(ARG,ARG:1)
;口上主はTARGET
#DIM EVck=0	;デートイベントに行ってたかチェック
#DIM iRT=0
#DIM iRTF=0

EVck = 0
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:時間停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;告白内容
	;この告白内容表示後に受けるかどうかの選択分が表示されます
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 0
	
		;-------------------------------------------------
		;デートイベント前に告白に入る場合もあるので先消化
		;-------------------------------------------------
		IF !CFLAG:K17C_ID:K17C_CF_约会イベント
			TCVAR:TARGET:中止接吻 = 1
			EVck=1
			CALL M_KOJO_SPEVENT_K17_1(TARGET)
			SETBIT CFLAG:ARG:约会後イベントフラグ , 0
		ENDIF
				
		;各種初期化
		CFLAG:K17C_ID:K17C_CF_告白イベント = MIN(CFLAG:K17C_ID:K17C_CF_告白イベント + 1,10000)
		iRT = K17_GRT(TARGET)
		iRTF = K17_RT_FG(TARGET)
		;-------------------------------------------------
		;初回
		;-------------------------------------------------
		IF FIRSTTIME("告白イベント",1) && EVck==0
			;初回限定　デートイベント経由も飛ばし
			PRINTFORML 「……（好的）」
			PRINTFORMDL 怎么了，突然……
			PRINTFORMDL %CALLNAME:TARGET%双手攥拳
			PRINTFORML 「……啊……%K17_BLUSH()%」
			PRINTFORMDL 但是，朝那边一看，连耳朵都变得通红低着头
			PRINTFORML 「～～～终于、已经～」
			PRINTFORMDL 然后就那样啪啪地敲打过来
			PRINTFORMDL 不疼，总觉得可爱
			PRINTW
			CALLF FIRSTTIME("告白イベント")
		ENDIF
		
		;-------------------------------------------------
		;二回目以降ここから
		;-------------------------------------------------
		PRINTFORML 「恩，等等……让我这么做……」
		PRINTFORMDL 突然停下脚步的%CALLNAME:TARGET%缠上了%CALLNAME:MASTER%的%K17_RS("手臂/手")%，%K17_RS("把脸埋在胸前/抱了过来")%
		PRINTFORMDL 就这样蹭着脑袋撒娇
		PRINTW
		
		;MASTERに恋人がいてアリスではないとき　本家からはこない
		IF !(CFLAG:TARGET:1 & 4) && TALENT:MASTER:恋人
			SELECTCASE iRT
				CASE IS >= K17C_恋慕
					IF K17_GET_FRIENDS(TALENT:MASTER:恋人)
						PRINTFORML 「……明白这样的事对%K17_CNAME(TALENT:MASTER:恋人)%来说%K17_RS("很糟糕的/很对不起的")%吗」
					ELSE
						PRINTFORML 「……知道这样的事对%K17_RS("恋人/本命")%来说是%K17_RS("很糟糕的/很对不起的")%吗」
					ENDIF
					PRINTFORML 「但还是%K17_RS("喜欢/爱着/最喜欢")%%K17_CNAME()%哟」
					PRINTFORML 「我可以当%K17_RS("后宫的最后一位/后宫的一员/情人/妾/侧室")%的哦，你要好好记住……」
					PRINTFORML 「……我爱你」
				CASE IS >= K17C_思慕
					PRINTFORML 「果然那个……这难道不是%K17_RS("不好的/糟糕的/不允许的")%吗……」
					PRINTFORML 「但是已经%K17_RS("停不下来了/无法阻止了")%……」
					PRINTFORML 「……我喜欢你」
			ENDSELECT
			PRINTFORMDL %CALLNAME:MASTER%只能继续抚摸埋在前胸的%CALLNAME:TARGET%的头
			
		ELSEIF TALENT:MASTER:恋人 == K17C_ID
			;恋人同士
			PRINTFORML 「呼……对不起。不，谢谢，呐」
			PRINTFORML 「头发……啊……啊……」
			PRINTFORMDL 总觉得这样普通地撒娇的%CALLNAME:TARGET%少见抚摸着头
			PRINTFORML 「像这样明明已经是恋人了，却还好好地和我约会呢。」
			SELECTCASE iRT
				CASE IS >= K17C_性癖
					PRINTFORML 「呐，%K17_CNAME(0,1)% 喜欢%K17_HEART()% 最喜欢%K17_HEART()%%K17_HEART()%	爱你哦%K17_HEART()%」
					PRINTFORML 「真是的，已经。你为什么这么爱我？」
					PRINTFORML 「真的一直以来谢谢你，我爱你%K17_CNAME(MASTER,1)%」
				CASE IS >= K17C_恋慕告白
					PRINTFORML 」%K17_RS()%总是那么%K17_RS("关心/珍惜/爱着/疼爱")%我，谢谢」
					PRINTFORML 「我爱你」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_CNAME()%，你真的喜欢我吧……？」
					PRINTFORML 「不，应该是我更喜欢你。」
				CASE IS >= K17C_思慕
					PRINTFORML 「呵呵……%K17_RS("得分很高哦/很用心哦/对我很了解啊")%」
					PRINTFORML 「又喜欢上你了」
			ENDSELECT
			PRINTFORMDL 让%CALLNAME:TARGET%高兴，比什么都好
			PRINTFORMDL %CALLNAME:MASTER%与%K17_RS("最喜欢的/最爱的/重要的恋人")%%CALLNAME:TARGET%度过了快乐的时光
			
			
		;-------------------------------------------------
		;お互いまだ誰とも付き合ってない時 本来の仕様
		;-------------------------------------------------
		ELSEIF !TALENT:MASTER:恋人
			
			;-------------------------------------------------
			;告白　初回
			;-------------------------------------------------
			IF CFLAG:K17C_ID:K17C_CF_告白イベント == 1
				PRINTFORML 「喂，我们，算是什么呢……？」
				SIF iRTF & K17C_RTF_接吻
					PRINTFORML 「接吻了……」
				SIF iRTF & K17C_RTF_诶嘿嘿
					PRINTFORML 「身体的关系也……还有……」
				SIF !FIRSTTIME("オナバレ",1)
					PRINTFORML 「在家里……啊，那样的地方也被看到了……」
				
				PRINTFORMDL 的确……也许到现在为止还没有搞清楚相互之间的关系。
				PRINTFORML 「就算是%K17_CNAME()%也还没有和任何人交往吧」
				PRINTFORML 「…………」
				PRINTFORMDL 然后，是在寻找下一个要说词语呢，还是在等待呢？
				PRINTFORMDL %CALLNAME:TARGET%默默地低着头，扯着%CALLNAME:MASTER%衣服的下摆
				PRINTW
				SELECTCASE iRT
					CASE IS >= K17C_恋慕
						PRINTFORML 「那么，跟我好好交往吧……啊……」
						PRINTFORMDL 抬起头来用笔直的眼睛凝视着%CALLNAME:MASTER%
						PRINTFORMW 「我……爱着%K17_CNAME()%……」
						PRINTFORML 「已经无法想象没有%K17_CNAME()%的生活……」
						
					CASE IS >= K17C_思慕
						PRINTFORML 「那么，跟我好好交往吧……给我……」
						PRINTFORMW 「……%K17_CNAME()%……啊……喜欢……什么的……%K17_BLUSH(3)%」
						PRINTFORMDL 把耳朵都染得通红，用蚊子的声音这样说道
						PRINTFORML 「%K17_CNAME()%，好好负起我的责任，好吗……」
				ENDSELECT
			;-------------------------------------------------
			;告白　二回目以降　アリス練習してきた！
			;-------------------------------------------------
			ELSE
				PRINTFORML 「呼……哎呀，不明白？接下来要说的话……」
				PRINTFORML 「在和%K17_CNAME()%成为恋人之前我要说几次都行哦」
				PRINTFORMDL %CALLNAME:TARGET%朝着%CALLNAME:MASTER%的方向，用直率的眼睛凝视着
				SELECTCASE iRT
					CASE IS >= K17C_恋慕
						
						PRINTFORMW 「%K17_CNAME()%，我的爱%K17_HEART()%」
						
						;口説き文句　あれこれ重くね？
						PRINTDATADL
							DATAFORM 「%K17_CNAME()%のために毎日ご飯作ってもいいわ」
							DATAFORM 「その……えっちなことだって、毎日しても構わないわ」
							DATAFORM 「毎朝%K17_CNAME()%の横で目を覚ましたい……」
							DATAFORM 「ずっと傍に置いて、いつでもどこでも一緒に居て欲しいの」
						ENDDATA
						PRINTFORML 「不要再死心了吧……真的……」
						
					CASE IS >= K17C_思慕
						
						PRINTFORMW 「喜欢%K17_CNAME()%哦」
						PRINTFORML 「请和我交往」
						PRINTFORML 「如、如何？我已经毫不害羞地说出来了」
				ENDSELECT
				
				;嘘だ！
				PRINTFORML 「让你等我这么久，也不是说让你立刻回答我」
				PRINTFORML 「但是……要好好记住哦」
				
			ENDIF
		ENDIF
		
		;フラグチェック
		CALL K17_RELATION_EV(K17C_RTF_告白)
		TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;告白オッケー（恋人が付く）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「……」
		PRINTFORML 「……嗯……我真的可以吗……？」
		PRINTFORMDL 当然可以。和%CALLNAME:TARGET%成为恋人
		PRINTFORMDL 我打算这样回答
		PRINTW
		PRINTFORML 「哇……我！我要成为更可爱、更漂亮的女孩！」
		PRINTFORMDL 我想现在也足够了……
		PRINTFORML 「我想成为与%K17_CNAME()%相称的恋人」
		PRINTFORML 「谢谢你，%K17_CNAME()%。我会加油的」
		PRINTW
		PRINTFORML 「%K17_CNAME()%，我爱你，%K17_HEART()%」
		PRINTFORMDL 相当兴奋的%CALLNAME:TARGET%笑着抱住了%CALLNAME:MASTER%
		PRINTFORMDL 那是至今为止见过的最好的笑容。
		;フラグチェック
		CALL K17_RELATION_EV(K17C_RTF_恋人)
		TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;告白失敗
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		
		;振られた回数によって分岐
		SELECTCASE CFLAG:K17C_ID:K17C_CF_告白イベント
			CASE IS >= 10
				PRINTFORML 「已经被甩了10次以上了呢……」
				PRINTFORML 「……笨蛋……」
				PRINTFORMDL 终于，%CALLNAME:TARGET%的眼睛里流出了大颗的泪水……
				PRINTFORML 「……但是……非常喜欢……」
			CASE IS >= 5
				PRINTFORML 「呼……」
				PRINTFORML 「我知道…………我知道，所以什么也别说……」
				PRINTFORMDL %CALLNAME:TARGET%说完就把脸转开了。看起来很消沉
			CASEELSE
				PRINTFORML 「呼……嗯，没关系」
				PRINTFORML 「不管几次，绝对会让你回头……」
				PRINTFORMDL 虽是这么说着，%CALLNAME:TARGET%坚强地行动，但隐约可见眼里浮着泪水。
		ENDSELECT
		PRINTFORMDL 看着%CALLNAME:TARGET%的背影，%CALLNAME:MASTER%无言以对……
		TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	

TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
ENDIF
RETURN 1

;==================================================
;デート帰り
;==================================================
@M_KOJO_SPEVENT_K17_3(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:時間停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常帰宅
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL = 1
	;-------------------------------------------------
	IF LOCAL && ARG == 0
	
		;デートイベントを再判定　SP再突入は一日一回
		IF TCVAR:K17C_ID:K17C_TC_约会イベ完走==0 && TCVAR:K17C_ID:K17C_TC_约会イベ判定==0 && !FLAG:時間停止
			CALL K17_DATE_EVENT_RELIEF(TARGET)
			IF TCVAR:K17C_ID:K17C_TC_约会イベ完走
				RETURN 1
			ENDIF
		ENDIF
		
		SELECTCASE K17_GRT(TARGET)
			CASE IS>=K17C_思慕诶嘿嘿
				PRINTFORML 「已经到返程时间了吗……」
				PRINTFORML 「好可惜啊……和%K17_CNAME()%在一起时间过得真快啊」
				PRINTFORMDL %CALLNAME:TARGET%依偎在%CALLNAME:MASTER%身上，依恋不舍地抱住%K17_RS("手/身体/手臂")%
			CASE IS>=K17C_思慕
				PRINTFORML 「恩，今天非常感谢。」
				PRINTFORML 「和%K17_CNAME()%在一起真的好开心啊」
				PRINTFORMDL 平时看起来很冷酷的%CALLNAME:TARGET%，今天却%K17_RS("脸上显得有点儿红/不肯放开紧握的手/有点神情陶醉")%
			CASEELSE
				PRINTFORML 「嗯，辛苦了」
				PRINTFORMDL 飒爽地离开了
		ENDSELECT
		
		;戻ってきたので判定のみ戻し
		;一度目判定失敗（通常帰宅）してもイベント完走してなければ同じ日でもイベント見れるはず
		;ただし本家仕様は考慮されない仕方ないね
		;キスキャンセルした場合も完走としてみなし、翌日から
		TCVAR:K17C_ID:K17C_TC_约会イベ判定=0

	ENDIF
	;-------------------------------------------------
	;反発刻印消去イベント
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「照你说的改变态度了」
		PRINTFORML 「别又马上得意忘形」
	ENDIF
	;-------------------------------------------------
	;反発刻印2>1レベルダウンイベント
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「算了，及格了。」
		PRINTFORML 「还是要努力来补偿罪孽」
	ENDIF
	;-------------------------------------------------
	;反発刻印3>2レベルダウンイベント
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「今天我会好好评价你的」
		PRINTFORML 「但是这种程度还不能认为已经被原谅了呢。」
	ENDIF
	
	
ENDIF
PRINTW
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;部屋で遭遇
;改行したいのでRETURN統一
;仕事中はなしで
;==================================================
@M_KOJO_EVENT_K17_1(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && CFLAG:K17C_ID:行動 != 5

	PRINTL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;MASTERが入ってきた
	;一日一回処理
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		IF !TCVAR:TARGET:今天有否见面
			
			;朝目を覚ました時時間が更新されないので挨拶おかしくなるので退避
			IF CFLAG:TARGET:初始位置 == CFLAG:MASTER:初始位置
				TCVAR:TARGET:今天有否见面 = 0
				CALL M_KOJO_EVENT_K17_2(1)
				CFLAG:K17C_ID:K17C_CF_自慰フラグ = 0
				RETURN 1
			ENDIF
			
			;オナバレ後の遭遇
			IF CFLAG:TARGET:オナバレ
				PRINTFORML 「啊……%K17_BLUSH()%」
				;鑑賞orオナバレックス
				IF CFLAG:TARGET:オナバレ > 1
					SELECTCASE K17_GRT(TARGET)
						CASE IS >= K17C_思慕诶嘿嘿
							PRINTFORML 「……%K17_GT()%、变态%K17_HEART()%」
						CASEELSE
							PRINTFORML 「……变态%K17_BLUSH()%」
					ENDSELECT
				ENDIF
				PRINTW
				RETURN 1
			ENDIF
			
			;夜オナニー後遭遇　思慕↑
			IF CFLAG:K17C_ID:K17C_CF_自慰フラグ
				SELECTCASE K17_GRT(TARGET)
					CASE IS >= K17C_恋慕
						PRINTFORML 「……%K17_GT()%……%K17_BLUSH()%」
						PRINTFORML （又擅自妄想了……对不起。）
					CASE IS >= K17C_思慕
						PRINTFORML 「……%K17_GT()%……%K17_BLUSH()%」
						PRINTFORML （啊~~%K17_BLUSH()%会意识到……）
				ENDSELECT
				PRINTFORMDL 总觉得今天的%CALLNAME:TARGET%脸红透了
				CFLAG:K17C_ID:K17C_CF_自慰フラグ = 0
				PRINTW
				RETURN 1
			ENDIF
			
			
			;通常処理
			SELECTCASE K17_GRT_EX(TARGET)
				CASE IS >= K17C_恋慕
					PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)%今天也是%K17_RS("来见我/想见我")%的吧%K17_HEART()%」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME(MASTER,1)% %K17_RS("今天又见面了/最近经常见面呢/我们又见面了")%」
				CASE IS >= K17C_思慕
					PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今天又见面了/最近经常见面呢/我们又见面了")%」
				CASEELSE
					PRINTFORML 「%K17_RS("啊啦/嗯")%、%K17_GT()%」
			ENDSELECT
		
	;-------------------------------------------------
	;1日中会う度に出る
	;-------------------------------------------------
		ELSE
			;特殊な場所の処理
			IF BATHCHECK(CFLAG:MASTER:現在位置)
				PRINTFORMDL %CALLNAME:TARGET%用胳膊遮住裸体
				RETURN 1
			ENDIF
			
			;通常処理
			PRINTFORMD 是%CALLNAME:TARGET%
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕
					PRINTFORMD 轻轻地挥着手
					PRINTFORMD %K17_RS("眼睛一闪一闪的/笑着看过来/一脸陶醉")%
				CASE IS >= K17C_思慕
					PRINTFORMD 轻轻地举起手
					PRINTFORMD %K17_RS("有点脸红/有点害羞/视线一接触就移开了")%
			ENDSELECT
			PRINTFORMDL %CALLNAME:MASTER%与%K17_RS("靠近了/打了招呼/走近了")%
			
		;一日一回終端
		ENDIF
	;MASTERが入ってきた終端
	ENDIF
	;-------------------------------------------------
	;TARGETが入ってきた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		IF !TCVAR:TARGET:今天有否见面 && CFLAG:17:行動 != 5
			;通常処理
			SELECTCASE K17_GRT_EX(TARGET)
				CASE IS >= K17C_恋慕
					PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)%%K17_RS("过来吧/一直想见你")%%K17_HEART()%」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME(MASTER,1)% %K17_RS("今天又见面了/最近经常见面呢/我们又见面了")%」
				CASE IS >= K17C_思慕
					PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今天又见面了/最近经常见面呢/我们又见面了")%」
				CASEELSE
					PRINTFORML 「%K17_RS("啊啦/嗯")%、%K17_GT()%」
			ENDSELECT
			
		ELSE
			;特殊な場所の処理
			IF BATHCHECK(CFLAG:MASTER:現在位置)
				PRINTFORMDL %CALLNAME:TARGET%用胳膊遮住裸体
				RETURN 1
			ENDIF
			
			PRINTFORMD 是%CALLNAME:TARGET%
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕
					PRINTFORMD 轻轻地挥着手
					PRINTFORMD %K17_RS("眼睛一闪一闪的/笑着看过来/一脸陶醉")%
				CASE IS >= K17C_思慕
					PRINTFORMD 轻轻地举起手
					PRINTFORMD %K17_RS("有点脸红/有点害羞/视线一接触就移开了")%
			ENDSELECT
			PRINTFORMDL %CALLNAME:MASTER%与%K17_RS("靠近了/打了招呼/走近了")%
		ENDIF
	ENDIF
	;-------------------------------------------------
	;TARGETが風呂に入ってきて一緒に入る
	;@風呂追い出し条件見る
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「呀！？」
		PRINTFORMDL 进来的是赤身裸体的%CALLNAME:TARGET%
		PRINTFORML 「是%K17_CNAME()%啊，我以为是谁吓了一跳」
		PRINTFORMDL 放松身体往这边走
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お浴室イベント
			;れっつとらぶる
			TRYCALL K17_お浴室イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 就这样告诉她，她就红着脸泡在澡盆里。
		ELSE
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%瞟了一眼
		ENDIF
	ENDIF
	;-------------------------------------------------
	;TARGETが風呂に入ってきて出て行った
	;@風呂追い出し条件 !恋慕 キス前 態度2未満
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		;仲良くなる前反応
		PRINTFORML 「啊！？！？！？失，失礼了！」
		PRINTFORMDL 突然进来的是赤身裸体的%CALLNAME:TARGET%
				
		
		;ランダムイベ　裸鑑賞　長くなったので関数化
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お浴室イベント
			;れっつとらぶる
			TRYCALL K17_お浴室イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了那么多，就慌慌张张地走了出去
		ELSE
			PRINTFORMDL 出去的时候看见了%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%
			TCVAR:K17C_ID:K17C_TC_お浴室イベント = 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;TARGETが風呂に入ってきて追い出された
	;@風呂追い出し条件==0 && 弱み && HETEROSEX==1
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		;仲良くなる前反応
		PRINTFORML 「啊！？！？！？快、快出来！」
		PRINTFORMDL 里面是赤身裸体的%CALLNAME:TARGET%
		PRINTFORMDL 一副匆忙的样子,把桶抡了起来
		
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お浴室イベント
			;れっつとらぶる
			TRYCALL K17_お浴室イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了这些，就被赶出去了
		ELSE
			PRINTFORMDL 被赶出之时，%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%一闪而过
			TCVAR:K17C_ID:K17C_TC_お浴室イベント = 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;外出先で遭遇した
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)% %K17_RS("想着要见面，就遇见了/一直想见你")%%K17_HEART()%」
			CASE IS >= K17C_思慕诶嘿嘿
				PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME(MASTER,1)% %K17_RS("今天又见面了/最近经常见面呢/我们又见面了")%」
			CASE IS >= K17C_思慕
				PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今天又见面了/最近经常见面呢/我们又见面了")%」
			CASEELSE
				PRINTFORML 「%K17_RS("啊啦/嗯")%、%K17_GT()%」
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;他キャラとデート中に遭遇した
	;ARG:1にデート相手
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;相手が恋人な場合
		IF TALENT:MASTER:恋人 == FLAG:约会的对象
			PRINTFORML 「哎呀……%K17_RS("你/啊")%……」
			
			IF K17_RT_FG(TARGET) & K17C_RTF_逢引
				;デートする間柄のとき
				PRINTFORML 「对不起，%K17_RS("打搅你了/你好像很忙呢")%」
				;知り合いか見る
				IF K17_GET_FRIENDS(FLAG:约会的对象)
					PRINTFORML （今天和%K17_CNAME( FLAG:约会的对象 )%约会啊……）
				ELSE
					PRINTFORML （那姑娘是本命吧……）
				ENDIF
			ELSE
				PRINTFORML 「那个，对不起。」
			ENDIF
			
		;それ以外
		ELSE
			PRINTFORML 「哎呀……%K17_RS("呼/へ呵/呼呣")%……」
			IF K17_RT_FG(TARGET) & K17C_RTF_逢引
				;デートする間柄のとき
				PRINTFORML 「对不起，%K17_RS("打搅你了/你好像很忙呢")%」
				;知り合いか見る
				IF K17_GET_FRIENDS(FLAG:约会的对象)
					PRINTFORML （和%K17_CNAME( FLAG:约会的对象 )%约会啊……）
				ELSE
					PRINTFORML （那姑娘是本命吗……）
				ENDIF
			ELSE
				PRINTFORML 「啊，打扰你了。」
			ENDIF
		ENDIF
		
		IF K17_GET_FRIENDS(FLAG:约会的对象) && K17_RT_FG(TARGET) == 0
			;アリスにフラグが立ってない時　デート相手がアリスの知り合い
			SELECTCASE FLAG:约会的对象
				CASE K17C_魔理沙ID,K17C_霊夢ID,K17C_咲夜ID
					PRINTFORML 「和%K17_CNAME(FLAG:约会的对象)%搞好关系吧」
				CASE K17C_幽香ID,K17C_帕秋莉ID,K17C_梅蒂欣ID
					PRINTFORML 「虽然是个很难对付的女孩，但还是和%K17_CNAME(FLAG:约会的对象)%搞好关系吧。」
				CASE K17C_神綺ID,K17C_夢子ID,K17C_露易茲ID,K17C_魅魔ID
					PRINTFORML （%K17_CNAME(FLAG:约会的对象)%也会约会……）
					PRINTFORML （果然是结婚什么的吧……）
				CASEELSE
					PRINTFORML （那个姑娘看上去很幸福啊……）
			ENDSELECT
		ENDIF
	;他キャラとデート中に遭遇した終端
	ENDIF
	
PRINTW
ENDIF
RETURN 1

;==================================================
;朝起きたとき（おはよう口上）
;==================================================
@M_KOJO_EVENT_K17_2(ARG,ARG:1)
CALL MESSAGE_GOODMONING(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常起床（定時になって起きる等）
	;非神社在住キャラで恋慕未満の場合は、勝手に部屋に入り込んできてる状態
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
	PRINTL
		IF TALENT:TARGET:恋慕
				
			SELECTCASE K17_GRT(TARGET)
				CASE IS >= K17C_恋慕
					;現在位置でランダムイベント振る　もしくは生解禁（危険日も）で追加イベ
					IF (K17_CHECK_RANDOM_EVENT() || K17_GRT(TARGET) >= K17C_恋慕允许无套) && TCVAR:K17C_ID:K17C_TC_朝口交==0 && CFLAG:K17C_ID:K17C_CF_自慰フラグ == 0
						TRYCALL K17_朝口交イベント(TARGET)
					ENDIF
					IF RESULT == 0
						IF !TCVAR:K17C_ID:K17C_TC_朝口交 && !TCVAR:TARGET:今天有否见面
							;定時起床
							IF TALENT:MASTER:性別 >= 2
								PRINTFORM 「早上好……等一下、%K17_RS("睡得好厉害啊/衣服乱了/脸，糟糕透了/前面，精神满满哟")%……来这边」
							ELSE
								PRINTFORM 「早上好……%K17_RS("睡得好厉害啊/衣服乱了/脸，糟糕透了")%……到这边来」
							ENDIF
							TRYCALL K17_人形台詞(-1)
							PRINTFORMDL 在%CALLNAME:TARGET%的照顾下开始了一天
							SIF CFLAG:MASTER:初始位置 != CFLAG:TARGET:初始位置
								PRINTFORMDL 如果要住在一起，每天也会这样照顾我的吧。
							PRINTW
							PRINTFORML 「这样就好了……好了，结束了，出去吧%K17_HEART()%」
						ELSE
							;倒れて起きた時など定時ではない場合
							PRINTFORML 「哼……早上好」
						ENDIF
					ENDIF
				CASEELSE
					IF !TCVAR:K17C_ID:K17C_TC_朝口交 && !TCVAR:TARGET:今天有否见面
						PRINTFORML 「早上好，好早呀……」
						PRINTFORML 「%K17_CNAME()%的睡脸，意外的很可爱呢，呵呵」
					ELSE
						PRINTFORML 「哼……早上好」
					ENDIF
			ENDSELECT
		ELSE
			PRINTFORML 「啊……起来了……」
			PRINTFORMDL 这个人到底在干什么……
			PRINTFORML 「稍微研究人偶哦，呵呵」
		ENDIF
	ENDIF
	;-------------------------------------------------
	;添い寝起床
	;記入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 2
		;PRINTFORMW 
		;RETURN 1
	;ENDIF
	;その他
	PRINTL
	TCVAR:K17C_ID:K17C_TC_朝口交 = 1
ENDIF
RETURN 1

;==================================================
;夜寝るとき（おやすみ口上）
;==================================================
@M_KOJO_EVENT_K17_3(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	
	
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;自室に帰る（定時になって寝る）
	;自室がMASTERと同じでもでちゃうので条件追加
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1 && (CFLAG:TARGET:初始位置 != CFLAG:MASTER:初始位置)
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「虽然恋恋不舍，但%K17_RS("必须回去/下次有空吧/要回去了")%……」
				
			CASE IS >= K17C_思慕
				PRINTFORML 「那么，差不多该、%K17_RS("必须回去了/等下次有空吧/反回了")%了」
			CASEELSE
				PRINTFORML 「恩，再见」
		ENDSELECT
		
	ENDIF
	;-------------------------------------------------
	;眠そうにしている
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_思慕诶嘿嘿
				PRINTFORML 「……呼呀……呼……对不起……请……有点困啊」
				PRINTFORMDL %CALLNAME:TARGET%昏昏欲睡，顺着%CALLNAME:MASTER%的身体像是要倒下
			CASEELSE
				PRINTFORML 「……哼……失礼了，好像需要睡觉了」
				PRINTFORMDL 打哈欠的动作总觉得有点可爱
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;睡眠中（起きていないので会話というよりは寝言？）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3 || LOCAL:1 && ARG == 4
		SELECTCASE K17_GRT(TARGET)
			CASE IS >= K17C_恋慕允许无套
				PRINTFORML 「……%K17_CNAME()%……嘿嘿……%K17_RS("喜欢/再来一点/再爱多我一点")%……」
			CASE IS >= K17C_思慕
				PRINTFORML 「……%K17_CNAME()%……%K17_RS("喜欢/H/笨蛋")%……」
			CASEELSE
				PRINTFORML 「……%K17_RS("呼呐/咻/哈")%…………%K17_RS("魔理沙啊/上……海/妈妈")%？……」
		ENDSELECT
		PRINTFORMDL 与往常不同的%K17_RS("孩子样/可愛/坦率")%、%CALLNAME:TARGET%睡得比平时幸福得多
	ENDIF
	;-------------------------------------------------
	;イタズラ中
	;記入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 4
		;PRINTFORMW 
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;衰弱中
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML 「对不起，已经不行了……」
	ENDIF
	;-------------------------------------------------
	;MASTERがダウン（部屋まで運ばれる）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTFORML 「嘿！？你没事吗……？」
	ENDIF
	;-------------------------------------------------
	;TARGETが自室まで戻ってきた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;-------------------------------------------------
		;そのまま着替えて寝た
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 0
			IF !CFLAG:MASTER:睡眠
				PRINTFORML 「早点睡吧……」
				PRINTFORMDL 这么说着就赶紧去睡了
			ELSE
				;マスターが寝てる場合
				PRINTFORML 「……已经睡着了吗？」
				PRINTFORML 「呵呵，怎么这么可爱啊……」
			ENDIF
		ENDIF
		;-------------------------------------------------
		;部屋から追い出された
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML 「好了，好孩子该睡觉了」
			PRINTFORML 「出去，出去。」
		ENDIF
	ENDIF
	;-------------------------------------------------
	;非在住TARGETがMAIN_MAPで休憩
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML 「嗯，让我稍微休息一下吧。」
	ENDIF
	;その他
	PRINTW
ENDIF
RETURN 1

;==================================================
;移動時すれちがい
;==================================================
@M_KOJO_EVENT_K17_4(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;立ち止まった
	;この後遭遇口上に接続
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORMD 是%CALLNAME:TARGET%
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD 轻轻地挥着手
				PRINTFORMD %K17_RS("眼睛一闪一闪的/笑着看过来/一脸陶醉")%
			CASE IS >= K17C_思慕
				PRINTFORMD 轻轻地举起手
				PRINTFORMD %K17_RS("有点脸红/有点害羞/视线一接触就移开了")%
		ENDSELECT
		PRINTFORMDL 靠近%CALLNAME:MASTER%
	ENDIF
	;-------------------------------------------------
	;軽く会釈して通り過ぎた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORMD 是%CALLNAME:TARGET%
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD %K17_RS("轻轻地挥着手/眨了眨眼/笑着看过来")%
			CASE IS >= K17C_思慕
				PRINTFORMD %K17_RS("轻轻地举起手/偷偷地看着/点头致意")%
		ENDSELECT
		PRINTFORMDL 目送着%CALLNAME:MASTER%
	ENDIF
	;-------------------------------------------------
	;無視して通り過ぎた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORMD 是%CALLNAME:TARGET%
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD %K17_RS("送来热切的目光/送来凝视的视线/好像想说什么")%
			CASE IS >= K17C_思慕
				PRINTFORMD %K17_RS("递了个眼神/偷偷地看过来")%
		ENDSELECT
		PRINTFORMDL 目送着%CALLNAME:MASTER%
	ENDIF
ENDIF
RETURN 1

;==================================================
;他者介入でムード変化
;==================================================
@M_KOJO_EVENT_K17_5(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
;うふふ中はとりあえず飛ばして情事を見られたほうだけ表示
IF LOCAL && !CFLAG:诶嘿嘿
	
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;知り合いが入ってきた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && K17_GET_FRIENDS(ARG)
		
		PRINTFORML 「啊……%K17_GT()%、%K17_CNAME(ARG)%」
		
		;アリスが恋人な場合
		IF TALENT:MASTER:恋人 == TARGET
			PRINTFORML 「我没有做什么奇怪的事。%K17_CNAME(ARG)%、%K17_RS("不要嘲笑我/不要戏弄我")%」
		
		;相手がマスターの恋人　はわわ……
		;とりあえず相手馴れ合い強度０以下はないみたいだから呼ばれないはず　どっか別に作る
		;自分が入った時用のをつくればいいのか
		ELSEIF TALENT:MASTER:恋人 == ARG
			SELECTCASE ARG
				CASE K17C_神綺ID,K17C_夢子ID,K17C_露易茲ID,K17C_魅魔ID
					PRINTFORMDL %CALLNAME:TARGET%一站起来就端正了姿势
					PRINTFORML 「……和%NAME:MASTER%先生聊了一会儿」
					PRINTFORMDL 被当成外人对待了
				CASEELSE
					PRINTFORML 「不要误会，%K17_CNAME(ARG)%，只是普通的说话而已……」
					PRINTFORMDL %CALLNAME:TARGET%一看到%CALLNAME:ARG%就瞬间动摇了
			ENDSELECT
		ENDIF
	;-------------------------------------------------
	;知らない人が入ってきた
	;-------------------------------------------------
	ELSE
		PRINTFORMDL 一瞬间%CALLNAME:TARGET%瞥见了%CALLNAME:ARG%
	ENDIF
	;-------------------------------------------------
	;共通処理
	;-------------------------------------------------
	SELECTCASE K17_GRT()
		CASE IS >= K17C_恋慕
			PRINTFORML 「……去只有两个人的%K17_RS("谁也不会来的地方/安静的地方/能够慢慢做的地方")%吧……%K17_HEART()%」
			PRINTFORMDL 小声地贴在%CALLNAME:MASTER%耳朵旁，偎依在一起的%CALLNAME:TARGET%离开了。
		CASE IS >= K17C_思慕
			PRINTFORML 「……%K17_RS("真糟糕/很抱歉/很可惜")%，但是就到这里吧……」
			PRINTFORMDL 小声地贴在%CALLNAME:MASTER%耳朵旁，偎依在一起的%CALLNAME:TARGET%离开了。
		CASEELSE
			PRINTFORMDL %CALLNAME:TARGET%冷酷无情地离开了
	ENDSELECT
	PRINTW
ENDIF
RETURN 1

;==================================================
;情事を目撃した
;==================================================
@M_KOJO_EVENT_K17_6(ARG,ARG:1)
;口上主はTARGET
;ARGに情事相手
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	PRINTL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;情事を目撃した（馴れ合い度:低）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		PRINTFORML 「！？！？%K17_RS("等/欸/什")%……！」
		PRINTFORMDL %CALLNAME:TARGET%脸红发抖地站在那里
		PRINTW
		;知り合いか見る
		SIF K17_GET_FRIENDS(ARG)
			PRINTFORML （讨厌……%K17_CNAME(ARG)%啊……做那种事……）
			
		IF K17_GRT() >= K17C_思慕
			PRINTFORML （%K17_CNAME()%，你喜欢那种东西吧……）
			PRINTFORML （看到了，完全看到了，各种各样的……）
			PRINTFORML （糟糕……这个，妄想着可以进展得很顺利……）
			PRINTW
		ENDIF
		PRINTFORML 「哦，在这种地方，那个……」
		PRINTFORML 「总之要小心啊！」
		PRINTFORMDL 脸色通红的%CALLNAME:TARGET%生气了
		
		;思慕以上でMASTERに恋人がいないorアリスが恋人
		SIF K17_GRT() >= K17C_思慕 && (!(CFLAG:MASTER:既成事実 & 合意_恋人) || CFLAG:TARGET:既成事実 & 合意_恋人)
			CFLAG:TARGET:情事目撃 = ARG
		
		;弱みがつくはずなのでプライドと態度もあげちゃう
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,1)
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_態度,1)
	ENDIF
	;-------------------------------------------------
	;負けじと参加（馴れ合い度:高）
	;恋人同士相手には乱入できないみたい
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;-----------
		;開始時の主導権
		;溜まってる度の一時保存
		;情事相手のうふふ状態をみる
		;-----------
		IF CFLAG:MASTER:诶嘿嘿 == 1
			;MASTER主導権
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_お手伝い系
			TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = -1
			TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:TARGET:积攒度
			TCVAR:K17C_ID:K17C_TC_中出しカウント = 0
		ELSE
			;キャラ主導権
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
			TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = TARGET
			TCVAR:K17C_ID:K17C_TC_中出しカウント = 0
			IF TALENT:MASTER:性別 >= 2
				TCVAR:K17C_ID:K17C_TC_积攒度 = BASE:MASTER:精力
			ELSE
				TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:积攒度
			ENDIF
		ENDIF
		
		;知り合いか見る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;気安い系
			CASE K17C_霊夢ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
				PRINTFORML 「%K17_RS("嘿/啊～/欸~")%，%K17_CNAME(ARG)%，不可以独占哦？我也来混在一起吧」
				
			;尊敬系
			CASE K17C_魅魔ID,K17C_露易茲ID
				PRINTFORML 「%K17_RS("嘿~/不行/啊~")%，不可以独占哦，%K17_CNAME(ARG)%」
				PRINTFORML 「我也要混进来。」
				
			;神綺様　夢子限定
			CASE K17C_神綺ID,K17C_夢子ID
				
				;アリスが恋人な場合
				IF TALENT:TARGET:恋人
					IF FIRSTTIME(@"修羅場{ARG}")
						;初回
						PRINTFORML 「诶……那样的……%K17_CNAME(ARG)%！？
						PRINTFORMDL %CALLNAME:TARGET%少有的相当动摇的样子，一边颤抖着脚一边设法站着。
						PRINTW
						PRINTFORML 「真是的……对%K17_CNAME(ARG)%也出手了吧……从什么时候开始……」
						PRINTFORMDL %CALLNAME:ARG%辩解说『%CALLNAME:TARGET%\@ARG==K17C_神綺ID ? #\@、不是这样的！』……
						PRINTFORMDL 总觉得气氛完全变了……
						PRINTFORMDL ……
						PRINTFORMDL …………
						PRINTFORMDW …………
						;勝手に想像して　親子丼とか浮気とかそんな感じのあれそれ
						PRINTFORML 「算了……那么，这就是所谓的……是吧……」
						PRINTFORMDL %CALLNAME:MASTER%紧紧地抓了一下大腿
						PRINTFORML 「哎呀……两个人偷偷摸摸的……不，不行……我也要参加哦」
						;PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:ARG%に対抗意識があるようだった
						PRINTFORML 「总之禁止独占！」
						PRINTW
						
					ELSE
						;二回目以降
						PRINTFORML 「嗯……又……什么……」
						PRINTFORMDL %CALLNAME:TARGET%有点吃惊地叹了一口气，从%CALLNAME:MASTER%和%CALLNAME:ARG%之间穿了进去
						PRINTFORMDL %CALLNAME:ARG%又辩解说『\@ARG==K17C_神綺ID ? #\@、不是这样的……』……
						PRINTW
					ENDIF
				ELSE
					PRINTFORML 「真是的……竟然偏偏和%K17_CNAME(ARG)%在一起……」
				ENDIF
			;知らない人
			CASEELSE
				PRINTFORML 「……我也要混在一起哦？」
		ENDSELECT
		TRYCALL K17_乱交開始(ARG)
	ENDIF
	;-------------------------------------------------
	;気まずそうに立ち去る
	;記入チェック（=0, 非表示、1, 表示）
	;してる方が恋人だった場合、そそくさと立ち去る（恋人が混じっている多人数プレイかつTARGETが恋人でない場合も立ち去る
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		
		PRINTFORML 「对不起，打扰了……」
		;知り合いか見る
		SIF K17_GET_FRIENDS(ARG)
			PRINTFORML （讨厌……%K17_CNAME(ARG)%啊……做那种事……）
		;恋人か見る
		SIF TALENT:ARG:恋人
			PRINTFORML （毕竟是恋人关系，所以才那样做的吧……）
		
		;思慕以上でMASTERに恋人がいないorアリスが恋人
		SIF K17_GRT() >= K17C_思慕 && (!(CFLAG:MASTER:既成事実 & 合意_恋人) || CFLAG:TARGET:既成事実 & 合意_恋人)
			CFLAG:TARGET:情事目撃 = ARG
		
		
	ENDIF
	;-------------------------------------------------
	;MASTERに誘われて参加
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG:1 == 4
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;その他
	PRINTW
ENDIF
RETURN 1

;==================================================
;情事を見られた
;==================================================
@M_KOJO_EVENT_K17_7(ARG,ARG:1)
;口上主はTARGET
;ARGに目撃者
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;情事を見られた（目撃者の馴れ合い度:低）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		;知り合いか見る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;気安い系
			CASE K17C_霊夢ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
				PRINTFORML 「%K17_CNAME(ARG)%！？」
				PRINTFORML 「不……那个……那个，对不起……」
			;尊敬系
			CASE K17C_魅魔ID,K17C_露易茲ID,K17C_神綺ID,K17C_夢子ID
				PRINTFORML 「啊！？%K17_CNAME(ARG)%！？」
				PRINTFORML 「这个、那个、那个……」
				PRINTFORML 「对，对不起，我太轻率了……」
			;その他
			CASEELSE
				PRINTFORML 「啊！？……那个，对不起」
		ENDSELECT
		;--------------
		;うふふが終了された場合の処理
		;--------------
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		
		;フラグ保存
		SIF CFLAG:既成事実 & 合意_诶嘿嘿
			TRYCALL K17_RELATION_EV( K17C_RTF_诶嘿嘿 )
	ENDIF
	;-------------------------------------------------
	;目撃者が負けじと参加（目撃者の馴れ合い度:高）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;知り合いか見る
		SELECTCASE ARG
			;気安い系
			CASE K17C_霊夢ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
				PRINTFORML 「啊……%K17_CNAME(ARG)%？」
				;相手が恋人か見る　あわわわ……
				IF !TALENT:ARG:恋人
					PRINTFORML 「什么……等等，不让她插手吗……%K17_CNAME(ARG)%就在那边」
				ENDIF
				
			;尊敬系
			CASE K17C_魅魔ID,K17C_露易茲ID,K17C_神綺ID,K17C_夢子ID
				PRINTFORML 「啊！？%K17_CNAME(ARG)%！？！」
				PRINTFORML 「啊，%K17_CNAME(ARG)%也……一起！？是、是、请……」
				
			CASEELSE
				PRINTFORML 「啊！？我吓了一跳……」
		ENDSELECT
		TRYCALL K17_乱交開始(ARG)
	ENDIF
	;-------------------------------------------------
	;目撃者が立ち去る（恋人同士限定か
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		;知り合いか見る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;気安い系
			CASE K17C_霊夢ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
				PRINTFORML 「啊，%K17_CNAME(ARG)%……」
				PRINTFORML 「真是费心了……」
				PRINTFORML 「%K17_CNAME()%，下次要好好关门%K17_CNAME(ARG)%哟」
			;尊敬系
			CASE K17C_魅魔ID,K17C_露易茲ID,K17C_神綺ID,K17C_夢子ID
				PRINTFORML 「啊！？%K17_CNAME(ARG)%！？」
				PRINTFORML 「……果然让%K17_CNAME(ARG)%担心了可不好啊……」
			;その他
			CASEELSE
				PRINTFORML 「啊！？……被、被看到了吧……」
		ENDSELECT
		PRINTFORML （比起我，会看到%K17_CNAME()%的裸体……很讨厌呢）
	ENDIF
	;-------------------------------------------------
	;MASTERに誘われて目撃者も参加
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG:1 == 4
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;その他
	PRINTW
	
ENDIF
RETURN 1

;==================================================
;目撃した情事を問い詰める
;==================================================
@M_KOJO_EVENT_K17_8(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;MASTERだけ問い詰め
	;CFLAG:TARGET:情事目撃
	;思慕以上でMASTERに恋人がいないorアリスが恋人
	;参加してない時だけだから非情にレアケースじゃないですかね
	;これ誰得なんだ！？　削除予定地
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		;恋慕以上＆知り合いのとき
		IF (K17_GRT() >= K17C_恋慕 || CFLAG:TARGET:既成事実 & 合意_恋人) && K17_GET_FRIENDS(CFLAG:TARGET:情事目撃)
			PRINTFORML 「喂，%K17_RS("已经厌倦/已经开始讨厌/已经要抛弃")%我了吗？」
			PRINTFORMDL 用比平时略为深思的表情，突然这样挨了一巴掌
			PRINTFORMDL 那种事绝不会发生的
			PRINTW
			;嘘だ！
			PRINTFORML 「啊，对不起。我不打算责怪你啊」
			PRINTFORML 「只是那个，我还以为你不会再理我了……」
			PRINTFORMDL 就这样低着头把脸埋在了%CALLNAME:MASTER%的胸口
			PRINTFORML 「对不起，我是个麻烦的女人……」
			PRINTFORMDL %CALLNAME:MASTER%只能抚摸着%CALLNAME:TARGET%的头……
			PRINTW
			PRINTFORML 「那个，%K17_CNAME(CFLAG:TARGET:情事目撃)%会代替我吗？也会向其他的女孩子出手吗……」
			PRINTFORML 「但是我也在这里，你要好好记住啊。」
			PRINTFORMDL 最后感觉有点勉强地笑着说
			PRINTFORMDL %CALLNAME:MASTER%想再稍微珍惜一下%CALLNAME:TARGET%
		ELSE
			;うふふ前　研究材料に使いました
			PRINTFORML 「那个……喂，上次……」
			PRINTFORML 「我也有点太愤怒了，对不起。」
			PRINTFORMDL 虽然不太明白，但反而被脸红着道歉了。
			PRINTW
			PRINTFORMDL （对不起……我有点对%K17_CNAME()%胡思乱想了……）
		ENDIF
	ENDIF
	;-------------------------------------------------
	;二人とも説教
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		PRINTFORML 「%K17_CNAME()%请等一下、啊，%K17_CNAME(CFLAG:TARGET:情事目撃)%也不错吧」
		PRINTFORML 「啊，我并不是在生气。」
		PRINTFORML 「只是……那个，场合问题，哦。今后也要注意哦」
		PRINTFORML 「真的就这些，就这样。」
		PRINTFORMDL %CALLNAME:TARGET%红着脸单方面地这么说
		PRINTFORMDL %CALLNAME:MASTER%想再考虑一下场合问题
	ENDIF
	;その他
	PRINTW
ENDIF
RETURN 1

;==================================================
;パンツ没収された
;==================================================
@M_KOJO_EVENT_K17_9(ARG,ARG:1)
;口上主はTARGET
;ARG:1 == 1		同じ場所に居てパンツを回収された
;ARG:1 == 2		遠距離移動中にパンツを回収された
;--------------------------------------------------
#DIM DYNAMIC iDoll		;人形フラグ
#DIM DYNAMIC iPants_Num	;輸送中のアリスのパンツ枚数
VARSET iDoll
iPants_Num = 0
CFLAG:K17C_ID:K17C_CF_胖次没収 = MIN(CFLAG:K17C_ID:K17C_CF_胖次没収,9999)
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL

	;--------------------------------------------------
	;初回限定
	;--------------------------------------------------
	iPants_Num = K17_CHECK_輸送胖次(TARGET)
	IF FIRSTTIME("胖次没収")
		PRINTL
		PRINTFORML 「那么，你在藏什么呢……」
		PRINTW
		;手持ちに自分のパンツがあるか見る　仕様変更に対応
		IF iPants_Num
			PRINTFORML 「讨厌……这是我的……内衣？」
			PRINTFORML 「怎么会这么做！……为什么！？」
			PRINTFORML 「诶……这或许是……」
			PRINTFORMDL %CALLNAME:TARGET%对%CALLNAME:MASTER%抱有怀疑的目光
			CFLAG:K17C_ID:K17C_CF_胖次没収++
		ELSE
			PRINTFORML 「哎呀……这个……女孩子的内衣！？」
			PRINTFORML 「诶？诶！？为什么有这样的东西？」
		ENDIF

		PRINTFORMDL 还以为会被骂，没想到是冷静的反应。
		PRINTFORMDL 是对这种事不了解吗?
		PRINTW
		PRINTFORML 「……为什么要目标是内衣呢？」
		PRINTFORMDL 那是因为……呐？
		PRINTFORMDL %CALLNAME:MASTER%对于为什么想要内衣，开始向%CALLNAME:TARGET%解释了
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW …………
		PRINTFORML 「嘿，嘿……非常好的爱好？你在说什么」
		
		;アリスパンツあり　海外の人は下着ドロあんま理解できないらしいです
		IF iPants_Num
			PRINTFORML 「从性骚扰这个意义上来说，无法理解，对不起。」
			PRINTFORML 「不，不是什么好事。……还稍微有点混乱的样子」
		ENDIF
		PRINTFORML 「……或者说难以理解，是文化差异吧」
		PRINTFORML 「反正偷别人的东西，可不是个好人。」
		PRINTFORML 「总之，这样的恶作剧，不要再做了。」
		
	;--------------------------------------------------
	;二回目以降
	;--------------------------------------------------
	ELSE
		PRINTL
		PRINTFORML 「嘛……你藏了什么……拿出来」
		PRINTW
		;手持ちに自分のパンツがあって時間停止バレしてるとき
		IF iPants_Num && CFLAG:時間停止バレ == 1
		
			;アリスパンツ2回目以降
			PRINTFORML 「又是这个……这是我的内衣吧？
			
			;思慕前だとビンタ
			IF K17_GRT(TARGET) < K17C_思慕
				PRINTFORML 「你不是说过不要再干了吗！」
				PRINTFORMDL 啪的一声挨了一巴掌
				RETURN 1
			ELSE
				PRINTFORML 「真是的，%K17_RS("对其他女孩也一样/总是/任何人都可以/什么时候都")%这么做恶作剧吗？」
				PRINTFORMDW 罗嗦罗嗦……
				PRINTFORMDW …………罗嗦罗嗦
				PRINTFORMDW ……罗嗦罗嗦……罗嗦罗嗦
				PRINTFORMDW %CALLNAME:MASTER%考虑了一下应该如何对待女孩子……！
			ENDIF
			
		;アリスのパンツだけあったとき
		ELSEIF iPants_Num
			PRINTFORML 「这个……是我的……」
			PRINTFORML 「诶……这或许是……」
			PRINTFORMDL %CALLNAME:TARGET%对%CALLNAME:MASTER%抱有怀疑的目光
			CFLAG:K17C_ID:K17C_CF_胖次没収++
		;その他のパンツ
		ELSE
			PRINTFORML 「果然还是女孩子的内衣啊」
		ENDIF
	ENDIF
	
	;--------------------------------------------------
	;時間停止バレ もうちょい条件緩くするか考え中 とりあえず20％でいいか 咲夜さん即バレ仕方ないね
	;現行犯なので疑いなくてもバレる
	;--------------------------------------------------
	IF K17_CHECK_時間停止バレ(TARGET,20)
		PRINTFORML 「还有……这是我的内衣……」
		PRINTFORML 「果然没错。难道你觉得不会暴露吗？」
		PRINTFORML 「那么，这个是怎么偷到的呢……？」
		PRINTFORMDL 好像陷入困境了
		PRINTL
		PRINTFORMDW 时间停止能力暴露给%CALLNAME:TARGET%了！
		PRINTW
		CALL K17_時間停止バレ
	ENDIF
	
	PRINTW
	PRINTFORML 「先把这个没收了。」
	PRINTFORML 「看来从现在开始要改变对%K17_CNAME()%的看法了」
	;パンツ没収でアリスのプライドと態度が復活するのだ
	CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,1)
	CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_態度,1)
	;疑いあれば追加なし　バレてるなら恋慕未満でなし
	IF CFLAG:K17C_ID:K17C_CF_疑い || (CFLAG:時間停止バレ && K17_GRT(TARGET) < K17C_恋慕)
		SIF RESULT == 0
			PRINTW
		RETURN 1
	ENDIF
	;--------------------------------------------------
	;思慕以上あれば追加イベ
	;--------------------------------------------------
	IF K17_GRT(TARGET) >= K17C_思慕
		PRINTFORML 「真是的……想要这样的东西的话，多少都可以给你」
		PRINTFORMDL 什么……那么……！？
		PRINTW
		PRINTFORML 「平时就做人偶的衣服，所以很擅长缝纫。」
		SELECTCASE RAND:3
			CASE 0
				PRINTFORMDL 自制！那可真了不起
				PRINTFORMDL 当然想要%CALLNAME:TARGET%穿过的东西
				PRINTFORML 「啊啊啊啊啊！？当然是新品吧！」
				PRINTFORMDL 那就没意义了！
			CASE 1
				PRINTFORML 「我现在正带着呢。……好的，给」
				PRINTFORMD 交过来的胖次，越看越……
				PRINTDATADL
					DATAFORM 精巧にできていた
					DATAFORM 本物のようだった
					DATAFORM 可愛的出来だった
					DATAFORM 職人魂の込められたものだった
				ENDDATA
				PRINTFORMDL ……这不是玩偶用的吗！
				iDoll = K17_GET_DOLL(0)
				IF iDoll && RAND:2
					iDoll = K17_GET_DOLL(-1)
					PRINTFORM 「啊，那是%K17C_人形名:iDoll%的啊」
					TRYCALL K17_人形台詞(K17C_人形:iDoll,1,"ハズカシー")
				ELSE
					PRINTFORM 「哎呀，那是……
					PRINTDATA
						DATAFORM 倫敦人形
						DATAFORM 仏蘭西人形
						DATAFORM 京人形
						DATAFORM 和蘭人形
						DATAFORM 露西亜人形
						DATAFORM オルレアン人形
					ENDDATA
					PRINTFORML 的!」
				ENDIF
				PRINTFORMDL 不知道该作出什么反应！
			CASE 2
				PRINTFORML 「我现在正带着呢。好的，给」
				PRINTFORMD 交过来的是
				PRINTDATAD
					DATAFORM 上海人形
					DATAFORM 蓬莱人形
					DATAFORM 倫敦人形
					DATAFORM 仏蘭西人形
					DATAFORM 京人形
					DATAFORM 和蘭人形
					DATAFORM 露西亜人形
					DATAFORM オルレアン人形
					DATAFORM 歌莉亜人形
				ENDDATA
				PRINTFORMDL 手帕上绣了花。
				PRINTFORMDL ……虽然很高兴
				PRINTFORML 「哎呀，只要是女性持有的就行吧？都还很新呢」
				PRINTFORMDL 不是那样的
		ENDSELECT
		PRINTW
	ENDIF
ENDIF
RETURN 1

;==================================================
;押し倒した
;==================================================
@M_KOJO_EVENT_K17_10(ARG,ARG:1)
#DIM DYNAMIC iRT = 0
#DIM DYNAMIC iFriends = 0

;----------
;アリス以外のTARGETを取得　友人優先
;----------
iFriends = K17_GET_TARGETS_ID()
iRT = K17_GRT_EX(TARGET)
;--------------------------------------------------
;口上主はTARGET
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	
	;-------------------------------------------------
	;MASTERを押し倒した（開始時）
	;二人きり
	;押し倒された瞬間には既成事実入ってない　すぐ抜け出すと合意を得ない
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;-------------------------
		;開始時の保存
		;喘ぎタイプ決定
		;開始時の主導権
		;溜まってる度の一時保存
		;-------------------------
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = TARGET
		TCVAR:K17C_ID:K17C_TC_中出しカウント = 0
		IF TALENT:MASTER:性別 >= 2
			TCVAR:K17C_ID:K17C_TC_积攒度 = BASE:MASTER:精力
		ELSE
			TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:积攒度
		ENDIF
		
		;-----------
		;抱きつきモード
		;-----------
		IF ARG:1 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_おねだり系
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_おねだり系)
			PRINTFORML 「呵呵……总觉得有想要撒娇的心情……%K17_RS("喵呜/呜喵")%~」
			PRINTFORMDL %CALLNAME:TARGET%撒娇般地靠近%CALLNAME:MASTER%
			PRINTW
			RETURN 1
		ENDIF
		;-----------
		;弱み握りのお仕置き
		;-----------
		IF CFLAG:掌握把柄 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_强行系
			PRINTFORMDL %CALLNAME:MASTER%被%CALLNAME:TARGET%用超出外表想象的强大力量压制着
			PRINTFORML 「呵呵……那么，来惩罚我吧……做好觉悟了吗……？」
			PRINTFORMDL 那样在耳边妖艳地低声私语的%CALLNAME:TARGET%，眼神也与平素不同，%CALLNAME:MASTER%感觉稍微恐怖……
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_强行系)
			PRINTW
			RETURN 1
		ENDIF
		
		;-----------
		;通常カウンターうふふ初回
		;-----------
		IF CFLAG:既成事実 & 合意_诶嘿嘿 && FIRSTTIME("被逆推",1)
			PRINTFORML 「喂，喂……今天……那个……嗯……」
			PRINTFORMDL %CALLNAME:TARGET%扭扭捏捏地摩擦着大腿，总算是紧紧地抱住%CALLNAME:MASTER%
			PRINTFORML （什么……什么嘛，平时随你的便……明明……唔……）
			PRINTW
			PRINTFORML 「那，你如果是哪个意思的话，我也有我的想法……」
			PRINTFORML 「怎么说也是魔女啊……」
			PRINTFORMDL %CALLNAME:TARGET%说着话挥挥手，%CALLNAME:MASTER%就被魔法的线束缚了
			PRINTFORMDL 看上去像是被紧紧地束缚着，但%CALLNAME:MASTER%却没有那么疼痛，倒不如说是被温暖地包围着
			PRINTFORML 「呵呵……怎么样？……啊，不疼吧？没事吧？
			PRINTW
			PRINTFORML 「你笑什么呀，已经……」
			PRINTFORMDL 被这么可爱的魔女袭击也不坏……
			PRINTFORML 「一不小心就会被吃掉的……哦、哦」
			PRINTFORMDL 脸红了的%CALLNAME:TARGET%把%CALLNAME:MASTER%像是能温柔地睡着一样地逆推了
			CALLF FIRSTTIME("被逆推")
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_お手伝い系)
		;-----------
		;合意無しでカウンターうふふ初回にきた場合　もったいないので溜まってる度半分超えててもこれで
		;-----------
		ELSEIF !(CFLAG:既成事実 & 合意_诶嘿嘿) || CFLAG:积攒度 >= 500 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_合意襲い系
			PRINTFORML 「哼……哼……」
			PRINTFORML 「即使……就算这样，我也打算忍耐一下啊……%K17_CNAME()%？ %K17_CNAME()%你明白吗？」
			PRINTFORMDL %CALLNAME:MASTER%不知为何，被可怕的力量压住
			PRINTFORMDL 就算想要活动身体，平时操纵木偶的光之线也会缠绕在%CALLNAME:MASTER%的身体上使其动弹不得
			PRINTW
			PRINTFORML 「对不起，不要害怕……但是，我已经无法抑制了，这份心情……」
			PRINTFORML 「%K17_CNAME()%……哦，要开始了……」
			PRINTFORMDL 脸染得通红，额头上微微渗出汗水的%CALLNAME:TARGET%把%CALLNAME:MASTER%压住了。
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_合意襲い系)
		;-----------
		;二回目以降　通常処理
		;-----------
		ELSE
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_お手伝い系)
			iRT = K17_LOWER_LIMIT_RAND(iRT,K17C_思慕,K17C_恋慕)
			SELECTCASE iRT
				CASE IS >= K17C_恋慕
					;台詞
					PRINTDATAL
						DATAFORM 「あのね、えっと……その……%K17_RS("抱いて/えっちしよ/せっくすしよ")%？%K17_RS("　ねっ？/")%%K17_HEART()%」
						DATAFORM 「%K17_CNAME()%がこんな%K17_RS("欲しがり/淫らな/えっちな")%身体にしたのよ……責任取りなさいよね……」
						DATAFORM 「%K17_RS("し、しちゃう/お、襲っちゃう/お、犯しちゃう")%……から……」
					ENDDATA
					;情景
					PRINTDATAD
						DATAFORM %CALLNAME:MASTER%は自己的身体を擦り付けるようにして縋り付く%CALLNAME:TARGET%に、
						DATAFORM %CALLNAME:MASTER%の手を取り、悄悄的自己的%K17_RS("胸/頬/太もも")%に寄せる%CALLNAME:TARGET%に
						DATAFORM %CALLNAME:MASTER%の膝の上で身体を揺すって、%K17_RS("股間/胸")%を擦り付ける%CALLNAME:TARGET%にそのまま
					ENDDATA
					PRINTFORMDL %K17_RS("温柔的/慢慢地")%%K17_RS("被推倒了/被抱过去了/被逆推了")%
				CASE IS >= K17C_思慕
					;台詞
					PRINTDATAL
						DATAFORM 「……しよ？　ねっ？%K17_RS("　ねっ？/")%%K17_HEART()%」
						DATAFORM 「……し、しないの？　じゃあ%K17_RS("こっち/私")%から……」
						DATAFORM 「す、するから……%K17_RS("しちゃう/その気にさせちゃう")%からね……」
					ENDDATA
					;情景
					PRINTDATAD
						DATAFORM %CALLNAME:MASTER%の身体に寄り添う%CALLNAME:TARGET%に、
						DATAFORM %CALLNAME:MASTER%の手を取り、%K17_RS("温柔的/ぎゅっと/指を絡めて")%握る%CALLNAME:TARGET%に
						DATAFORM %CALLNAME:MASTER%の%K17_RS("腿をすりすりする/胸に頭を擦り付ける/捅臉頰")%%CALLNAME:TARGET%に、
					ENDDATA
					PRINTFORMDL %K17_RS("温柔地/柔和地")%%K17_RS("被推倒了/被抱过去了/被逆推了")%
				CASEELSE
					PRINTFORML 「喂……可以吧？总觉得……我可能已经迷上你了……所以」
					PRINTFORMDL %CALLNAME:MASTER%被%CALLNAME:TARGET%%K17_RS("温柔的/慢慢地")%逆推了
			ENDSELECT
			PRINTFORML 「%K17_CNAME()%%K17_RS("不可以/真坏/将我的身体变成这样")%啊，%K17_RS("邪恶的/讨厌的/淫荡的")%%K17_RS("魔法使/魔女")%要袭击了……%K17_RS("嗷~呜~/呼呼~/呼呼呼～")%」
			
		ENDIF
		
		;----------------------------
		;乱交
		;----------------------------
		IF iFriends
			PRINTW
			SELECTCASE iFriends
				CASE K17C_霊夢ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
					;アリスが恋人な場合
					IF TALENT:TARGET:恋人
						PRINTFORML 「%K17_CNAME()%，请好好地爱着%K17_CNAME(iFriends)%吧」
					ENDIF
				CASE K17C_魅魔ID,K17C_露易茲ID,K17C_神綺ID,K17C_夢子ID
					IF TALENT:TARGET:恋人
						PRINTFORML 「虽然这次要一起做……但不可以跟%K17_CNAME(iFriends)%相比哦？」
					ENDIF
				CASEELSE
					;アリスが恋人な場合
					IF TALENT:TARGET:恋人
						PRINTFORML 「%K17_CNAME()%，好好爱那个女孩吧」
					ENDIF
			ENDSELECT
			TRYCALL K17_乱交開始(iFriends)
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_おねだり系)
		ENDIF
		PRINTW
		RETURN 1
	ENDIF
	
	
	;-------------------------------------------------
	;抱きつきモード満足
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && ARG:1 == 1
		PRINTFORML 「嗯~我满足了……呼呼」
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;抱きつきモード強制終了
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && ARG:1 == 2
		PRINTFORML 「什，什么啊，不用那么讨厌嘛……」
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;なだめられた（うふふ終了時）
	;押し倒されたけどすぐに抜け出した
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && !ARG:1 && !(CFLAG:既成事実 & 合意_诶嘿嘿)
		PRINTFORML 「啊……哈……对不起，我被迷住了……」
		PRINTFORMDL 被%CALLNAME:MASTER%拒绝的%CALLNAME:TARGET%，流着泪水移开了视线
		PRINTFORMDL 好像受到了相当大的打击
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	
	;-------------------------------------------------
	;なだめられた（通常終了時）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		;弱みまだ残ってるか見る
		IF CFLAG:掌握把柄
			PRINTFORML 「总之这次就先原谅你了……」
			PRINTW
			RETURN 1
		ENDIF
		
		;感想戦
		TRYCALL K17_诶嘿嘿感想戦( TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 , TCVAR:K17C_ID:K17C_TC_积攒度 )
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		PRINTW
		RETURN 1
	ENDIF
	
ENDIF
RETURN 1


;==================================================
;浴場で遭遇
;==================================================
@M_KOJO_EVENT_K17_11(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;追い出された
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;仲良くなる前反応
		PRINTFORML 「啊！？！？！？快、快出来！」
		PRINTFORMDL 里面是赤身裸体的%CALLNAME:TARGET%
		PRINTFORMDL 一副匆忙的样子,把桶抡了起来
				
		IF !TCVAR:K17C_ID:K17C_TC_お浴室イベント && !CFLAG:MASTER:同行 && K17_CHECK_RANDOM_EVENT(TARGET)
			;れっつとらぶる
			TRYCALL K17_お浴室イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了这些，就被赶出去了
		ELSE
			PRINTFORMDL 出去的时候看见了%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%
			;追い出しは連打禁止
			TCVAR:K17C_ID:K17C_TC_お浴室イベント = 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;目が合った（追い出されない）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「呀！？」
		PRINTFORMDL 里面是赤身裸体的%CALLNAME:TARGET%
		PRINTFORML 「是%K17_CNAME()%啊，我以为是谁吓了一跳」
		PRINTFORMDL 放松身体往这边走
		IF !TCVAR:K17C_ID:K17C_TC_お浴室イベント && !CFLAG:MASTER:同行 && K17_CHECK_RANDOM_EVENT(TARGET)
			;れっつとらぶる
			TRYCALL K17_お浴室イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 就这样告诉她，她就红着脸泡在澡盆里。
		ELSE
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%瞟了一眼
		ENDIF
	ENDIF

PRINTW
ENDIF
RETURN 1

;==================================================
;寝床に忍び込み
;==================================================
@M_KOJO_EVENT_K17_12(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL && !FLAG:時間停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;追い出される（怒り）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「等等、%K17_CNAME()%，我现在很生气……」
		PRINTFORML 「为了互相都让头脑冷静，今天也请回去吧。」
	ENDIF
	;-------------------------------------------------
	;寝床に侵入　寝てる
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		TRYCALL K17_上海イベント
		
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕允许无套
				PRINTFORML 「……%K17_CNAME()%……嘿嘿……%K17_RS("喜欢/再来一点/再爱多我一点")%……」
			CASE IS >= K17C_思慕
				PRINTFORML 「……%K17_CNAME()%……%K17_RS("喜欢/H/笨蛋")%……」
			CASEELSE
				PRINTFORML 「……%K17_RS("呼呐/咻/哈")%…………%K17_RS("魔理沙啊/上……海/妈妈")%？……」
		ENDSELECT
		PRINTFORMDL 与往常不同的%K17_RS("孩子样/可愛/坦率")%、%CALLNAME:TARGET%睡得比平时幸福得多
	ENDIF
	;-------------------------------------------------
	;寝床に侵入（相手が恋慕）起きる
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;TRYCALL K17_上海イベント
		PRINTFORML 「啊……我吓了一跳，还以为是小偷呢」
		PRINTFORML 「太好了，是%K17_CNAME()%……」
	ENDIF
	;-------------------------------------------------
	;寝床に侵入（相手が恋慕・衰弱）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		TRYCALL K17_上海イベント
		PRINTFORMDL 累得要命，%CALLNAME:TARGET%也起不来了
	ENDIF
	;-------------------------------------------------
	;追い出される
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 4
		TRYCALL K17_上海イベント
		PRINTFORMDL 睡眼惺忪，打着哈欠的%CALLNAME:TARGET%进来了。
		PRINTFORML 「什么……很吵闹？」
		PRINTFORML 「不好意思，现在请回去吧。」
	ENDIF
	;-------------------------------------------------
	;追い出される（衰弱）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 5
		TRYCALL K17_上海イベント
		PRINTFORMDL 睡眼惺忪，打着哈欠的%CALLNAME:TARGET%进来了。
		PRINTFORML 「什么……很吵闹？」
		PRINTFORML 「不好意思，现在请回去吧。」
	ENDIF
PRINTW
ENDIF
RETURN 1

;==================================================
;お仕事中
;==================================================
@M_KOJO_EVENT_K17_13(ARG,ARG:1)
;口上主はTARGET
;ARG:1に残っている仕事量
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;仕事開始（職場へ移動する）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		IF CFLAG:職種 == K17C_職種_人偶劇
			;人形劇
			SELECTCASE K17_GRT_EX()
				CASE IS >= K17C_思慕
					PRINTFORML 「因为有工作，我走了，%K17_CNAME()%」
				CASEELSE
					PRINTFORML 「恩，差不多是工作时间了，要走了。」
			ENDSELECT
			TRYCALL K17_人形台詞(K17C_上海,0,"ガンバルゾー")
			TRYCALL K17_人形台詞(K17C_蓬莱,1,"オー")
		ELSE
			;家事
			SELECTCASE K17_GRT_EX()
				CASE IS >= K17C_思慕
					PRINTFORML 「那么，我得稍微做下我的事……回头见、%K17_CNAME()%」
				CASEELSE
					PRINTFORML 「恩，差不多该做家务了……走吧」
			ENDSELECT
			TRYCALL K17_人形台詞(K17C_上海,0,"カジ　スルゾー")
			TRYCALL K17_人形台詞(K17C_蓬莱,1,"オー")
		ENDIF
	ENDIF
	;-------------------------------------------------
	;業務中
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		IF CFLAG:職種 == K17C_職種_人偶劇 && TIME <= 720
			;人形劇　公演中
			;
			PRINTFORMDL 可以听到儿童们的欢呼声
			SIF !(TCVAR:K17C_TC_人偶劇 & 8)
				PRINTFORML 「那么，接下来%K17_RS("会变成什么样呢～/会发生什么呢～")%？」
		ELSE
			;家事＆片付け
			PRINTFORML 「%K17_RS("呼~/呼呼~/嗯～")%……♪」
			PRINTFORMDL 听到了%CALLNAME:TARGET%哼着的歌
		ENDIF
		
	ENDIF
	;-------------------------------------------------
	;仕事終了
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		IF CFLAG:職種 == K17C_職種_人偶劇
			;人形劇片付け終了
			PRINTFORML 「好，那么请期待下次吧~」
			PRINTFORML 「大家都是好孩子啊。」
			PRINTFORMDL %CALLNAME:TARGET%向还没散去的儿童们挥手致意
		ELSE
			;家事＆片付け
			PRINTFORML 「%K17_RS("呼~/呼呼~/嗯～")%……♪」
			PRINTFORMDL 听到了%CALLNAME:TARGET%哼着的歌
		ENDIF
		
	ENDIF
	
	PRINTW
ENDIF
RETURN 1

;==================================================
;食事系
;==================================================
@M_KOJO_EVENT_K17_14(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;持っていた食物を食べられた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == -1
		IF TCVAR:MASTER:料理味道 & 8
			;辛い
			PRINTFORML 「啊，我感觉辣得%K17_RS("要喷出火来/舌头要消失/喉咙被烧着")%了。」
		ELSEIF TCVAR:MASTER:料理味道 & 16
			;甘い
			PRINTFORML 「嗯，稍微……对我来说太甜了……」
		ELSEIF TCVAR:MASTER:料理味道 & 32
			;わさび
			PRINTFORML 「什么……眼泪流出来了」
		ELSEIF TCVAR:MASTER:料理味道 & 64
			;レモン
			PRINTFORML 「嗯~~，好酸」
		ELSE
			;普通
			PRINTFORML 「呵呵，很好吃啊」
		ENDIF
		
		;感想
		IF TCVAR:MASTER:料理味道 >= 8
			;味付けあり　アリスは味覚普通
			PRINTFORMDL 明明很随便就吃光了……过分
		ELSE
			PRINTFORMDL 很随便就吃光了……
			PRINTFORML 「对不起，看起来很好吃，不知不觉就……」
			IF K17_GRT() >= K17C_思慕
				PRINTW
				PRINTFORML 「……你看，感谢招待！」
				TRYCALL K17_甘やかし
			ENDIF
		ENDIF
	ENDIF
	PRINTW
ENDIF
RETURN 1

;==================================================
;MASTERが押し倒した
;==================================================
@M_KOJO_EVENT_K17_15(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL && !FLAG:時間停止 && !CFLAG:睡眠
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;未実装（押し倒しコマンドに統合？
	;MASTERが押し倒した（ウフフ開始時）
	;記入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 1
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;逢瀬終了（ウフフ終了時）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2

		;感想戦
		TRYCALL K17_诶嘿嘿感想戦( TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 , TCVAR:K17C_ID:K17C_TC_积攒度 )
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主導権 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_おねだり系
	ENDIF
ENDIF
PRINTW
RETURN 1

;==================================================
;添い寝する
;==================================================
@M_KOJO_EVENT_K17_16(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;添い寝を始めた（開始時）(存在せず
	;記入チェック
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 1
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;添い寝を終了した（終了時）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL M_KOJO_MESSAGE_COM_K17_睡眠
		SIF !RESULT
			PRINTFORML 「嗯……已经结束了吗？
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;添い寝or恋慕同居　マスターが朝起きた　相手寝てるor起きてる
	;このままKOJO_MESSAGE_SEND("EVENT",2,TARGET,1,0)へ行く
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	;その他
	IF LOCAL:1 && ARG == 3
		IF CFLAG:TARGET:睡眠
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕允许无套
					PRINTFORML 「……%K17_CNAME()%……嘿嘿……%K17_RS("喜欢/再来一点/再爱多我一点")%……」
				CASE IS >= K17C_思慕
					PRINTFORML 「……%K17_CNAME()%……%K17_RS("喜欢/H/笨蛋")%……」
				CASEELSE
					PRINTFORML 「……%K17_RS("呼呐/咻/哈")%…………%K17_RS("魔理沙啊/上……海/妈妈")%？……」
			ENDSELECT
			PRINTFORMDL 与往常不同的%K17_RS("孩子样/可愛/坦率")%、%CALLNAME:TARGET%睡得比平时幸福得多
			;寝てたら朝フェラoff
			TCVAR:K17C_ID:K17C_TC_朝口交 = 1
		ENDIF
	ENDIF
ENDIF
RETURN 1
;==================================================
;時止め終了時
;見づらい、複雑なんとかしろ
;==================================================
@M_KOJO_EVENT_K17_17(ARG,ARG:1)
#DIM iRT
;口上主はTARGET
;排他と明記されていないモノは状況によっては連続で表示されるので注意
;ARGに射精状況
;ARG:1に射精状態
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
;各種初期化
;-------------
iRT = K17_GRT(TARGET)

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;ARG=1～3は排他
	;謎の快感or絶頂　イタズラされた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 1 || ARG == 2)
		IF ARG == 1
			PRINTFORML %K17_RS("呐/呼/嗯/呀/")%……！？
		ELSEIF ARG == 2
			PRINTFORML 「啊～～～～！！！%K17_BLUSH(2)%」
		ENDIF
		PRINTFORMDL %CALLNAME:TARGET%一下子捂住嘴挡住了声音
		IF K17_AP_FINISH() != ""
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_お手伝い系
			PRINTFORML （%K17_AP_FINISH()%）
		ENDIF
		;-------------------------------------------------
		;時間停止バレ
		;-------------------------------------------------
		IF CFLAG:時間停止バレ
			SELECTCASE iRT
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「……普通一点就行了……笨蛋」
				CASE IS >= K17C_思慕
					PRINTFORML 「为……为什么要这样做……」
				CASEELSE
					PRINTFORML 「这样……最差劲了……」
			ENDSELECT
		;-------------------------------------------------
		;疑いなし
		;-------------------------------------------------
		ELSEIF !CFLAG:K17C_ID:K17C_CF_疑い
			;自分のパンツ没収未経験
			SIF !FIRSTTIME("時間停止解除")
				PRINTFORML （……一见到%K17_CNAME()%就觉得会变成这样……）
			PRINTFORML （这个是……难道我的身体……在追求%K17_CNAME()%……吗？）
		ENDIF
		;時間停止経験保存
		CALLF FIRSTTIME("時間停止解除")
	ENDIF
	
	;-------------------------------------------------
	;パンツ紛失のみ
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「%K17_RS("嗯/欸/唔")%……！？」
		IF CFLAG:時間停止バレ
			;停止バレ
			IF iRT >= K17C_恋慕
				PRINTFORML 「诶……如果那么想要就给你吧」
			ELSE
				PRINTFORML 「又……居然会做这种事……」
				
			ENDIF
		ELSEIF CFLAG:K17C_CF_胖次没収
			;没収経験あり　認識的にはパンツを盗む能力
			IF iRT >= K17C_恋慕
				PRINTFORML 「诶……如果那么想要就给你吧」
			ELSE
				PRINTFORML 「……又是恶作剧呢……」
			ENDIF
			CFLAG:K17C_ID:K17C_CF_疑い++
		ELSE
			;まだ没収はされてない
			;初回
			IF FIRSTTIME("時間停止胖次紛失")
				PRINTFORML （%K17_RS("胖次/内衣/三角胖次")%……丢了！？今天有好好穿过吧……？）
			ELSE
				PRINTFORML （%K17_RS("胖次/内衣/三角胖次")%又……丢了！？%K17_RS("今天有好好穿过啊/掉在哪里了")%……？）
			ENDIF
			IF !CFLAG:K17C_CF_疑い
				;疑いなし
				PRINTFORML （讨厌……没有被%K17_CNAME()%发现……吧？）
				PRINTW
				RETURN 1
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【無自覚口内射精】
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		;精液中毒低精飲 ;精液中毒高精飲
		IF ARG:1 == 1 || ARG:1 == 4 || ARG:1 == 6
			PRINTFORML 「%K17_SPLIT_SHUFFLE(@"……/%K17_RS("欸/嗯/唔")%/……")%」
		;精液中毒低吐き出し ;濃厚精液＆精液中毒低吐き出し
		ELSEIF ARG:1 == 2 || ARG == 5
			PRINTFORML 「%K17_SPLIT_SHUFFLE(@"……/%K17_RS("呜欸/呜/呜诶")%/……")%」
		;精液中毒低手で覆う
		ELSEIF ARG:1 == 3
			PRINTFORML 「咳咳咳……」
		ENDIF
		IF CFLAG:時間停止バレ
			;停止バレ
			IF iRT >= K17C_恋慕
				PRINTFORML 「已经……为什么要这样做……」
			ELSE
				PRINTFORML 「又……居然会做这种事……」
				
			ENDIF
		ELSE
			;まだバレてない
			PRINTFORML （……这么突然……怎么了？）
			IF ABL:精液中毒 >= 3
				;飲んだ
				PRINTFORML （这难道是……精液！？%K17_RS(@"/……是%K17_CNAME()%？")%)
				CFLAG:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【無自覚顔面射精】
	;【無自覚手淫射精】
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 5 || ARG == 6)
		IF ARG:1 == 1
			;幼稚持ち＆精液経験100未満 ;通常ぬぐい取り 
			PRINTFORML 「啊……什么……这个……」
			PRINTW
			RETURN 1
		ELSEIF ARG == 5 && ARG:1 == 2
			;自覚してぬぐう
			IF CFLAG:時間停止バレ
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「突然……这样的%K17_RS("不要/不要在这个地方")%啊，已经……」
				ELSE
					PRINTFORML 「居然留在这种地方……」
				ENDIF
			ELSE
				;未バレ
				PRINTFORML （讨厌……这是精液……%K17_RS(@"/是……%K17_CNAME()%？")%)
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ELSE
			;精液舐めとり
			PRINTFORML 「……啊」
			IF CFLAG:時間停止バレ
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「突然……不要做这种事，已经……%K17_RS("呸咯/呜呣")%」
					PRINTFORMDL %CALLNAME:TARGET%如%CALLNAME:MASTER%所见那样舔舐着
				ELSE
					PRINTFORML 「居然在这种地方……嗯咕」
					PRINTFORML 「%K17_RS("变态/笨蛋/痴汉/色鬼")%……」
				ENDIF
			ELSE
				;舐めた
				PRINTFORML （忍不住舔了一下……这个……精液……！？）
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【無自覚手淫射精】
	;記入チェック（=0, 非表示、1, 表示）
;	LOCAL:1 = 1
	;-------------------------------------------------
;	IF LOCAL:1 && ARG == 6
;		;ぬぐい取り
;		IF ARG:1 == 1
;			PRINTFORML 「っ……なに……これ……」
;		;舐めとり
;		ELSEIF ARG:1 == 2
;			PRINTFORML 「…………っ」
;			IF CFLAG:時間停止バレ
;				;停止バレ
;				IF iRT >= K17C_恋慕
;					PRINTFORML 「急にこんなことしないでよっ、もうっ……\@ARG:3?ぺろっ#\@」
;				ELSE
;					PRINTFORML 「こんなところにかけるなんて……\@ARG:3?んくっ#\@」
;				ENDIF
;			ELSE
;				;停止未バレ
;				PRINTFORML （思わず舐めちゃったけど……これ……精液……！？）
;				IF iMOB
;					PRINTFORML （いったい、だ……だれの……）
;					PRINTFORMDL 一瞬%CALLNAME:TARGET%は青ざめ、落ち着かないようにきょろきょろと辺りを警戒した
;					IF iRT >= K17C_恋慕
;						PRINTFORML （わ、私……%K17_CNAME()%以外の人に……%K17_RS("穢された/汚された/精液かけられた")%！？）
;					ENDIF
;					CFLAG:K17C_CF_疑心暗鬼 = 1
;				ELSE
;					;モブなし
;					CFLAG:K17C_ID:K17C_CF_疑い++
;				ENDIF
;			ENDIF
;		ENDIF
;	ENDIF
	;-------------------------------------------------
	;【無自覚アナル射精】
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;Ａ感覚0
		IF ARG:1 == 1
			PRINTFORML （噫……什么……突然……%K17_CALL_P(K17C_部位A)%）
			PRINTW
			RETURN 1
		;ソレ以外
		ELSEIF ARG:1 == 2
			
			IF CFLAG:時間停止バレ
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「不要突然做这种事，已经……」
				ELSE
					PRINTFORML 「居然会做这种事……呃……」
				ENDIF
			ELSE
				;未バレ
				PRINTFORML （这种感觉……%K17_CALL_P(K17C_部位A)%……出来的……是？）
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【無自覚処女喪失】
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML （噫……什么……突然……）
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;【無自覚膣内射精】
	;1非処女膣内射精ピルなし
	;2非処女膣内射精ピルあり
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9 && (ARG:1 == 1 || ARG:1 == 2)
		PRINTFORML 「什么……%K17_BLUSH(2)%」
		PRINTFORML （这个……在阴道里……出来的……是？）
		IF CFLAG:時間停止バレ && iRT >= K17C_恋慕
			;バレありの恋慕以上
			IF CFLAG:允许无套 >= 2
				;生解禁してる
				PRINTFORML 「不用这么做……普通一点吧，笨蛋」
				PRINTFORMDL %CALLNAME:TARGET%很在意周围，红了脸
			ELSE
				;解禁してない
				PRINTFORML 「这样啊……竟然擅自这么做……」
				PRINTFORMDL 破坏了%CALLNAME:TARGET%的心情
				CALL K17_MARK_反発刻印(0)
			ENDIF
		ELSEIF CFLAG:時間停止バレ
			;バレありの恋慕未満
			PRINTFORML 「哎……糟糕……这样的」
			PRINTFORMDL %CALLNAME:TARGET%带着不甘心的表情瞪着%CALLNAME:MASTER%
		ELSE
			;未バレ
			PRINTFORML （什么……不知不觉！？）
			PRINTFORML （在不知不觉间，被%K17_CNAME()%……%K17_RS("中出了/膣内射精了/播种了")%……吗？）
			CFLAG:K17C_ID:K17C_CF_疑い++
		ENDIF
		
		;-----------------
		;ピル　危険日か見る
		;-----------------
		IF ARG:1 == 1
			IF ESTRUS_CYCLE(TARGET) >= 100
				PRINTFORML （今……今天是%K17_RS("危险期/会怀孕的那天")%……）
			ELSE
				PRINTFORML （……今天%K17_RS("危险期/会怀孕的")%没事吧……？）
			ENDIF
		ELSEIF ARG:1 == 2
			;ピルあり
			PRINTFORML （因为在吃口服避孕药……%K17_RS("危险期/会怀孕")%也%K17_RS("没关系/无所谓")%……吧？）
		ENDIF
	
	;無自覚
	ELSEIF ARG:1 == 3
		PRINTFORML （啊……「……这是%K17_RS("生理/白带")%……吗？）
		IF !CFLAG:K17C_ID:K17C_CF_疑い
			PRINTFORML （不是吧……已经湿透了……诶，诶，我的身体，擅自%K17_RS("欲情/発情")%……了？）
			SIF EQUIP:下半身内衣１ || EQUIP:下半身内衣２
				PRINTFORML （讨厌……内衣……弄脏了……）
		ENDIF
		PRINTW
		RETURN 1
	ENDIF
	
	;-------------------------------------------------
	;疑い　停止バレの後処理
	;-------------------------------------------------
	IF CFLAG:K17C_ID:K17C_CF_疑い && CFLAG:K17C_ID:K17C_CF_胖次没収 && !CFLAG:時間停止バレ
		;パンツ没収経験済み
		SELECTCASE CFLAG:K17C_ID:K17C_CF_疑い
			CASE IS <= 10
				PRINTFORML （……这难道是%K17_CNAME()%的恶作剧吗……？）
			CASE IS >= 10
				PRINTFORML （这个果然是……是被%K17_CNAME()%恶作剧吧……）
			CASE IS >= 40
				PRINTFORML （还有就是证据……下次会设陷阱的……）
		ENDSELECT
		CFLAG:K17C_ID:K17C_CF_疑い = MIN(CFLAG:K17C_ID:K17C_CF_疑い +5,100)
		SIF CFLAG:K17C_ID:K17C_CF_疑い >= 10
			PRINTFORMDL %CALLNAME:TARGET%加深了%CALLNAME:MASTER%的疑惑
			
	ELSEIF CFLAG:K17C_ID:K17C_CF_疑い && !CFLAG:K17C_ID:K17C_CF_胖次没収 && !CFLAG:時間停止バレ
		;パンツ没収未経験で疑いがついた
		PRINTFORML （诶……哎……%K17_RS("到底是怎么回事/你做了什么/你做了什么事情啊")%……讨厌%K17_RS("/、好可怕")%……）
		PRINTFORMDL %CALLNAME:TARGET%似乎感到不安……
		CFLAG:K17C_ID:K17C_CF_疑い = MIN(CFLAG:K17C_ID:K17C_CF_疑い +2,100)
		SIF CFLAG:K17C_ID:K17C_CF_疑い >= 40
			PRINTFORML （捉拿犯人……我下次会设陷阱的）
	ENDIF
	;恋慕以下でバレてれば反発刻印 イタズラの数だけつくはず
	SIF iRT < K17C_恋慕 && CFLAG:時間停止バレ
		CALL K17_MARK_反発刻印(1)
	CALLF FIRSTTIME("時間停止恶作剧")
	PRINTW
ENDIF
RETURN 1
;==================================================
;ナマでやらせろ時
;==================================================
@M_KOJO_EVENT_K17_18(ARG,ARG:1)
#DIM DYNAMIC iRT
iRT = K17_GRT()
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;避妊要求台詞
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		SELECTCASE iRT
			CASE IS >= K17C_恋慕
				PRINTFORML 「啊……那个，会生孩子的……我觉得%K17_RS("不可以/不可以")%吗……」
				PRINTFORML 「对了……欸、那个……」
				PRINTFORMDL %CALLNAME:TARGET%红着脸靠近%CALLNAME:MASTER%低声私语
				PRINTFORML 「我倒是不讨厌H，所以暂时……我觉得……先不生孩子可以吗……」
				PRINTFORML 「所以%K17_RS("用套/避孕")%吧……」
			CASEELSE
				PRINTFORML 「至少给我%K17_RS("用套/避妊")%……」
		ENDSELECT
		
	ENDIF
	;-------------------------------------------------
	;断った
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「不行啊……好像会生孩子似的……」
		
	ENDIF
	;-------------------------------------------------
	;断ったのに粘られて切れた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「%K17_RS("不要/不行/不可以")%，别再逞强了」
		
	ENDIF
	;-------------------------------------------------
	;危険日以外許可
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML 「知道了……那么除了危险日子以外，可以吗……？」
		PRINTFORML （这样真的好吗……）
		
	ENDIF
	;-------------------------------------------------
	;危険日許可
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML 「啊，小宝宝……想要吗？
		PRINTFORML 「如果想生下来的话，口服避孕药就不用喝了……」
		PRINTFORMDL %CALLNAME:MASTER%清楚地告诉她想养个孩子……
		PRINTFORML 「……啊……我明白了，那就算了……」
		PRINTFORML 「如果可以的话，真的会生下来的……喂」
		TRYCALL K17_RELATION_EV(K17C_RTF_允许无套)

	ENDIF
ENDIF
PRINTL
RETURN 1
;==================================================
;神社暮らしを承認して貰う
;==================================================
@M_KOJO_EVENT_K17_19(ARG,ARG:1)
;口上主はARG
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;認められる
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「谢谢你，%K17_CNAME()%」
		PRINTFORML 「房租是帮忙做家务吗……没关系，我很擅长」
		PRINTFORML 「为了%K17_CNAME()%也要加油，请多关照」
		PRINTFORMDL %CALLNAME:TARGET%眼睛闪烁着期待着新生活，对着开心的%CALLNAME:MASTER%露出了笑容
		PRINTL
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;認められない
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「是、是的……太遗憾了」
		PRINTFORMDL %CALLNAME:TARGET%两肩塌了下来，看起来很遗憾
		PRINTL
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;帰宅時
;==================================================
@M_KOJO_EVENT_K17_20(ARG,ARG:1)
;口上主はLOCALS or RESULT
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常帰宅　おやすみ口上で統一
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;CALL M_KOJO_EVENT_K17_3(1)
		;PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;デート中帰宅
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL M_KOJO_SPEVENT_K17_3(0)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;玄関先でお見送り
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		CALL M_KOJO_SPEVENT_K17_3(0)
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;陥落素質取得時
;==================================================
@M_KOJO_EVENT_K17_21(ARG,ARG:1)
;口上主はARG
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	CFLAG:K17C_ID:K17C_CF_自慰フラグ = 1
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕取得
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTL
		PRINTFORML （看来只能认同了……）
		PRINTFORML （身为魔法使，完败了……）
		PRINTFORML （%K17_CNAME()%……喜欢%K17_HEART()%	最喜欢了%K17_HEART()%	我的爱%K17_HEART(2)%）
		PRINTW
		
		;処女判定
		IF TALENT:処女
			;自主トレ設定:おねだりH
			PRINTFORMDL 在床上翻滚了一阵的%CALLNAME:TARGET%终于……
			PRINTFORML 「唔……呼……唔……」
			PRINTFORMDL 战战兢兢地向蜜壶伸出手
			PRINTFORML 「这个…………好…………一想到%CALLNAME:MASTER%……啊啊啊啊」
			PRINTFORML 「真是的……的？………………要……侵犯我……」
			PRINTFORML 「想要这样……就接受了…………已经准备好了……」
			PRINTFORMDW %CALLNAME:TARGET%以平时难以想象、完全不体面的样子，沉溺于自慰之中。
			PRINTFORML 「去……去……去了~~~~~！！」
			PRINTW
		ELSE
			TRYCALL K17_H妄想_喘ぎ(K17C_攻め_おねだり系)
			PRINTFORML 「%K17_喘ぎ声(K17C_攻め_おねだり系,6,1)%%K17_快楽_喘ぎ声(K17C_攻め_おねだり系,8000,K17C_部位V)%%K17_喘ぎ声(K17C_攻め_おねだり系,6,1,1)%」
			PRINTFORML 「%K17_喘ぎ_絶頂(K17C_攻め_おねだり系,K17C_部位V)%」
			PRINTW
		ENDIF
		PRINTFORML （啊……真好啊%K17_HEART()%……但是……不知道……）
		PRINTFORML （…………如果真的喜欢上了的话，只是自慰的话会变得难过……）
		;経験値+余計悶々としちゃう
		EXP:自慰経験 += 1
		EXP:Ｖ経験 += 1
		EXP:Ｂ経験 += 1
		EXP:Ｖ絶頂経験 += 1
		EXP:自慰経験 += 1
		CFLAG:积攒度 /= 4
		CFLAG:积攒度 += 200
		
		;態度を2段階下げる
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_態度,-2)
		SIF RESULT
			PRINTFORML （变得更坦率也没关系吧）
		;フラグ保存
		SIF (K17_RT_FG(TARGET) & K17C_RTF_恋慕) && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_恋慕)
			CALL K17_RELATION_EV(K17C_RTF_恋慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;思慕取得
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTL
		PRINTFORML 「………………喜欢%CALLNAME:MASTER%……」
		PRINTFORML （这个……声音发一出来，心里就扑通扑通地跳）
		PRINTFORML （果然是这样……吗？）
		PRINTW
		
		;処女判定
		IF TALENT:処女
			;自主トレ設定:犯されH
			PRINTFORMDL %CALLNAME:TARGET%趴在床上将枕头夹在脚间
			PRINTFORMDL 本想确认心跳的手，却在不知不觉中用手很讨厌地揉了揉胸
			PRINTFORML 「……哈哈……唔……」
			PRINTFORMDL 扭动屁股压在枕头上
			PRINTFORML 「这个……好厉害…………%CALLNAME:MASTER%！……啊啊啊」
			PRINTFORML 「不行啊……这样……强行……别那么……」
			PRINTFORML 「忍耐……不……还不行……因为那样……」
			PRINTFORMDW %CALLNAME:TARGET%以平时难以想象、完全不体面的样子，沉溺于自慰之中。
			PRINTFORML 「不行……不行不行……要去了～～！！！」
		ELSE
			TRYCALL K17_H妄想_喘ぎ(K17C_受け_合意襲い系)
			PRINTFORML 「%K17_喘ぎ声(K17C_受け_合意襲い系,6,1)%%K17_快楽_喘ぎ声(K17C_受け_合意襲い系,8000,K17C_部位C)%%K17_喘ぎ声(K17C_受け_合意襲い系,6,1,1)%」
			PRINTFORML 「%K17_喘ぎ_絶頂(K17C_受け_合意襲い系,K17C_部位C)%」
		ENDIF
		PRINTW
		PRINTFORML （好厉害啊%K17_HEART()%…………但是……这样……）
		PRINTFORML （…………讨厌自己……以%CALLNAME:MASTER%为素材了……）
		;経験値+スッキリ
		EXP:自慰経験 += 1
		EXP:Ｃ経験 += 1
		EXP:Ｂ経験 += 1
		EXP:Ｃ絶頂経験 += 1
		EXP:自慰経験 += 1
		CFLAG:积攒度 /= 4
		;態度を1段階下げる
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_態度,-1)
		SIF RESULT
			PRINTFORML （稍稍变为坦率也没关系吧）
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;愛欲取得
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML （不行……已经……如果没有那个人的身体也许就活不下去）
		TRYCALL K17_H妄想_喘ぎ(K17C_攻め_强行系)
		PRINTFORML 「%K17_喘ぎ声(K17C_攻め_强行系,6,1)%%K17_快楽_喘ぎ声(K17C_攻め_强行系,8000,K17C_部位V)%%K17_喘ぎ声(K17C_攻め_强行系,6,1,1)%」
		PRINTFORML 「%K17_喘ぎ_絶頂(K17C_攻め_强行系,K17C_部位V)%」
		PRINTW
		PRINTFORMDL 身体完全被俘虏了……
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_恋慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_恋慕)
			CALL K17_RELATION_EV(K17C_RTF_恋慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;愛人取得
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML （明明认为是不行的，却完全沉迷其中……）
		TRYCALL K17_H妄想_喘ぎ(K17C_攻め_おねだり系,0)
		PRINTFORML 「%K17_喘ぎ声(K17C_攻め_おねだり系,6,1)%%K17_快楽_喘ぎ声(K17C_攻め_おねだり系,8000,K17C_部位C)%%K17_喘ぎ声(K17C_攻め_おねだり系,6,1,1)%」
		PRINTFORMDL 今天身体也跟心不一样，在追求%CALLNAME:MASTER%……
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;セフレ取得
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTL
		PRINTFORML （说是只有身体的关系……是吗？）
		TRYCALL K17_H妄想_喘ぎ(K17C_受け_合意襲い系)
		PRINTFORMDL 即使头脑中否定，像是被火点燃了的身体的疼痛也不会停止……
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;調教終了時に自慰
;==================================================
;テンプレ無視ごめんなさい てかなんかちょっと間違ってた
;自慰経験100の格の違いを見せないと！　かっ飛ばせ！かっ飛ばせ！アリス！
;
;	[テンプレ]
;ARG:0に自慰状況　1通常自慰　2同居時自慰　3中だし精液自慰　4無知持ち　5陥落素質あり自慰中毒高め　6自慰中毒高め（陥落なし）
;ARG:1に自慰種類　1Ｂ　2A　6C　7V　8部位指定無し　ARG==6の時　1尻穴膣腔同時　2膣腔のみ

;	[現在の実値]
;ARG:0に自慰状況　1通常自慰　2同居時自慰　3中だし精液自慰　4無知持ち　5陥落素質あり自慰中毒4以上　6自慰中毒4以上（陥落関係なし）おもちゃ
;ARG:1に自慰種類	ARG==5 1B　2A　3C　4V　5なし　各感度1or感覚10……部位番号はABLの要素番号とは違うみたい　感覚だけかと思ってた……
;					ARG==6　1尻穴膣腔同時　2膣腔のみ
;無知はまた今度
;--------------------------------------------------
@M_KOJO_EVENT_K17_22(ARG,ARG:1)
#DIM DYNAMIC iRand,2=0,0	;妄想種類と妄想
#DIM DYNAMIC iType = 0		;喘ぎTYPE
#DIM DYNAMIC ABLnum= -1		;部位番号　引数からABLの番号に変更 -1のままだとスキップ
VARSET LOCALS		;オプションの呼び名文字列
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL

	;-------------------------------------------------
	;無知
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		IF ABL:自慰中毒 >= 5
			;保護者連絡
			PRINTFORML （……想死……真丢脸……）
			PRINTFORML （但成为大人就是这么回事吗……？）
		ELSE
			PRINTFORML （什么……这个……这是什么……好舒服%K17_HEART()%）
			PRINTFORMDL %CALLNAME:TARGET%把身体交给未知的快乐，好几次都被快感击垮……
		ENDIF
	RETURN 1
	ENDIF


	;-------------------------------------------------
	;無知自慰以外　ここから　同居は妄想スキップ
	;-------------------------------------------------
	IF ARG != 2 && ARG != 7
		PRINTFORML 「%K17_RS("嗯—/欸—/")%……今天……怎么办呢……」
		PRINTFORMDL %CALLNAME:TARGET%一倒进被窝就闭上眼睛，开始沉浸在妄想中……
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW …………
	ENDIF
	
	;-------------------------------------------------
	;無知自慰以外で陥落ないとき
	;思慕付き前だからここで誘わないと誰にも見てもらえないぞ、がんばれがんばれ
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG != 4 && K17_GRT(TARGET) < K17C_思慕
		PRINTFORML （想起在图书馆找到的%K17_RS("官能小説/小薄本/小黄书")%里的场面……）
		PRINTDATAL
			DATAFORM （んっ……こんなこと……あっ……いけないってわかってるのにぃ……）
			DATAFORM （くっ……こんな欲求……なくなればいいのにぃ……）
			DATAFORM （あぅ……こんなことばっかりぃ……だめなのにぃ……）
			DATAFORM （んくぅ……こんなとこ……もし見られたら……だめなのにぃ……）
		ENDDATA
		;でも感じちゃうビクンッビクンッ
		PRINTDATAL
			DATAFORM （でも私って……これ結構しちゃってる……の、よねぇ……）
			DATAFORM （でも身体……勝手に、ムラムラしちゃってる……）
			DATAFORM （でも身体……勝手に……赤ちゃん……欲しがってるの……？）
			DATAFORM （でもこれ……気持ちいぃの……しちゃうのぉ……）
		ENDDATA
		PRINTFORML （差不多……%K17_RS("要去了/要绝顶了/要到最后了")%……）
		PRINTFORML 「……噫……%K17_RS("去了呀/去了/要去了")%……」
		PRINTW
		PRINTFORMDL %CALLNAME:TARGET%的%K17_RS("双腿/身体")%痉挛了一下
		PRINTFORML 「哈……%K17_HEART()%」
		PRINTFORMDL 一瞬间紧张的身体又脱力得软绵绵地躺着了
		PRINTFORML （……这样……到现在为止到底做了多少次呢……）
		PRINTFORML （但是……停不下来啊……哈……）
		SIF TALENT:処女
			PRINTFORML （没有经验却会做这种事……）
		PRINTFORMDL %CALLNAME:TARGET%有点厌恶自己
		RETURN 1
	ENDIF
	
	
	;-------------------------------------------------
	;無知自慰以外
	;こっちがメイン　アリスの妄想ひとりえっち
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG != 4 && ARG != 7
		iRand:0=RAND:K17C_妄想種類数
		iRand:1=RAND:K17C_受け妄想数
		;同居以外は妄想先出し
		IF ARG != 2
			;妄想の取り出し　CONVERTしてそれっぽく→見送り
			SELECTCASE K17_GRT(TARGET)
				CASE IS >= K17C_恋慕
					;恋慕から攻め受け
					;妄想取り出しひでーなこれ……長文だとだめだなぁ
					;PRINTFORML （……%K17_SEXY_CONVERT(K17_H妄想(iRand:0,iRand:1),13,K17_HEART())%……）
					PRINTFORML （……%K17_H妄想(iRand:0,iRand:1)%……）
					PRINTW
				CASE IS >= K17C_思慕
					;思慕は受けのみ
					iRand:0=K17C_受け
					PRINTFORML （……%K17_H妄想(iRand:0,iRand:1)%……）
					;PRINTFORML （……%K17_SEXY_CONVERT( K17_H妄想(iRand:0,iRand:1),13,K17_HEART())%……）
					PRINTW
			ENDSELECT
			;既読で変わった場合があるので保存
			iRand:1 = RESULT
		ELSEIF ARG== 2
			
			;もし処女orオナバレ初回なら小悪魔受け固定
			SIF TALENT:TARGET:処女 || CFLAG:TARGET:K17C_CF_オナバレ追加イベ  == 0
				iRand:1 = K17C_小悪魔受け
		ENDIF
			
		;タイプ決定
		iType = K17_喘ぎタイプ_H妄想(iRand:0,iRand:1)
		
		;-------------------------------------------------
		;同居
		;オナバレを入れる
		;-------------------------------------------------
		IF ARG == 2
			;同居　恋慕以上なんでタイプ確定打ちしてもいいかな
			PRINTFORMDL 本人可能没有注意到，但是声音也渐渐变大了……
			TRYCALL K17_H妄想_喘ぎ(iType)
			
			;幸運補正+10%　関係性補正+3%　つく
			IF K17_LUCKY_SUKEBE(55)
				TRYCALL K17_ONABARE(K17C_ID)
				RETURN 1
			ENDIF
			
			;こっちでも鑑賞と大差ないやつ
			PRINTFORMDL 差不多该到了吧，%CALLNAME:TARGET%紧紧地握着%CALLNAME:MASTER%的手，不由得握了回去
			PRINTFORML 「……？咦？」
			PRINTFORMDL %CALLNAME:TARGET%因快感而颤抖着，注意到这边，脸通红
			PRINTW
			PRINTFORML 「えっ、稍微、まってぇ、%K17_喘ぎ_絶頂(iType,-1,"\n　見られながら")%」
			PRINTFORMDL %CALLNAME:TARGET%显得很慌张，但快感%K17_RS("无法停止/忍受不了/に无法忍受")%，战战兢兢地抽搐着
			PRINTFORMDL 蜷曲着有点害羞的身体绝顶了，关键的地方完全能被%CALLNAME:MASTER%看见
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW …………
			
			;性癖暴露処理
			;オナバレイベント入ったか見る
			IF FIRSTTIME("オナバレ")
				PRINTFORML 「嗯……这是那个……」
				PRINTFORMDL %CALLNAME:TARGET%从绝顶中恢复过来，语无伦次地开始说明
				PRINTFORML 「……不，不是这样的」
				PRINTFORML 「那个……人偶的研究？没错！然后……」
				PRINTFORMDL 我觉得这个辩解很辛苦……
				PRINTW
				PRINTFORMDL 而且如果真有这样的"研究"的话，一定要好好看看啊。
				PRINTFORML 「啊！」
				PRINTFORML （暴、暴露了……）
				PRINTW
				PRINTFORMDL 就当%CALLNAME:TARGET%是"热心于研究"吧
				PRINTFORML （即使是女孩子……也会有性欲……）
				PRINTFORML （有时候会偷偷地一个人……%K17_BLUSH()%）
				PRINTFORML （而且%K17_CNAME()%也有责任……）
				PRINTW
				PRINTFORMDL 更要把「研究成果」也告诉其他的人
				PRINTFORML 「啊～～～！？！？这、这个不是能发表的东西……！」
				PRINTFORML 「呐，保密哦！秘密的研究！」
				PRINTFORML 「话说，你明明知道还捉弄人家吧！？」
				
			ELSE
				PRINTFORML 「啊……不……啊……呜ー」
				PRINTFORMDL 当绝顶结束时，%CALLNAME:TARGET%把床单蒙到头上呻吟着
				PRINTFORMDL %CALLNAME:TARGET%果然是"热心研究"
				PRINTFORML 「不、不是的……」
			ENDIF
			
			PRINTFORMDW 那么，到底在做什么「研究」呢，希望你能好好说出来……
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW …………
			PRINTL
			PRINTFORMW 「%CALLNAME:TARGET%在研究%K17_RS("一个人的H/自慰/手淫/女孩子的身体")%%K17_BLUSH(2)%」
			PRINTFORML 「这是最糟糕的台词了。」
			;鑑賞と同じ
			TRYCALL K17_オナバレ追加イベント(2,iRand:1)
			
			PRINTFORMDL 不知怎么的，%CALLNAME:TARGET%被抱住了，一直抚摸着脑袋直到睡着……
			
			;CFLAG:K17C_ID:K17C_CF_オナニーフラグ = 1
			RETURN 1
			
		;-------------------------------------------------
		;ARG==3,5,6のオプション選択
		;-------------------------------------------------
		ELSEIF ARG == 3
			;中出し精液
			LOCALS = %K17_CNAME()%の精液で
			ABLnum = K17C_部位V
		ELSEIF ARG == 5
			;部位描写あり 
			SELECTCASE ARG:1
				[SKIPSTART]
				CASE 1
					ABLnum = K17C_部位B
				CASE 2
					ABLnum = K17C_部位A
				CASE 3
					ABLnum = K17C_部位C
				CASE 4
					ABLnum = K17C_部位V
				[SKIPEND]
				CASE 1
					ABLnum = K17C_部位C
				CASE 2
					ABLnum = K17C_部位V
				CASE 3
					ABLnum = K17C_部位A
				CASE 4
					ABLnum = K17C_部位B
			ENDSELECT
		ELSEIF ARG == 6
			;おもちゃあり
			LOCALS +="おもちゃで"
			SELECTCASE ARG:1
				CASE 1
					LOCALS += K17_CALL_P(K17C_部位A)+"と"+K17_CALL_P(K17C_部位V)
				CASE 2
					ABLnum = K17C_部位V
			ENDSELECT
		ENDIF
		
		
		;-------------------------------------------------
		;喘ぎ
		;-------------------------------------------------
		TRYCALL K17_H妄想_喘ぎ(iType,ARG==6 ? 1#0)
		
		;-------------------------------------------------
		;絶頂処理
		;-------------------------------------------------
		;部位
		PRINTFORML 「%K17_喘ぎ声(iType,6,1)%%K17_快楽_喘ぎ声(iType,8000,ABLnum)%%K17_喘ぎ声(iType,6,1,1)%」
		PRINTFORML 「%K17_喘ぎ_絶頂(iType,ABLnum,LOCALS)%」
		PRINTW
		
		;感想戦
		PRINTFORML 「哈……%K17_HEART()%」
		PRINTFORMDL 激烈地绝顶了的%CALLNAME:TARGET%的身体一失去力量，就马上横躺下来
		PRINTFORMDL 手放在额头上大喘着气
		PRINTFORML （是%K17_RS("欲求不満/有欲望积蓄/生理期接近了")%吗……）
		SELECTCASE iType
			;受け
			CASE K17C_受け_おねだり系
				PRINTFORML （那种、%K17_RS("强求/被溺爱/撒娇")%般的%K17_RS("妄想/想像")%……）
			CASE K17C_受け_合意襲い系
				PRINTFORML （那种、主动诱惑会被%K17_RS("强行/乱七八糟/侵犯")%的%K17_RS("妄想/想像")%……）
			CASE K17C_受け_强行系
				PRINTFORML （那种会被%K17_RS("强行/乱来/侵犯")%的%K17_RS("妄想/想像")%……）
			CASE K17C_受け_お手伝い系
				PRINTFORML （那种会被%K17_RS("随心所欲对待/乱七八糟/乱来")%的%K17_RS("妄想/想像")%……）
			;攻め
			CASE K17C_攻め_おねだり系
				PRINTFORML （那种、主动%K17_RS("索求/沉溺在爱欲")%的%K17_RS("妄想/想像")%……）
			CASE K17C_攻め_合意襲い系,K17C_攻め_强行系 
				PRINTFORML （那种、主动%K17_RS("强行/乱来/侵犯")%的%K17_RS("妄想/想像")%……）
			CASE K17C_攻め_お手伝い系
				PRINTFORML （那种、主动%K17_RS("乱来/享受")%的%K17_RS("妄想/想像")%什么的……）
		ENDSELECT
		
		PRINTFORMDL %CALLNAME:TARGET%陷入了相当厌恶自己的境地
		SIF CFLAG:TARGET:初始位置 != CFLAG:MASTER:初始位置
			CFLAG:K17C_ID:K17C_CF_自慰フラグ = 1
	;無知以外自慰終端
	ENDIF
ENDIF
RETURN 1
;==================================================
;浴場連れだし
;==================================================
@M_KOJO_EVENT_K17_23(ARG,ARG:1)
#DIM DYNAMIC iMOB = 0
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;断られた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「稍等一下，我们并不是能暴露裸体的关系不是吗？」
	ENDIF
	;-------------------------------------------------
	;一緒に入ってくれた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「这里的人很喜欢和别人一起进入浴室呢……」
		PRINTFORML 「不许盯着看」
		PRINTFORMDL 害羞的的%CALLNAME:TARGET%不顾%CALLNAME:MASTER%赶紧脱内衣服
		PRINTFORML 「来，先进去吧。」
		PRINTW
		PRINTFORMDL 被这么一说，%CALLNAME:MASTER%先入浴场了，但是%CALLNAME:TARGET%怎么也不肯进不来
		PRINTFORMDL 几次和她打招呼，隐藏了身体要害的%CALLNAME:TARGET%终于进来了
		
		;アリスの他に同行者がいるかチェック
		FOR i,1,CHARANUM
			SIF !TARGET:i
				BREAK
			
			IF (CFLAG:(TARGET:i):同行) && TARGET:i != K17C_ID
				iMOB = TARGET:i
				BREAK
			ENDIF
		NEXT
		
		;連れ出しは先MASTERだけ移動するのが現仕様なので、その位置で他TARGETが居ないか見とく
		;アリスの位置では他TARGETを考慮しない
		;設定して気づいたけどお風呂に他キャラいると、そっちが先に読まれてここはこないっぽい
		IF K17_CHECK_RANDOM_EVENT(TARGET,-1,0) && K17_GET_CHARA_POSNUM(MASTER) == 0 && !iMOB
			;れっつとらぶる
			TRYCALL K17_お浴室イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 就这样告诉她，她就红着脸泡在澡盆里。
		ENDIF
		IF !RESULT
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%瞟了一眼
		ENDIF
	ENDIF
	
	PRINTW
ENDIF
RETURN 1
;==================================================
;懐妊
;==================================================
@M_KOJO_EVENT_K17_24(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「啊，那个，好像\@EXP:出産経験?又#\@被授予了和%K17_CNAME()%的婴儿……」
		PRINTFORMDL %CALLNAME:TARGET%带着开心的笑容凝视着%CALLNAME:MASTER%
	ENDIF
	;-------------------------------------------------
	;思慕
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「嗯……那个……那个……喂，好像\@EXP:出産経験?又#\@怀上了」
		PRINTFORMDL %CALLNAME:TARGET%不安地凝视着%CALLNAME:MASTER%，却马上移开了视线
	ENDIF
	;-------------------------------------------------
	;陥落素質無し
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		;詰問はきつい
		PRINTFORML 「怎么办啊，因为%K17_CNAME()%\@EXP:出産経験?又#\@怀孕了……怎么办啊」
		PRINTFORMDL %CALLNAME:TARGET%似乎对怀孕感到不安。
		PRINTFORMDL %CALLNAME:MASTER%抚摸着快要哭出来的%CALLNAME:TARGET%的头，只能安慰她……
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;無自覚
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML （什么呀……最近身体不舒服……）
		PRINTW
		RETURN 1
	ENDIF
	
	;報告陥落あり　出産経験を見る
	IF !EXP:出産経験
		PRINTW
		PRINTFORMDL 看来总得有思想准备
		PRINTFORML 「我要生了……但是，因为是第一次，所以有点不安……」
		PRINTFORMDL %CALLNAME:TARGET%似乎早已有了觉悟，可怜地抚摸着自己的肚子
		PRINTFORMDL 看到那样的身姿，%CALLNAME:MASTER%抱住了%CALLNAME:TARGET%
		PRINTFORML 「哎呀……怎么了……突然……没关系的，一定会生个健康的孩子的」
	ELSE
		PRINTFORML 「我又要生了……如果是和%K17_CNAME()%的孩子，无论多少都行，可以吧？」
		PRINTFORMDL 有了生育的经验，%CALLNAME:TARGET%好像知道了成为母亲的%K17_RS("喜悦/幸福")%
	ENDIF
	
ENDIF
PRINTW
RETURN 1
;==================================================
;出産
;==================================================
@M_KOJO_EVENT_K17_25(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕 思慕
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 1 || ARG == 2)
		PRINTFORML 「没关系，我生了个健康的孩子」
		PRINTFORML 「你看，这孩子。%K17_RS("眼睛/嘴巴")%和%K17_CNAME()%一模一样」
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;陥落素質無し
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「……虽然很不安，但是今后这个孩子必须我一个人抚养……」
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;無自覚
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;オナバレ
;09/20	なんか作り雑だなー関数化予定地
;09/21	少しマシになったはず　フラグ取得はK17_オナバレ追加イベント関数にて
;09/24	同居自慰追加 ARG:1にて見られた瞬間、追い出し　あと一緒
;==================================================
@M_KOJO_EVENT_K17_26(ARG,ARG:1)
#DIM Virgin = 0		;まんまの意味　行ったり来たりするので保護しておく
#DIM iRand = 0		;受け妄想の一時受け渡し
#DIM iType = 0		;タイプの保存
#DIM iRes = 0		;初回かどうか見とく

;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;見られた瞬間 通常オナバレ
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			IF FIRSTTIME("オナバレ",1) && ARG:1==0
				SELECTCASE K17_GRT(TARGET)
				
				;うふふ経験なし
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「！？！？……%K17_RS("噫～～～/呀啊啊啊啊啊/哎哎哎哎哎")%？
					;うふふ+キス経験あり
					CASEELSE
						PRINTFORML 「……%K17_RS("咿呀/呀/诶诶/啊")%！？
				ENDSELECT
				PRINTFORML 「啊……不……诶……」
				PRINTFORMDL 听到了平时难以想象的声音
				PRINTFORML 「嗯……不，不是这样的」
				PRINTFORML 「那个……人偶的研究？没错！所以我无法松开手了」
				PRINTFORMDL 我觉得这个辩解很辛苦……
			
			ELSEIF ARG:1==0
				SELECTCASE K17_GRT(TARGET)
				
					;うふふ経験なし
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「！？！？……%K17_RS("呜～～～～/呀啊啊啊啊啊/欸欸欸欸欸")%？
					;うふふ+キス経験あり
					CASEELSE
						PRINTFORML 「%K17_RS("咿呀/呀啊/欸欸欸/啊")%！？」
				ENDSELECT
				PRINTFORML 「啊……不是……哎……哎……又……是你？」
				PRINTFORMDL 听到了平时难以想象的声音
				PRINTFORMDL %CALLNAME:TARGET%果然是"热心研究"
				PRINTFORML 「不、不是的……」
				
			ENDIF
			
			;-------------------------------------------------
			;追加イベ
			;同居自慰　見られた瞬間
			;-------------------------------------------------
			IF ARG:1==1
				;PRINTFORMDL そろそろ達するのか、%CALLNAME:TARGET%がぎゅっと%CALLNAME:MASTER%の手を握ってくるので、思わず握り返してしまった
				PRINTFORML 「……？咦？」
				PRINTFORMDL %CALLNAME:TARGET%因快感而颤抖着，注意到这边，脸通红
				PRINTW
				PRINTFORML 「えっ、稍微、まってぇ、%K17_喘ぎ_絶頂(K17C_受け_强行系,-1,"\n　見られながら")%」
				PRINTFORMDL %CALLNAME:TARGET%显得很慌张，但快感%K17_RS("无法停止/忍受不了/に无法忍受")%，战战兢兢地抽搐着
				PRINTFORMDL 蜷曲着有点害羞的身体绝顶了，关键的地方完全能被%CALLNAME:MASTER%看见
				PRINTFORMDL ……
				PRINTFORMDL …………
				PRINTFORMDW …………
			ENDIF
			IF FIRSTTIME("オナバレ",1) && ARG:1==1
				PRINTFORML 「嗯……这是那个……」
				PRINTFORMDL %CALLNAME:TARGET%从绝顶中恢复过来，语无伦次地开始说明
				PRINTFORML 「……不，不是这样的」
				PRINTFORML 「那个……人偶的研究？没错！然后……」
				PRINTFORMDL 我觉得这个辩解很辛苦……
			ELSEIF ARG:1==1
				PRINTFORML 「啊……不……啊……呜ー」
				PRINTFORMDL 当绝顶结束时，%CALLNAME:TARGET%把床单蒙到头上呻吟着
				PRINTFORMDL %CALLNAME:TARGET%果然是"热心研究"
				PRINTFORML 「不、不是的……」
			ENDIF
			
			
		RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 1
		;何もしない
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1==0
			IF FIRSTTIME("オナバレ",1)
				SELECTCASE K17_GRT(TARGET)
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「所以，嗯……快点出去！」
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……恩，%K17_BLUSH(2)%真是丢脸啊……」
						PRINTFORML 「%K17_CNAME()%也有部分责任……有的呢」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……诶？骗人的吧……真的要回去了……吗？」
				ENDSELECT
			ELSE
				;見たりしたりした以降
				PRINTFORML 「出、出来了！…………啊……」
				SELECTCASE K17_GRT(TARGET)
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「果然是之前被吸引了吧……」
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……哎……骗人的吧……是不是说得太过分了……」
						PRINTFORML 「还是之前被吸引了……？」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……诶？骗人的吧……真的要回去了……吗？」
						PRINTFORML 「已经……已经厌倦了吧……」
				ENDSELECT
			ENDIF
			PRINTFORML 「啊……笨蛋！」
			;自主トレがばれてアリスのプライドが下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,-1)
			RETURN 1
		ENDIF
		
		;-------------------------------------------------
		;何もしない　同居自慰
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1==1
			IF FIRSTTIME("オナバレ",1)
				SELECTCASE K17_GRT(TARGET)
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……恩，%K17_BLUSH(2)%真是丢脸啊……」
						PRINTFORML 「%K17_CNAME()%也有部分责任……有的呢」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……诶？骗人的吧……真的睡着了……「什么？」
				ENDSELECT
			ELSE
				;見たりしたりした以降
				PRINTFORML 「诶！？…………诶……」
				SELECTCASE K17_GRT(TARGET)
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……哎……骗人的吧……是不是说得太过分了……」
						PRINTFORML 「还是之前被吸引了……？」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……诶？骗人的吧……真的睡着了……「什么？」
						PRINTFORML 「已经……已经厌倦了吧……」
				ENDSELECT
			ENDIF
			PRINTFORML 「啊……笨蛋啊……」
			;自主トレがばれてアリスのプライドが下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,-1)
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 2
		;そのまま続行
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;薄い本展開だー！　アリスの女の子の身体の仕組み研究会！鑑賞編
			;見ててあげるからどうぞそのまま
			
			IF FIRSTTIME("オナバレ")
				PRINTFORML 「要……要看……？」
				PRINTFORMDL 对那个"研究"很感兴趣，所以想看一下
				PRINTFORML 「啊！」
				PRINTFORML （暴、暴露了……）
				PRINTW
				PRINTFORMDL 就当%CALLNAME:TARGET%是"热心于研究"吧
				PRINTFORML （即使是女孩子……也会有性欲……）
				PRINTFORML （有时候会偷偷地一个人……%K17_BLUSH()%）
				SIF TALENT:K17C_ID:恋慕
					PRINTFORML （而且%K17_CNAME()%也有责任……）
				PRINTW
				PRINTFORMDL 更要把「研究成果」也告诉其他的人
				PRINTFORML 「啊～～～！？！？这、这个不是能发表的东西……！」
				PRINTFORML 「呐，保密哦！秘密的研究！」
				PRINTFORML 「话说，你明明知道还捉弄人家吧！？」
				PRINTFORMDW 那么，这件事得保密……
				CALLF FIRSTTIME("オナバレ鑑賞初回")
			ELSEIF FIRSTTIME("オナバレ鑑賞初回")
				PRINTFORML 「真的……只能看……哦？」
				PRINTFORMDL 在那之前……
			ELSE
				PRINTFORML 「嘛……还想看吗……？」
				PRINTFORMDL 在那之前……
			ENDIF
			
			
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW …………
			PRINTL
			PRINTFORMW 「%CALLNAME:TARGET%的%K17_RS("一个人H/自慰/手淫/身体")%研究发表，请看吧」
			PRINTFORML 「这是最差劲的台词了。」
			
			;思慕↑追加イベ
			TRYCALL K17_オナバレ追加イベント(ARG,iRand)
			IF RESULT
				PRINTFORMDL 不由得把%CALLNAME:TARGET%紧紧地抱住了
				PRINTFORMDL 本来就颤抖的身体更上一层楼
				PRINTFORML 「哦……%K17_RS("真的触摸/真的做下去/正式地做")%是……啊，不行……哦？」
				PRINTFORMDL 坐在床上将%CALLNAME:TARGET%放在膝盖上
				PRINTFORML 「这里，%K17_RS("在这里做/想在这里做/希望在这里做")%！？」
				PRINTFORMW （这，糟糕……太近、太近了）
				
				;とりあえず今のところランダム　そのうち喘ぎタイプによって変動させる
				SELECTCASE RAND:4
					CASE 0
						PRINTFORML （dokidoki的心跳……暴露了）
						PRINTFORMDL 传来%CALLNAME:TARGET%的心脏的跳动
					CASE 1
						PRINTFORML （%K17_CNAME()%的气味……太兴奋了）
						PRINTFORMDL 传来%CALLNAME:TARGET%的香味
					CASE 2
						PRINTFORML （屁股上有%K17_CNAME()%的……硬邦邦的……碰到了）
						PRINTFORMDL %CALLNAME:TARGET%的%HIP(TARGET)%的感觉从膝盖传来
					CASE 3
						PRINTFORML （发热的身体……暴露了）
						PRINTFORMDL %CALLNAME:TARGET%变热的体温传递了过来
				ENDSELECT
				
			;思慕以上追加イベ終端
			ENDIF
			
			IF K17_RT_FG() & K17C_RTF_诶嘿嘿
				PRINTFORML （…………哎……真的，不做……吗？）
			ELSE
				PRINTFORML 「可以吗？绝对、绝对、%K17_RS("要保密/当成秘密/不要对别人说")%、所以……？」
			ENDIF
			;自主トレがばれてアリスのプライドが下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,-1)
			PRINTL
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 3
		;追い出し
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			PRINTFORML 「这样啊……最差劲了！变态！出去！」		
			;追い出し時プライドは保たれる
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 4
		;やっちゃう
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;薄い本展開だー！　アリスの女の子の身体の仕組み研究会！実技編
			;一人より二人でする方が気持ちいいよ
			;二人でおなにーの見せ合いだと思ってました
			;なのでアリスに勘違いさせとく
			
			;オナバレックス初回　鑑賞もまだ
			IF FIRSTTIME("オナバレ")
				PRINTFORML 「呼……两个人……？诶？」
				PRINTFORMDL 对那个"研究"很感兴趣，所以想一起做
				PRINTFORML 「啊！」
				PRINTFORML （这，这个被发现了……是吧？）
				PRINTW
				PRINTFORMDL 就当%CALLNAME:TARGET%是"热心于研究"吧
				PRINTFORML （即使是女孩子……也会有性欲……）
				PRINTFORML （有时候会偷偷地一个人……%K17_BLUSH()%）
				SIF TALENT:K17C_ID:恋慕
					PRINTFORML （而且%K17_CNAME()%也有责任……）
				PRINTW
				PRINTFORMDL 更要把「研究成果」也告诉其他的人
				PRINTFORML 「啊～～～！？！？这、这个不是能发表的东西……！」
				PRINTFORML 「呐，保密哦！秘密的研究！」
				PRINTFORML 「话说，你明明知道还捉弄人家吧！？」
				PRINTFORMDW 那么，这件事得保密……
				CALLF FIRSTTIME("オナバレックス初回")
			ELSEIF FIRSTTIME("オナバレックス初回")
				;オナバレックスが初、鑑賞済み
				PRINTFORML 「咦？咦！？诶！？」
				PRINTFORML 「……一起…………那个，想被看到……什么？」
				PRINTFORMDL 在那之前……
				
			ELSE
				;オナバレックス2回目以降
				PRINTFORML 「又……疯了吗……？」
				PRINTFORMDL 在那之前……
			ENDIF
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW …………
			PRINTL
			PRINTFORMW 「%CALLNAME:TARGET%的%K17_RS("一个人的H/自慰/手淫/身体")%研究，一起来吧%K17_HEART()%」
			PRINTFORML 「唔~~~~~%K17_BLUSH()%」
			
			;オナバレックス済か見る
			IF !(CFLAG:K17C_ID:K17C_CF_オナバレ追加イベ & 2)
				iRand = K17C_小悪魔受け
				iRes = 0
			ELSE
				iRes = 1
			ENDIF
			;思慕↑追加イベ
			TRYCALL K17_オナバレ追加イベント(ARG,iRand)
			;タイプ決定
			iType = K17_喘ぎタイプ_H妄想(K17C_受け,iRand)
			;初回限定　恋慕未満　無理矢理固定
			SIF iRes == 0 ||  K17_GRT() < K17C_恋慕
				iType = K17C_受け_强行系
			
			PRINTFORMDL 不由得把%CALLNAME:TARGET%紧紧地抱住了
			PRINTFORMDL 本来就颤抖的身体更上一层楼
			
			
			
			;受け妄想をそのまま実現化
			SELECTCASE iType
				;--------------------
				;誘い受け　強気受け　初回のみ小悪魔受けでこうなる　仕方ないねっ
				;--------------------
				CASE K17C_受け_强行系
					VARSET Virgin
					PRINTFORML 「哦……%K17_RS("真的触摸/真的做下去/正式地做")%是……啊，不行……哦？」
					PRINTFORMDW ……
					PRINTFORML 「两个人一起……但是啊？」
					PRINTFORMDW …………！！
					PRINTFORMW 「不行，不行，冷静点！呐？」
					PRINTFORMW 「哎呀！？」
					PRINTFORMW 「知道了！我明白了！」
					PRINTFORMW 「%K17_RS("只用手/裸着也行/那里也可以看")%！ 那就%K17_RS("用嘴/屁股/素股/胸部")%！我会为你做的！」
					PRINTFORMW 「%K17_RS("不行/不行啊")%啊啊啊啊啊，%K17_RS("不要啊/不要")%啊啊啊啊啊啊！」
					PRINTFORMDL 这难道也是妄想的延续吗……
					SIF K17_GRT(TARGET) < K17C_恋慕
						PRINTFORMW 「不是演技！不是演技！」
					IF TALENT:TARGET:処女
						PRINTFORML 「我，我还是处女！」
						;そうか大事なものなので取っておく
						Virgin = TALENT:TARGET:処女
					ENDIF
					
					;竿判定避妊要求
					SIF TALENT:MASTER:性別 >= 2 && (!CFLAG:TARGET:允许无套 && ESTRUS_CYCLE(TARGET) != 15) || (CFLAG:TARGET:允许无套 < 2 && ESTRUS_CYCLE(TARGET) == 150)
						PRINTFORML 「%K17_RS("避孕/用套")%，至少%K17_RS("避孕啊/用套啊")%！」
					;女MASTERでも処女失うのでこれであってるのか
					PRINTFORML 「真的……不可以插进去啊啊啊啊啊啊」
					
					
				;--------------------
				;姫受け　わんこ受け
				;--------------------
				CASE K17C_受け_おねだり系
					;恋慕↑
					PRINTFORML 「诶……会不会突然被袭击……」
					PRINTFORML 「喂，喂……一起……那个……只是看着……吗？」
					PRINTFORMDW %CALLNAME:TARGET%用水润的瞳孔，像是在嫉妒一样展示着性器官并扭动着腰
					PRINTFORMW 「……呃……」
					PRINTFORMW 「哎……快点，行吗？呐%K17_HEART()%　呐%K17_HEART()%」
					PRINTFORMDL 彼此用胯股之间渐渐地相互接触，从%CALLNAME:TARGET%的性器官发出了吱吱的下流声音
					PRINTFORMW 「因为要保密……随你的便，没关系？」
					;竿判定
					IF TALENT:MASTER:性別 >= 2
						PRINTFORML 「诶……啊%K17_HEART()% 插进来了%K17_HEART()%」
					ELSE
						PRINTFORML 「诶……啊%K17_HEART()%　粘在一起了%K17_HEART()%」
					ENDIF
					
					
				;--------------------
				;小悪魔受け　襲い受け
				;--------------------
				CASE K17C_受け_合意襲い系
					;また犯す気でしょ！　エロ同人のように！
					PRINTFORML 「呼……又、那个、想做吧……」
					PRINTFORMDL 这么说的同时、%CALLNAME:TARGET%时不时地向床的方向投去视线
					PRINTFORML 「哎呀！？等等、等等……%K17_BLUSH()%」
					PRINTFORMDL %CALLNAME:MASTER%本想只是轻轻地碰触，可是%CALLNAME:TARGET%却一屁股坐在床上
					PRINTFORMDL 这也就是被诱惑了吧……
					PRINTW
					PRINTFORML 「%K17_RS("衣服被弄破/在里面射出来/乱来")%的话可不行啊……」
					PRINTFORML 「绝对不会%K17_RS("屈服/输")%的」
					PRINTFORMDL 这样总觉得有点可爱
					PRINTFORMDL 就彻底的如她所说的去做吧
					
					
				;--------------------
				;健気受け
				;--------------------
				CASE K17C_受け_お手伝い系
					;責任とりえっち
					PRINTFORML 「……那个、%K17_RS("兴奋/发情")%了吗……？」
					PRINTFORML 「我，我的……原因吧？好啊……」
					PRINTDATADL
						DATAFORM %CALLNAME:TARGET%は背を向けると、\@TEQUIP:下半身着衣状況 & 1?%K17_GET_SKIRT(TARGET)%をめくって#\@お尻を突き出し壁に手をついた
						DATAFORM %CALLNAME:TARGET%は胸元のボタンを外すと、谷間を作って%CALLNAME:MASTER%に跪いた
						DATAFORM %CALLNAME:TARGET%はベッドに寝そべると、\@TEQUIP:下半身着衣状況 & 1?%K17_GET_SKIRT(TARGET)%をめくって#\@%K17_RS("両足を開いた/両足をＭ字に開いた/片足を持ち上げて股を開いた")%
					ENDDATA
					PRINTFORML 「能负责的话……随你喜欢吧？
					PRINTFORMDL 那声音听起来很开心……
					
			ENDSELECT
			
			PRINTL
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 5
		;事後
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;処女喪失、恋慕未満、初回はここ入る
			IF (TALENT:TARGET:処女 == 0 && Virgin == 1) || K17_GRT(TARGET) < K17C_恋慕 || iRes == 0
				IF TALENT:TARGET:処女 == 0 && Virgin == 1
					;おきのどくですが処女が失われた場合
					PRINTFORML 「……这样……太过分了……呜……」
					PRINTFORML 「真的……明明是第一次……呜……」
				ENDIF
				PRINTFORML 「之前只是……明明说了……」
				PRINTFORML 「最差劲了……呜……呜……」
				PRINTFORML （这样最差劲……非常……心情……太好了……这样啊，真差劲……）
				PRINTW
				PRINTFORMDL 果然做得太过了吧
				IF K17_GRT(TARGET) >= K17C_思慕
					PRINTFORML 「……呃……下次好好地做，好吗？」
					;天使か
				ELSE
					PRINTFORML 「快点出去……」
				ENDIF
				Virgin = 0
				
			;そのうちここで感想をプレイヤーに訊いてタイプチョイスの仕方を変えるか
			ELSEIF K17_GRT(TARGET) >= K17C_恋慕
				SELECTCASE iType
					CASE K17C_受け_强行系
						PRINTFORML 「哈哈……很厉害%K17_HEART()%」
						PRINTFORML 「但是这个……如果习惯了怎么办呢……」
						PRINTFORMDL 彼此都觉得太激动了……
						
					CASE K17C_受け_おねだり系
						PRINTFORML 「哈哈……啊……」
						PRINTFORML 「被侵犯了呢%K17_HEART()%」
						PRINTFORMDL 到底侵犯了什么……
						
					CASE K17C_受け_合意襲い系
						PRINTFORML 「哈哈……我输了%K17_HEART()%」
						PRINTFORML 「太兴奋了……已经……」
						PRINTFORMDL 话虽如此，却显得很高兴……
						
					CASE K17C_受け_お手伝い系
						PRINTFORML 「已经满足了……？真是太随心所欲了……」
						PRINTFORML 「但是总觉得有点可爱啊？」
						PRINTFORMDL 这样说着抬头仰视%CALLNAME:MASTER%的%CALLNAME:TARGET%妖艳而可爱
				ENDSELECT
			ENDIF
			
			;一回セットしてフラグ保存
			CALL K17_SET_AUTO_PVOICE(,,iType)
			;自主トレがばれてアリスのプライド 態度が下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,-2)
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_態度,-2)
			RETURN 1
		ENDIF
	ENDSELECT
ENDIF
RETURN 0


;==================================================
;相手からデートのお誘い
;==================================================
@M_KOJO_EVENT_K17_27(ARG,ARG:1)
;口上主はLOCAL
;ARG:1は目的地
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SELECTCASE ARG
		;誘い文句
		CASE 0
			IF CFLAG:K17C_ID:K17C_CF_约会イベント && CFLAG:K17C_ID:K17C_CF_告白イベント
				PRINTFORML 「喂，下次再一起约吧？」
			ELSEIF CFLAG:K17C_ID:K17C_CF_约会イベント
				PRINTFORML 「喂，如果不讨厌的话，我们再约吧？」
			ELSE
				PRINTFORML 「喂……偶尔也去外面玩玩吧？」
			ENDIF
			PRINTL
		;受けた
		CASE 1
			PRINTFORML 「那我们赶紧去吧。」
			PRINTW
		;断った
		CASE 2
			PRINTFORML 「哎呀，你有什么事吗？那么，下次再见吧……」
			PRINTW
	ENDSELECT
ENDIF
RETURN 1

;==================================================
;脱衣口上
;==================================================
@M_KOJO_EVENT_K17_28(ARG,ARG:1)
#DIM DYNAMIC iRand = 0
;口上主はTARGET
;ARGに脱がし方選択
;ARG:1（ARG=3の場合のみあり）地の文の反応
;--------------------------------------------------
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
;時間停止
;通常処理
LOCAL = 1
;-------------
IF LOCAL && FLAG:時間停止
	RETURN 1
ENDIF
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
;泥酔時
;通常処理
LOCAL = 1
;-------------
IF LOCAL && TCVAR:TARGET:烂醉
	PRINTFORML 「……嗯……好热啊……脱掉吧……啊哈哈」
	PRINTFORML （哎呀……这样好吗……嗯……算了）
	PRINTW
	RETURN 1
ENDIF
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
;睡眠時時
;通常処理
LOCAL = 1
;-------------
IF LOCAL && CFLAG:睡眠
	PRINTFORML 「%K17_SHUFFLE_寝言(K17_RS("呀/嗯/呜"))%」
	PRINTW
	RETURN 1
ENDIF
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
;時間停止　泥酔以外
;通常処理　合意系
LOCAL = 1
;-------------
IF LOCAL && !(CFLAG:K17C_CF_喘ぎタイプ & K17C_喘ぎF_襲い)

	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;全裸にする
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示開始
			;------------------
			PRINTFORML 「全部……脱下来了……」
			
			;初回　0反応固定
			IF FIRSTTIME("脱衣-全裸")
				;性別判定
				IF TALENT:MASTER:性別 == 2
					PRINTFORML （是男人啊……居然要把这些全都给他看……又讨厌又害羞……）
				ELSE
					PRINTFORML （是女人啊……即使被看见了……也不要紧……是吧……？）
				ENDIF
				iRand = 1
			ENDIF
			
		ENDIF
		;-------------------------------------------------
		CASE 1
		;下着姿にする
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示開始
			;------------------
			PRINTFORML 「衣服……脱下来了……」
			
			;初回　0反応固定
			IF FIRSTTIME("脱衣-内衣姿")
				;性別判定
				IF TALENT:MASTER:性別 == 2
					;既に全裸見てるか見る
					SIF FIRSTTIME("脱衣-全裸",1)
						PRINTFORML （是男人啊……居然让他看到那里……又讨厌又害羞……）
				ELSE
					PRINTFORML （因为是女人……如果只是内衣的话，就算被别人看到……不要紧……是吧……？）
				ENDIF
				iRand = 1
			ENDIF
		ENDIF
		;-------------------------------------------------
		CASE 2
		;半脱ぎ
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示開始
			;------------------
			PRINTFORML 「嗯……只脱内衣……？总觉得有点奇怪」
			;初回　0反応固定
			IF FIRSTTIME("脱衣-半脱")
				;性別判定
				IF TALENT:MASTER:性別 == 2
					PRINTFORML （被男人……居然能看到这样的打扮……真丢脸啊……）
				ELSE
					PRINTFORML （因为是女人……如果只是内衣的话，就算被别人看到……不要紧……是吧……？）
				ENDIF
				iRand = 1
			ENDIF
		ENDIF
		;-------------------------------------------------
		CASE 3
		;パンツちょうだい
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			PRINTFORMDL 对于老实地脱光的%CALLNAME:TARGET%、%CALLNAME:MASTER%，传达了想要胖次的想法
			
			;パンツ没収時に説明を受けているか見る
			IF FIRSTTIME("胖次没収",1) && FIRSTTIME("脱衣-胖次獲得")
				PRINTFORML 「嗯……为什么想要内衣呢？」
				PRINTFORMDL 那是因为……嗯……
				PRINTFORMDL %CALLNAME:MASTER%对于为什么想要内衣，开始向%CALLNAME:TARGET%解释了
				PRINTFORMDL ……
				PRINTFORMDL …………
				PRINTFORMDW …………
				PRINTFORML 「嘿，嘿……非常好的爱好？你在说什么」
				PRINTW
			ELSE
				PRINTFORML 「果然……那个……想要……」
				PRINTFORML （这……这个……就是所说的用我的内衣做各种各样的%K17_RS("妄想/想像")%吧）
				PRINTW
			ENDIF
			SELECTCASE ARG:1
				;-------------------------------------------------
				CASE 0
				;交換です
				;記入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTFORMDL 为什么%CALLNAME:TARGET%也想要内衣呢……
					PRINTFORML 「为……为了研究制作人偶哟」
					PRINTFORMDL 啊，原来如此。是"研究材料"
					;オナバレをしっかり見られたことがあるか見る
					IF FIRSTTIME("オナバレ",1)
						PRINTFORMDL 被那样看穿，%CALLNAME:TARGET%脸颊变得通红低下了头
					ELSE
						PRINTFORMDL %CALLNAME:TARGET%拿起%CALLNAME:MASTER%的内衣红着脸认真地凝视着
					ENDIF
					PRINTFORML （对不起，我撒谎了。这个……%K17_RS("是骗来/是用来/是用作素材来")%%K17_RS("手淫的/做一个人的H/做H的妄想")%……呀）
				ENDIF
				;-------------------------------------------------
				CASE 1
				;OK（嬉々
				;記入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「それで……なにする気なのよ……%K17_RS("えっち/すけべ/変態")%……%K17_BLUSH()%」
						DATAFORM 「別にいいけど……本物がこっちにいるんだから……ね？%K17_HEART()%」
						DATAFORM 「ねえ、もう内衣はいいから……私のことももっと%K17_RS("欲しがって/可愛がって")%？　ね？%K17_HEART()%」
					ENDDATA
				ENDIF
				;-------------------------------------------------
				CASE 2
				;OK（渋々
				;記入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「あまり変なことに使っちゃダメ……%K17_RS("よ/なんだからね/だらかね")%……」
						DATAFORM 「まあいいけど……っ～～！！　なに匂い嗅ごうとしてるのよっ、%K17_RS("やめて/ダメだ/ヤだ")%ったらっ」
						DATAFORM 「こんなもので、そこまで%K17_RS("必死/懸命")%にならないでよっ、恥ずかしい……」
					ENDDATA
				ENDIF
				;-------------------------------------------------
				CASE 3
				;嫌です
				;記入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「%K17_RS("ダメ/いや/やぁ")%よ……それよりちゃんと私を%K17_RS("構いなさい/可愛がりなさい/欲しがりなさい")%よ……%K17_BLUSH()%」
						DATAFORM 「洗わずそのままだなんて……流石に稍微%K17_RS("引くわね/イヤよ/……")%」
					ENDDATA
				ENDIF
			ENDSELECT
			PRINTW
			RETURN 1
		ENDIF
	ENDSELECT
	
	;局部見せ描写
	IF ARG != 3 
		;露出判定　恥じらいは持っておこう
		;露出癖見る
		IF iRand == 0
			iRand = K17_LOWER_LIMIT_RAND(ABL:露出癖,1,5)
		ELSE
			;初回
			iRand = 0
		ENDIF
		SELECTCASE iRand
			CASE IS >= 5
				PRINTFORMDL %CALLNAME:TARGET%挺起胸膛展示%NIPPLE_DESCRIPTION(TARGET,1)%的同时，轻轻地张开双腿
				PRINTFORML 「接下来该怎么办呢……%K17_HEART()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%张开双腿，向%CALLNAME:MASTER%展示
				PRINTFORML （被那样%K17_RS("厉害的/H的/野兽般的")%眼睛看着的话……%K17_RS("兴奋了/湿了/发情了/被挑动起来了")%……）
				PRINTFORMDL 然后用出神的眼神贴近%CALLNAME:MASTER%，用视线能及的地方挑衅着。
				PRINTFORMDL %CALLNAME:TARGET%兴奋得呼吸急促
				
			CASE IS >= 3
				PRINTFORMDL %CALLNAME:TARGET%虽然没有掩饰%NIPPLE_DESCRIPTION(TARGET,1)%，但腿却被有点害羞地闭合着
				PRINTFORML 「啊，%K17_RS("像是要吃掉一样地/用饥渴的野兽般的眼神/用闪闪发光的眼睛")%看着，%K17_RS("H/下流/変態")%%K17_HEART()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%轻轻地叹了口气，慢慢地张开双腿向%CALLNAME:MASTER%展示
				PRINTFORML （%K17_RS("用H的眼神看着我/兴奋的样子/很享受地看着")%……稍微有点开心……）
				PRINTFORMDL 像是在煽动似的展示的同时，也摆出各种姿势
				PRINTFORMDL %CALLNAME:TARGET%兴奋得呼吸急促
				
			CASE IS >= 1
				;胸が見えているか見る
				IF ARG != 1
					PRINTFORMDL %CALLNAME:TARGET%害羞地将双腿合住，用手遮住了%OPPAI_DESCRIPTION(TARGET,1)%，但却能隐约看见%NIPPLE_DESCRIPTION(TARGET,1)%
				ELSE
					IF TALENT:胸圍 >= 0
						PRINTFORMDL %CALLNAME:TARGET%害羞地将双腿合住，用手遮住了%OPPAI_DESCRIPTION(TARGET,1)%，但%K17_GET_CLOTHNAME_TOP_UNDER(TARGET)%乳沟却鲜明地浮现出来。
					ELSE
						PRINTFORMDL %CALLNAME:TARGET%害羞地将双腿合住，用手遮住了%OPPAI_DESCRIPTION(TARGET,1)%，但却从%K17_GET_CLOTHNAME_TOP_UNDER(TARGET)%的缝隙中隐约看见了%NIPPLE_DESCRIPTION(TARGET,1)%
					ENDIF
				ENDIF
				PRINTFORML 「看、看得太多了……%K17_BLUSH()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%紧闭双眼转过身来，害羞得颤抖着打开了双腿
				PRINTFORML （啊……现在%K17_RS("被看到了/被看着了")%……吧？ 好厉害……%K17_RS("心跳扑通扑通的/兴奋了/有种莫名的心情")%）
				PRINTFORMDL %CALLNAME:TARGET%紧张得呼吸急促起来
			CASEELSE
				PRINTFORMDL %CALLNAME:TARGET%害羞地将双腿合住，用手紧紧隐藏着%OPPAI_DESCRIPTION(TARGET,1)%
				PRINTFORML 「果然，那个，太害羞了……%K17_BLUSH()%」
				PRINTW
				PRINTFORMDL %CALLNAME:MASTER%抓住困惑的%CALLNAME:TARGET%的双脚，就这样打开了
				PRINTFORML （我的%K17_CALL_P(K17C_部位V)%……被看见了……被%K17_CNAME()%、%K17_RS("很吓人的/好色的/兴奋的")%眼睛……看着……）
				PRINTFORMDL %CALLNAME:TARGET%在紧张吗，身体在颤抖，呼吸很粗重
		ENDSELECT
	ENDIF
	PRINTW
	RETURN 1
ENDIF


;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
;時間停止　泥酔以外
;通常処理　襲い系or無理矢理フラグ
LOCAL = 1
;-------------
IF LOCAL && CFLAG:K17C_CF_喘ぎタイプ & K17C_喘ぎF_襲い
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0,1,2
		;全裸にする
		;下着姿にする
		;半脱がし
		;-------------------------------------------------
		PRINTFORMDL %CALLNAME:MASTER%把%K17_RS("不情愿的/胡闹的/想逃走的")%%CALLNAME:TARGET%抓住了，%K17_RS("强行地/强制地/粗鲁地")%%K17_RS("脱下/扯掉/剥下")%衣服
		PRINTFORML 「%K17_RS("……/哼、")%对女孩子\@TEQUIP:拘束||TEQUIP:縄?拘束して#霸王硬上弓\@强行脱掉衣服……%K17_RS("最糟糕/変態/色狼")%%K17_AP_DEC(1)%」
		;-------------------------------------------------
		CASE 3
		;パンツちょうだい
		;-------------------------------------------------
		SELECTCASE ARG:1
			;-------------------------------------------------
			CASE 0
			;交換
			;-------------------------------------------------
			PRINTFORML 「不、不需要……%K17_RS("最糟糕/変態/色狼")%%K17_AP_DEC(1)%」
			;-------------------------------------------------
			CASE 1,2
			;OK（嬉々
			;OK (渋々
			;-------------------------------------------------
			PRINTFORML 「%K17_RS("随你喜欢/随你便")%，%K17_RS("最糟糕/変態/色狼")%%K17_AP_DEC(1)%」
			;-------------------------------------------------
			CASE 3
			;拒否
			;-------------------------------------------------
			PRINTFORML 「哎呀……%K17_RS("最糟糕/変態/色狼")%%K17_AP_DEC(1)%」
		ENDSELECT
	ENDSELECT
	PRINTW
ENDIF
RETURN 1

;==================================================
;怒り口上
;==================================================
@M_KOJO_EVENT_K17_29(ARG,ARG:1)
;口上主はTARGET
;ARGはTARGETの度胸で分岐
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:時間停止 && !CFLAG:TARGET:睡眠
	PRINTL
	
	;-------------------------------------------------
	;うふふ中
	;-------------------------------------------------
	;無理矢理フラグ見る
	IF CFLAG:TARGET:诶嘿嘿
		CALL K17_强行中出し(TARGET)
		IF RESULT
			PRINTW
			RETURN 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;怒らせてしまった
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		SELECTCASE K17_GRT()
			CASE IS >= K17C_思慕
				PRINTFORML 「……嗯，有点%K17_RS("不舒服/做过头")%了，互相都让脑袋冷静下吧」
				PRINTFORM 「我也是%K17_RS("会生气的/会生气的呢")%」
				TRYCALL K17_人形台詞(-1,1,K17_RS("バカジャネーノ/オコルゾー/プンプン"))
			CASEELSE
				PRINTFORM 「……哎呀，稍微有点过分了」
				TRYCALL K17_人形台詞(-1,1,K17_RS("バカジャネーノ/オコルゾー/プンプン"))
		ENDSELECT
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;泣かせてしまった
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「%K17_SPLIT_SHUFFLE(@"%K17_RS("呼/欸/哎/呜/咕咻","/",2)%/……/……/%RESULTS:1%")%」
		TRYCALL K17_人形台詞(-1,1,K17_RS("愛麗絲/ナクナヨ/ナミダ　フケ/ヨシヨシ")+"……")
		PRINTW
		RETURN 1
	ENDIF
ENDIF
RETURN 1


