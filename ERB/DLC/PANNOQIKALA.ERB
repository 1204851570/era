@PANNOQIKALA_PANTS_CAPTURE(ARG)
IF PANTSNAME(EQUIP:ARG:6,ARG) == "没穿内裤"
	RETURN 0
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "四角裤"
	RETURN 1
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "襯褲"
	RETURN 2
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "小熊胖次"
	RETURN 3
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "波点胖次"
	RETURN 4
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "條紋胖次"
	RETURN 5
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "褶邊胖次"
	RETURN 6
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "純色胖次"
	RETURN 7
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "低腰胖次"
	RETURN 8
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "低腰緊身胖次"
	RETURN 9
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "高開叉胖次"
	RETURN 10
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "蕾絲胖次（白）"
	RETURN 11
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "蕾絲胖次（黒）"
	RETURN 12
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "Ｔ字褲"
	RETURN 13
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "繩系胖次"
	RETURN 14
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "皮革胖次"
	RETURN 15
;ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "%UNIQUE_UNDERWARE_BOTTOM(ARG)%"
;	RETURN 16
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "三角胖次"
	RETURN 17
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "超短胖次"
	RETURN 18
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "兜襠布"
	RETURN 19
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "丁字褲"
	RETURN 20
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "透明胖次"
	RETURN 21
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "開放式胖次"
	RETURN 22
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "創口貼"
	RETURN 23
ELSEIF PANTSNAME(EQUIP:ARG:6,ARG) == "拉链（屁股处可开）"
	RETURN 24
ELSE
	RETURN 16
ENDIF

@PANNOQIKALA_REVEAL_OUTPUT(OPPONENT)
#DIM OPPONENT

IF CFLAG:OPPONENT:下半身内衣確認 == 1
	CALL PANNOQIKALA_PANTS_CAPTURE(OPPONENT)
	SELECTCASE RESULT
		CASE 0
			SETCOLOR C_RED
			PRINTFORML 【没穿胖次】使对手的胖次之力和胖次波动变成0。  ————无，才是最强
		CASE 1
			SETCOLOR C_YELLOW
			PRINTFORML 【四角裤】胖次之力+100，胖次波动+100。
			PRINTFORML 【男性向胖次】对战时，强化自身的胖次之力（小幅度）和胖次波动（小幅度）。
			PRINTFORML 【初心者向】残机数量+1。
		CASE 2
			SETCOLOR C_YELLOW
			PRINTFORML 【襯褲】胖次之力+300。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			PRINTFORML 【朴实无华】不会被对手削弱，除非对手没穿胖次。
		CASE 3
			SETCOLOR C_YELLOW
			PRINTFORML 【小熊胖次】胖次之力+300。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			PRINTFORML 【あ~熊の力】对战开始时，随机增加自身0~1000胖次之力。
		CASE 4
			SETCOLOR C_YELLOW
			PRINTFORML 【波点胖次】胖次波动+300。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			PRINTFORML 【波粒二象性】对战开始时，增加自身的胖次之力（等同于自身的胖次波动，最大1000）。
		CASE 5
			SETCOLOR C_YELLOW
			PRINTFORML 【條紋胖次】胖次之力+300。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			SETCOLOR C_P_PURPLE
			PRINTFORML 【蓝！白！碗！】对战时，中等概率发动强大的攻击（优先度高于乾坤一掷）。
		CASE 6
			SETCOLOR C_YELLOW
			PRINTFORML 【褶邊胖次】胖次波动+300。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			SETCOLOR C_P_PURPLE
			PRINTFORML 【sha↑bi↓】对战时，削弱对手的胖次之力（大幅度），强化对手的胖次波动（小幅度）。
		CASE 7
			SETCOLOR C_YELLOW
			PRINTFORML 【純色胖次】胖次之力+300。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			PRINTFORML 【随机色】对战开始时，随机增加自身500胖次之力或500胖次波动。
		CASE 8
			SETCOLOR C_YELLOW
			PRINTFORML 【低腰胖次】胖次之力+200，胖次波动+200。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			PRINTFORML 【尽情露出小腹吧】对战时，强化自身的胖次之力（中幅度）和胖次波动（中幅度）。
		CASE 9
			SETCOLOR C_YELLOW
			PRINTFORML 【低腰緊身胖次】胖次之力+200，胖次波动+200。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			PRINTFORML 【对工口】不会被情趣内衣的效果削弱；对战情趣内衣时，胖次之力+500，胖次波动+500。
		CASE 10
			SETCOLOR C_YELLOW
			PRINTFORML 【高開叉胖次】胖次之力+300。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			SETCOLOR C_YELLOW
			PRINTFORML 【NOPAN？】对战时，随机强化自身的胖次之力（小幅度/中幅度/大幅度）。
		CASE 11
			SETCOLOR C_YELLOW
			PRINTFORML 【蕾絲胖次（白）】胖次波动+500。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			SETCOLOR C_YELLOW
			PRINTFORML 【白恶魔的庇护】对战时，强化自身的胖次之力（中幅度）；残机数量+1。
		CASE 12
			SETCOLOR C_YELLOW
			PRINTFORML 【蕾絲胖次（黒）】胖次之力+500。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			SETCOLOR C_YELLOW
			PRINTFORML 【黑恶魔的庇护】对战时，强化自身的胖次波动（中幅度）；残机数量+1。
		CASE 13
			SETCOLOR C_YELLOW
			PRINTFORML 【Ｔ字褲】胖次之力+200，胖次波动+200。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			PRINTFORML 【想拨开吗？】对战时，削弱对手的胖次之力（中幅度）和胖次波动（小幅度）。
		CASE 14
			SETCOLOR C_YELLOW
			PRINTFORML 【繩系胖次】胖次之力+200，胖次波动+200。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			PRINTFORML 【轻轻一拉】对战时，削弱对手的胖次之力（小幅度）和胖次波动（中幅度）。
		CASE 15
			SETCOLOR C_YELLOW
			PRINTFORML 【皮革胖次】胖次之力+200，胖次波动+200。
			PRINTFORML 【内衣？】对战时，强化自身的胖次波动（大幅度）。
			SETCOLOR C_P_PURPLE
			PRINTFORML 【调教时间！】对战时，小概率发动超强大的攻击（优先度高于乾坤一掷）。
		CASE 16
			SETCOLOR C_YELLOW
			PRINTFORML 【专属胖次！】胖次之力+1000，胖次波动+1000。
			PRINTFORML 【自信少女！】对战时，强化自身的胖次波动（超大幅度）。
			PRINTFORML 【唯心主义！】不会被对手削弱，除非对手没穿胖次；残机数量+1。
		CASE 17
			SETCOLOR C_YELLOW
			PRINTFORML 【三角胖次】胖次之力+300，胖次波动+300。
			PRINTFORML 【清纯系】对战时，强化自身的胖次之力（小幅度）；残机数量+1。
			PRINTFORML 【黄金比例】胖次之力+（500+自身的教养等级*100）。
		CASE 18
			SETCOLOR C_YELLOW
			PRINTFORML 【超短胖次】胖次之力+300，胖次波动+300。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			SETCOLOR C_YELLOW
			PRINTFORML 【完美遮掩】不会被对手削弱，除非对手没穿胖次。
		CASE 19
			SETCOLOR C_YELLOW
			PRINTFORML 【兜襠布】对战时，强化自身的胖次波动（小幅度）。
			PRINTFORML 【内衣？】对战时，强化自身的胖次波动（大幅度）。
			PRINTFORML 【有利健康……】残机数量+2。
		CASE 20
			SETCOLOR C_YELLOW
			PRINTFORML 【丁字褲】胖次之力+200，胖次波动+200。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			SETCOLOR C_YELLOW
			PRINTFORML 【勒住……】对战开始时，增加自身的胖次之力（等同于自身的胖次之力，最大1000）。
		CASE 21
			SETCOLOR C_YELLOW
			PRINTFORML 【透明胖次】胖次波动+500。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			SETCOLOR C_P_PURPLE
			PRINTFORML 【透明人间】对战时，大概率发动比平时更强的攻击（优先度高于乾坤一掷）。
		CASE 22
			SETCOLOR C_YELLOW
			PRINTFORML 【開放式胖次】胖次之力+500。
			SETCOLOR C_P_BLUE
			PRINTFORML 【情趣内衣】对战清纯系内衣时，削弱对手的胖次之力（中幅度）和胖次波动（中幅度）。
			SETCOLOR C_YELLOW
			PRINTFORML 【为性而生】胖次之力+（500+自身的欲望等级*100）。
		CASE 23
			SETCOLOR C_YELLOW
			PRINTFORML 【創口貼】胖次之力+1000。
			PRINTFORML 【内衣？】对战时，强化自身的胖次波动（大幅度）。
			SETCOLOR C_P_BLUE
			PRINTFORML 【我好兴奋啊】对战时，削弱对手的胖次之力（中幅度）。
		CASE 24
			SETCOLOR C_YELLOW
			PRINTFORML 【拉链（屁股处可开）】胖次波动+500。
			PRINTFORML 【内衣？】对战时，强化自身的胖次波动（大幅度）。
			SETCOLOR C_P_BLUE
			PRINTFORML 【禁忌の拉链】对战时，削弱对手的胖次之力（大幅度）。
	ENDSELECT
ELSE
	SETCOLOR C_RED
	PRINTFORML 【？？？？？】？？？？？？？？？？？  ————你对胖次，一无所知
ENDIF
RESETCOLOR



@PANNOQIKALA_BATTLE(OPPONENT)
#DIM OPPONENT
#DIM 敌力
#DIM 敌波动
#DIM 敌力强化
#DIM 敌波动强化
#DIM 敌力削弱
#DIM 敌波动削弱
#DIM 敌没穿胖次
#DIM 敌削弱抗性
#DIM 敌特殊技能
#DIM 敌残机
#DIM 敌类型
#DIM 己力
#DIM 己波动
#DIM 己力强化
#DIM 己波动强化
#DIM 己力削弱
#DIM 己波动削弱
#DIM 己没穿胖次
#DIM 己削弱抗性
#DIM 己特殊技能
#DIM 己残机
#DIM 己类型

;类型 0=其他，1=情趣，2=清纯
;削弱抗性 0=无，1=不被削弱，2=对工口
;特殊技能 0=无，1=蓝白碗，2=调教时间，3=透明人间

CALL PANNOQIKALA_VALUE(OPPONENT)
敌力 = RESULT:0
敌波动 = RESULT:1
敌力强化 = RESULT:2
敌波动强化 = RESULT:3
敌力削弱 = RESULT:4
敌波动削弱 = RESULT:5
敌没穿胖次 = RESULT:6
敌削弱抗性 = RESULT:7
敌特殊技能 = RESULT:8
敌残机 = RESULT:9
敌类型 = RESULT:10

CALL PANNOQIKALA_VALUE(0)
己力 = RESULT:0
己波动 = RESULT:1
己力强化 = RESULT:2
己波动强化 = RESULT:3
己力削弱 = RESULT:4
己波动削弱 = RESULT:5
己没穿胖次 = RESULT:6
己削弱抗性 = RESULT:7
己特殊技能 = RESULT:8
己残机 = RESULT:9
己类型 = RESULT:10

IF 己类型 == 1 && 敌类型 == 2
	IF 敌削弱抗性 == 2
		敌力 += 500
		敌波动 += 500
		己力削弱 = 0
		己波动削弱 = 0
	ELSE
		己力削弱 += 3/10
		己波动削弱 += 4/10
	ENDIF
ENDIF
IF 敌类型 == 1 && 己类型 == 2
	IF 己削弱抗性 == 2
		己力 += 500
		己波动 += 500
		敌力削弱 = 0
		敌波动削弱 = 0
	ELSE
		敌力削弱 += 3/10
		敌波动削弱 += 4/10
	ENDIF
ENDIF
IF 敌削弱抗性 == 1
	己力削弱 = 0
	己波动削弱 = 0
ENDIF
IF 己削弱抗性 == 1
	敌力削弱 = 0
	敌波动削弱 = 0
ENDIF
IF 己没穿胖次 == 1
	敌力 = 0
	敌波动 = 0
ENDIF
IF 敌没穿胖次 == 1
	己力 = 0
	己波动 = 0
ENDIF

敌力 = 敌力 * (1 + 敌力强化 - 己力削弱)
敌波动 = 敌波动 * (1 + 敌波动强化 - 己波动削弱)
己力 = 己力 * (1 + 己力强化 - 敌力削弱)
己波动 = 己波动 * (1 + 己波动强化 - 敌波动削弱)

RETURN 敌力, 己力, 敌波动, 己波动, 敌特殊技能, 己特殊技能, 敌残机, 己残机



@PANNOQIKALA_VALUE(OPPONENT)
#DIM OPPONENT
#DIM 力
#DIM 波动
#DIM 力强化
#DIM 波动强化
#DIM 力削弱
#DIM 波动削弱
#DIM 没穿胖次
#DIM 削弱抗性
#DIM 特殊技能
#DIM 残机
#DIM 类型

力 = PANGCISTAUS:0:OPPONENT
波动 = PANGCISTAUS:1:OPPONENT
力强化 = 0
波动强化 = 0
力削弱 = 0
波动削弱 = 0
没穿胖次 = 0
削弱抗性 = 0
特殊技能 = 0
残机 = 0
类型 = 0

CALL PANNOQIKALA_PANTS_CAPTURE(OPPONENT)
SELECTCASE RESULT
	CASE 0
		没穿胖次 = 1
	CASE 1
		力 += 100
		波动 += 100
		力强化 = 1/10
		波动强化 = 2/10
		残机 = 1
	CASE 2
		力 += 300
		力强化 = 1/10
		削弱抗性 = 1
		残机 = 1
		类型 = 2
	CASE 3
		力 += (300 + (RAND:100) * 10)
		力强化 = 1/10
		残机 = 1
		类型 = 2
	CASE 4
		波动 += 300
		IF 波动 > 1000
			力 += 1000
		ELSE
			力 += 波动
		ENDIF
		力强化 = 1/10
		残机 = 1
		类型 = 2
	CASE 5
		力 += 300
		力强化 = 1/10
		残机 = 1
		特殊技能 = 1
		类型 = 2
	CASE 6
		波动 += 300
		力强化 = 1/10
		力削弱 = 5/10
		波动削弱 = -2/10
		残机 = 1
		类型 = 2
	CASE 7
		SELECTCASE RAND:2
			CASE 0
				力 += 800
			CASE 1
				力 += 300
				波动 += 500
		ENDSELECT
		力强化 = 1/10
		残机 = 1
		类型 = 2
	CASE 8
		力 += 200
		波动 += 200
		力强化 = 4/10
		波动强化 = 4/10
		残机 = 1
		类型 = 2
	CASE 9
		力 += 200
		波动 += 200
		削弱抗性 = 2
		力强化 = 1/10
		残机 = 1
		类型 = 2
	CASE 10
		力 += 300
		类型 = 1
		SELECTCASE RAND:3
			CASE 0
				力强化 = 1/10
			CASE 1
				力强化 = 3/10
			CASE 2
				力强化 = 5/10
		ENDSELECT
	CASE 11
		波动 += 500
		类型 = 1
		残机 = 1
		力强化 = 3/10
	CASE 12
		力 += 500
		类型 = 1
		残机 = 1
		波动强化 = 4/10
	CASE 13
		力 += 200
		波动 += 200
		类型 = 1
		力削弱 = 3/10
		波动削弱 = 2/10
	CASE 14
		力 += 200
		波动 += 200
		类型 = 1
		力削弱 = 1/10
		波动削弱 = 4/10
	CASE 15
		力 += 200
		波动 += 200
		波动强化 = 6/10
		特殊技能 = 2
	CASE 16
		力 += 1000
		波动 += 1000
		波动强化 = 8/10
		削弱抗性 = 1
		残机 = 1
	CASE 17
		力 += 300
		波动 += (800 + ABL:OPPONENT:43 * 100)
		力强化 = 1/10
		残机 = 1
		类型 = 2
	CASE 18
		力 += 300
		波动 += 300
		类型 = 1
		削弱抗性 = 1
	CASE 19
		波动强化 = 8/10
		残机 = 2
	CASE 20
		力 += 200
		波动 += 200
		IF 力 > 1000
			力 += 1000
		ELSE
			力 += 力
		ENDIF
		类型 = 1
	CASE 21
		波动 += 500
		类型 = 1
		特殊技能 = 3
	CASE 22
		力 += 500
		类型 = 1
		力 += (ABL:OPPONENT:11 * 100)
	CASE 23
		力 += 500
		波动强化 = 6/10
		波动削弱 = 4/10
	CASE 24
		波动 += 500
		波动强化 = 6/10
		力削弱 = 5/10
ENDSELECT
RETURN 力, 波动, 力强化, 波动强化, 力削弱, 波动削弱, 没穿胖次, 削弱抗性, 特殊技能, 残机, 类型



@PANNOQIKALA_ABL(ARG)

SELECTCASE RAND:2
	CASE 0
		IF PANGCISTAUS:0:ARG >= 3000 && PANGCISTAUS:0:ARG < 5000 
			PRINTFORML ……%CALLNAME:ARG%似乎触摸到了胖次之力的极限！
			PRINTFORML %CALLNAME:ARG%掌握了胖次之力的奥义！
			PANGCISTAUS:0:ARG = 5000
		ELSE
			PANGCISTAUS:0:ARG += (ABL:ARG:戦闘能力 * 10)
		ENDIF
	CASE 1
		IF PANGCISTAUS:1:ARG >= 3000 && PANGCISTAUS:1:ARG < 5000 
			PRINTFORML ……%CALLNAME:ARG%似乎触摸到了胖次波动的极限！
			PRINTFORML %CALLNAME:ARG%掌握了胖次波动的奥义！
			PANGCISTAUS:1:ARG = 5000
		ELSE
			PANGCISTAUS:1:ARG += (ABL:ARG:戦闘能力 * 10)
		ENDIF
ENDSELECT