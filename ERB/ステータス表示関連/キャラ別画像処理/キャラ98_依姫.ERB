;*******************************************************************************************************
;キャラクター画像表示用
;キャラクター毎の表情差分等はここで行うようにする。
;*******************************************************************************************************
@キャラ表示98(ターゲット番号)
#DIM ターゲット番号
#DIMS リソース名
#DIMS リソース名_マウスオーバー
#DIM キャラ番号
#DIM 裸なう

リソース名 =
リソース名_マウスオーバー =
キャラ番号 = 98
;表情変化条件と表示
;================================================================
裸なう = (!TEQUIP:キャラ番号:上半身着衣状況 || BATHROOM(CFLAG:キャラ番号:現在位置))
IF !FLAG:立絵種類
	;立ち絵表示の時
	;================================================================}
	IF TALENT:(キャラ番号):心情 == -1 || CFLAG:(キャラ番号):ブチギレ
		;怒ってる時
		IF 裸なう
			リソース名 = 立絵_裸_憤怒_{キャラ番号}
		ELSE
			リソース名 = 立絵_服_憤怒_{キャラ番号}
			;マウスオーバー時
			IF ABL:キャラ番号:親密 >= 5
				リソース名_マウスオーバー = 立絵_服_通常_{キャラ番号}
			ELSE
				リソース名_マウスオーバー = 立絵_服_憤怒_{キャラ番号}
			ENDIF
		ENDIF
	ELSEIF TALENT:キャラ番号:心情 == 1 || BASE:キャラ番号:情緒 == MAXBASE:キャラ番号:情緒 || TCVAR:キャラ番号:烂醉
		;機嫌がいいか酔ってる時
		IF 裸なう
			リソース名 = 立絵_裸_笑顔_{キャラ番号}
		ELSE
			リソース名 = 立絵_服_笑顔_{キャラ番号}
			
			;マウスオーバー時
			リソース名_マウスオーバー = 立絵_服_笑顔_{キャラ番号}
		ENDIF
	ELSE
		;通常時
		IF 裸なう
			リソース名 = 立絵_裸_通常_{キャラ番号}
		ELSE
			リソース名 = 立絵_服_通常_{キャラ番号}
		ENDIF
		
	ENDIF
	
	;リソースのチェック 見つからない場合は通常に切り替え
	SIF !SPRITECREATED(リソース名)
		リソース名 = 立絵_服_通常_{キャラ番号}
		
	SIF FLAG:時間停止
		;時間停止時はマウスオーバー表示しない
		リソース名_マウスオーバー =
		
ELSE
	;顔画像表示の時
	;================================================================
	IF TALENT:(キャラ番号):心情 == -1 || CFLAG:(キャラ番号):ブチギレ
		;怒ってる時
		IF 裸なう
			IF !FLAG:時間停止 && MARK:(キャラ番号):快楽刻印 < 3 && PALAM:(キャラ番号):欲情 < 200000
				リソース名 = 顔絵_裸_恥憤怒_{キャラ番号}
			ELSE
				リソース名 = 顔絵_裸_憤怒_{キャラ番号}
			ENDIF
		ELSE
			リソース名 = 顔絵_服_憤怒_{キャラ番号}
			;マウスオーバー時
			IF ABL:キャラ番号:親密 >= 5
				リソース名_マウスオーバー = 顔絵_服_通常_{キャラ番号}
			ELSE
				リソース名_マウスオーバー = 顔絵_服_憤怒_{キャラ番号}
			ENDIF
		ENDIF
	ELSEIF TALENT:キャラ番号:心情 == 1 || BASE:キャラ番号:情緒 == MAXBASE:キャラ番号:情緒 || TCVAR:キャラ番号:烂醉
		;機嫌がいいか酔ってる時
		IF 裸なう
			IF !FLAG:時間停止 && MARK:(キャラ番号):快楽刻印 < 3 && PALAM:(キャラ番号):欲情 < 200000
				リソース名 = 顔絵_裸_恥笑顔_{キャラ番号}
			ELSE
				リソース名 = 顔絵_裸_笑顔_{キャラ番号}
			ENDIF
		ELSE
			リソース名 = 顔絵_服_笑顔_{キャラ番号}
			
			;マウスオーバー時
			リソース名_マウスオーバー = 顔絵_服_笑顔_{キャラ番号}
		ENDIF
	ELSE
		;通常時
		IF 裸なう
			IF !FLAG:時間停止 && MARK:(キャラ番号):快楽刻印 < 3 && PALAM:(キャラ番号):欲情 < 200000
				リソース名 = 顔絵_裸_恥通常_{キャラ番号}
			ELSE
				リソース名 = 顔絵_裸_通常_{キャラ番号}
			ENDIF
		ELSE
			リソース名 = 顔絵_服_通常_{キャラ番号}
		ENDIF
		
	ENDIF
	
	;リソースのチェック 見つからない場合は通常に切り替え
	SIF !SPRITECREATED(リソース名)
		リソース名 = 顔絵_服_通常_{キャラ番号}
	
	SIF FLAG:時間停止
		;時間停止時はマウスオーバー表示しない
		リソース名_マウスオーバー =
ENDIF

;画像セット
	CALL 画像セット(リソース名, 0, 0, キャラ画像表示サイズ比, 1, @"{1000+キャラ番号}", @"ターゲット:{ターゲット番号}", リソース名_マウスオーバー)
RETURN 1

;*******************************************************************************************************
;キャラクター照れ顔表示用
;*******************************************************************************************************
@キャラ照れ顔98(ターゲット番号)
#DIM キャラ番号
#DIM ターゲット番号
#DIMS リソース名
キャラ番号 = 98
IF (!TEQUIP:キャラ番号:上半身着衣状況 || BATHROOM(CFLAG:キャラ番号:現在位置))
	リソース名 = 顔絵_照れ2_{キャラ番号}
		SIF !SPRITECREATED(リソース名)
		リソース名 = 顔絵_照れ_{キャラ番号}
ELSE
	リソース名 = 顔絵_照れ_{キャラ番号}
ENDIF
;画像セット
	CALL 画像セット(リソース名, 0, 0, キャラ画像表示サイズ比, 1, @"{1000+キャラ番号}", @"ターゲット：{ターゲット番号}", リソース名)
RETURN 1
